/*HTLv3*/(()=>{var e={128:e=>{s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",n=Object.freeze({useProxy:!0,ready:0}),r=new WeakMap,i="2,1,0"===[1].reduce(((e,t,n)=>[e,t,n]),2).toString()?Array.prototype.reduce:function(e,t){var n,r=Object(this),i=r.length>>>0,o=0;if(t)n=t;else{for(;o<i&&!(o in r);)o++;n=r[o++]}for(;o<i;)o in r&&(n=e(n,r[o],o,r)),o++;return n};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),((e,t)=>(t&&Object.keys(t).forEach((n=>{e[n]=t[n]})),e)),e)};function s(e){var d,c={},l=[];function u(e,t){return"function"==typeof e?f.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?f.apply(null,arguments):"object"==typeof e?p.apply(null,arguments):void 0}function p(e,t,n){var r=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),r=!1);var i={},o=["constructor"];do{(t=t.filter((t=>!("function"!=typeof e[t]||-1!==o.indexOf(t)||t.match(/^_/))))).forEach((t=>{var r=t.split(":"),o=r[0],a=r[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=f(a,s,n?[n,o]:void 0)}})),e=Object.getPrototypeOf(e)}while(r&&e);return i}function g(e){var n=Array.isArray(e)?e:e.split(".");return i.call(n,((r,i,o)=>{var a=r[i],s=!1;return a||(o===n.length-1?(d||l.push((()=>{s||console.warn(t+": referenced '"+e+"' but it was never created")})),r[i]=m((e=>{r[i]=e,s=!0}))):r[i]={})}),c)}function m(e){var t=[],n=[],i=()=>{},o={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,n,"after",e,t)},getHooks:function(e){var r=t.concat(n);"object"==typeof e&&(r=r.filter((t=>Object.keys(e).every((n=>t[n]===e[n])))));try{a(r,{remove:function(){return r.forEach((e=>{e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return r},removeAll:function(){return this.getHooks().remove()}},s={install:function(r,o,a){this.type=r,i=a,a(t,n),e&&e(o)}};return r.set(o.after,s),o;function d(e,r,o,a){var s={hook:o,type:r,priority:a||10,remove:()=>{var r=e.indexOf(s);-1!==r&&(e.splice(r,1),i(t,n))}};return e.push(s),e.sort(((e,t)=>t.priority-e.priority)),i(t,n),this}}function f(n,i,c){var u=i.after&&r.get(i.after);if(u){if(u.type!==n)throw t+": recreated hookable with different type";return i}var p,f,h=c?g(c):m(),b={get:function(e,t){return h[t]||Reflect.get.apply(Reflect,arguments)}};return d||l.push(y),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?f=new Proxy(i,b):(f=function(){return b.apply?b.apply(i,this,o(arguments)):i.apply(this,arguments)},a(f,h)),r.get(f.after).install(n,f,((e,t)=>{var r,i=[];function a(e){i.push(e.hook)}e.length||t.length?(e.forEach(a),r=i.push(void 0)-1,t.forEach(a),p=(e,t,a)=>{var s,d=0,c="async"===n&&"function"==typeof a[a.length-1]&&a.pop();function l(e){"sync"===n?s=e:c&&c.apply(null,arguments)}function u(e){if(i[d]){var r=o(arguments);return u.bail=l,r.unshift(u),i[d++].apply(t,r)}"sync"===n?s=e:c&&c.apply(null,arguments)}return i[r]=function(){var r=o(arguments,1);"async"===n&&c&&(delete u.bail,r.push(u));var i=e.apply(t,r);"sync"===n&&u(i)},u.apply(null,a),s}):p=void 0,y()})),f;function y(){!d&&("sync"!==n||e.ready&s.SYNC)&&("async"!==n||e.ready&s.ASYNC)?"sync"!==n&&e.ready&s.QUEUE?b.apply=function(){var e=arguments;l.push((()=>{f.apply(e[1],e[2])}))}:b.apply=()=>{throw t+": hooked function not ready"}:b.apply=p}}return(e=a({},n,e)).ready?u.ready=()=>{d=!0,(e=>{for(var t;t=e.shift();)t()})(l)}:d=!0,u.get=g,u}e.exports=s},855:e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var r in t){var i=t[r];n[r]=i&&"object"==typeof i?e(i):i}return n}},288:(e,t,n)=>{n.d(t,{register:()=>Ke});var r=n(194),i=n(416),o=n(82),a=n(731);function s(e){let{state:t,data:n}=e;const{slot:i}=n;i.config={...t.config.slots[i.name]},i.config.tiles||=[],i.elemId||Object.defineProperty(i,"elemId",{get(){return this.elem?.id},set(e){this.elem.id=e}}),i.safeData={id:i.id,name:i.name,get elem(){return i.elem},get filled(){return i.filled},get tile(){return i.tile?.viewport&&{viewport:[...i.tile.viewport]}},get destroyed(){return i.destroyed},destroy(){(0,r.Tz)(t,i.id)}}}function d(e){let{state:t,data:n}=e;l(t,n.slot)}function c(e){const{data:t}=e,[n,r]=(0,o.Hr)(e.state.wnd),i=[];for(const e of t.slots)if(!e.destroyed){if(!e.tile){const[t,i]=u(e,n,r);e.tile={viewport:t,config:i},e.sizes=i?.sizes}e.tile.config?(e.ad={targeting:{}},i.push(e)):delete e.core.state}t.slots=i,i.length||e.stop()}function l(e,t){const{ad:n}=t;n&&(delete t.ad,e.events.emit("ad.destroy",{ad:n},{sync:!0}))}function u(e,t,n){return e.config.tiles.find((e=>{let[r]=e;return t>r[0]||t===r[0]&&n>=r[1]}))||[]}var p=n(412);const g=/["'=!+#*~;^()<>[\],&]/;function m(e){return e&&g.test(e)}async function f(e,t,n){(!t||g.test(t)||/(^\d)|\s/.test(t))&&r.Rm.warn("API setTargeting: invalid key",t),n=(0,o.vD)(n),(Array.isArray(n)?n.some(m):m(n))&&r.Rm.warn("API setTargeting: key",t,"has invalid values:",n),(await e.gpt.ready).pubads().setTargeting(t,n)}async function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(await e.gpt.ready).pubads().clearTargeting(...n)}function b(e){return new Proxy({},{get:(t,n)=>async function(){return(await e.gpt.ready).pubads()[n](...arguments)}})}function y(e){let{state:t}=e;if(t.gpt)return;const{wnd:n}=t;n.googletag?.apiReady||((0,o.k0)(n,t.config.modules.gpt.url||"https://securepubads.g.doubleclick.net/tag/js/gpt.js"),n.googletag||={}),n.googletag.cmd||=[],t.gpt={},t.gpt.ready=new Promise((e=>{n.googletag.cmd.push((()=>{r.Rm.info("GPT ready");const i=t.gpt.googletag=n.googletag;e(i)}))})),(0,o.BU)(t.gpt,t.gpt.ready)}async function v(e){let{state:t}=e;(await t.gpt.ready).pubads().setTargeting(`${t.config.htlPrefix}bidid`,String(t.config.buildId))}function w(e,t,n){if("requested"!==t.ad?.gpt.state)return;!n.empty&&t.elem&&(t.ad.elem=t.elem.querySelector("iframe[data-google-container-id]"));const i=t.gpt.slot;for(const e of Object.keys(t.ad.targeting))i.clearTargeting(e);t.ad.gpt.state="rendered",n.safeData={empty:n.empty},(0,r.L5)(e,t.id,n)}function I(e){let{data:t}=e;const{slot:n}=t;n.config.gpt={targeting:{},...n.config.gpt},n.safeData.gpt={config:{get adUnit(){return n.config.gpt.adUnit},set adUnit(e){n.config.gpt.adUnit=e},get targeting(){return n.config.gpt.targeting}},get slot(){return n.gpt?.slot},get adUnitPath(){return n.gpt?.adUnitPath}}}function C(e){let{state:t,data:n}=e;const{slot:r}=n;"default"===r.gpt?.mode&&r.gpt.slot&&t.gpt.googletag.destroySlots([r.gpt.slot])}function x(e){let{state:t,data:n}=e;const{networkCode:i}=t.config.modules.gpt;for(const e of n.slots){if(!e.ad||e.gptDefault)continue;if(e.gptDefault={},e.gpt)continue;let t=e.tile.config.gpt?.adUnit||e.config.gpt.adUnit;if(!t)continue;if(!t.startsWith("/")){if(!i){r.Rm.warn("GPT slot",e.id,"missing network code");continue}t=`/${i}/${t}`}const n=e.config.gpt.outOfPage||e.config.interstitial&&"INTERSTITIAL";(n||e.sizes)&&(e.gpt={mode:"default",adUnitPath:t,outOfPage:n})}}function S(e){if(!e.elemId){if(!e.elem)throw new Error(`GPT requires a DOM element ID to define slot ${e.id}`);e.elemId=e.id}return e.elemId}function T(e,t){for(const n of e.core.slots.values())if("default"===n.gpt?.mode&&n.gpt.slot===t)return n;return null}function A(e){let{state:t}=e;t.adBatch={slotIds:[],resume:(0,o.nF)((()=>(e=>{const{slotIds:t}=e.adBatch;e.adBatch.slotIds=[],(0,r.hj)(e,"ad.init",i.eo+1,t)})(t)),50)}}function k(e){const{data:t}=e;if(t.noBatch)return;const{adBatch:n}=e.state,{slotIds:r}=n;r.push(...t.slots.map((e=>{let{id:t}=e;return t}))),e.stop(),n.resume()}function _(e,t){const n=e.iab||={};let r=n[t];if(r)return r;const i=`__${t}`,o=`${i}Locator`;let a;for(let{wnd:t}=e;;t=t.parent){try{if("function"==typeof t[i]){r=t[i];break}}catch{}try{if(t.frames[o]){a=t;break}}catch{}if(t===t.top)break}return a&&(r=((e,t,n)=>{const r=`${e}Call`,i=`${e}Return`,o={};return t.addEventListener("message",(e=>{let{data:t}=e;if(!t)return;if("string"==typeof t){if(!t.includes(i))return;try{t=JSON.parse(t)}catch{return}}const n=t[i];if(n?.callId){const e=o[n.callId];delete o[n.callId],e&&e(n.returnValue,n.success)}})),(t,i,a,s)=>{const d=`htl-iab-${e}-${Math.random()}`;o[d]=a,n.postMessage({[r]:{command:t,parameter:s,version:i,callId:d}},"*")}})(i,e.wnd,a)),r&&(n[t]=r),r}const E=[[120,240],[120,600],[160,600],[250,250],[300,50],[300,75],[300,100],[300,250],[300,300],[300,600],[300,1050],[320,50],[320,100],[336,280],[400,300],[468,60],[728,90],[970,90],[970,250]];function O(e){return e.filter((e=>(0,o.Fs)(e)&&E.some((t=>{let[n,r]=t;return n===e[0]&&r===e[1]}))))}function R(e){let{state:t}=e;t.config.modules.amazon.pubId&&(0,o.k0)(t.wnd,"https://c.amazon-adsystem.com/aax2/apstag.js");const[n,r]=(0,o.v6)();t.amazon={ready:n,initDone:r,targeting:{}}}async function U(e){let{state:t,data:n}=e;const{bidsReady:r,id:i}=n.slot.amazon||{};r&&(await r,delete t.amazon.targeting[i])}function B(e){let{state:t,data:n}=e;if(t.hb.disabledBidders.amazon)return;const{floor:r}=t.config.modules.amazon,i=r&&{value:r,currency:"USD"},o=[];for(const e of n.slots){const{ad:t}=e;if(!(t&&e.tile.config.amazon&&e.gpt&&e.sizes))continue;const n=O(e.sizes);if(!n.length)continue;e.amazon||={id:e.elemId||e.elem&&(e.elemId=e.id)||e.id};const r={slotID:e.amazon.id,slotName:e.gpt.adUnitPath,sizes:n};i&&(r.floor=i);const a=e.config.amazon?.params;a&&(r.slotParams=a),t.amazon={slot:r},t.hb={},o.push(e)}o.length&&t.events.emit("amazon.slots",{slots:o},{sync:!0})}async function j(e){let{state:t,data:n}=e;if(!n.slots.some((e=>e.ad?.amazon)))return;await t.amazon.ready;const r=n.slots.filter((e=>e.ad?.amazon));if(!r.length)return;const{targeting:i}=t.amazon;for(const e of r)delete i[e.amazon.id];const o=new Promise((e=>{t.wnd.apstag.fetchBids({slots:r.map((e=>e.ad.amazon.slot))},(t=>{((e,t)=>{for(const n of e){const{targeting:e,slotID:r}=n;if(e)(e.amzniid||e.amzniid_sp)&&(t[r]=e);else if(n.amzniid){const e=t[r]={};for(const[t,r]of Object.entries(n))t.startsWith("amzn")&&(e[t]=r)}}})(t,i),e()}))}));for(const e of r)e.amazon.bidsReady=e.ad.amazon.bidsReady=o}async function D(e){let{state:t,data:n}=e;const r=n.slots.filter((e=>e.ad?.amazon?.bidsReady));if(!r.length)return;await Promise.allSettled(r.map((e=>e.ad.amazon.bidsReady)));const{targeting:i}=t.amazon;for(const e of r)if(e.ad){const{id:t}=e.amazon;Object.assign(e.ad.targeting,i[t])}}const P="amazon";async function $(e){let{state:t,data:n}=e;const{apstag:r}=t.wnd,{hem256:i}=n.data;if(!r.rpa||!n.targets.has(P)||!i)return;await t.amazon.ready;const a={optOut:!1,hashedRecords:[{type:"email",record:i}]},{ready:s,done:d}=(0,o.v6)();return t.amazon.hasUserId?r.upa(a,d):(r.rpa(a,d),t.amazon.hasUserId=!0),s}function z(e){let{state:t,data:n}=e;t.hb={disabledBidders:{}},(0,p.a)(t,n.htlbid,{enableHeaderBidding(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length)for(const t of n)delete e.hb.disabledBidders[t||""];else e.hb.disabled=!1},disableHeaderBidding(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length)for(const t of n)t&&(e.hb.disabledBidders[t]||=!0);else e.hb.disabled=!0}})}function N(e){e.state.hb.disabled&&(e.stop(),e.next((()=>{(0,r.hj)(e.state,"ad.init",i.n8+1,e.data.slots.map((e=>e.id)))})))}function q(e){const t=[],n=[];for(const{ad:r,id:i}of e.data.slots)r&&(r.hb?n:t).push(i);e.stop(),e.next((()=>{(0,r.hj)(e.state,"ad.init",i.n8,n),(0,r.hj)(e.state,"ad.init",i.n8+1,t)}))}function M(e){let{state:t}=e;if(t.config.hiddenSlots?.destroy)return void(t.hiddenSlots={add(e){(0,r.Tz)(t,e.id)}});const n=new Map,i=new t.wnd.ResizeObserver((e=>{const i=[];for(const{target:t,contentBoxSize:o}of e)if(o.length>1||o.some((e=>e.blockSize||e.inlineSize))){const e=n.get(t);e&&(e.hiddenSlots.unobserve(),r.Rm.info("Slot",e.id,"is resumed"),i.push(e.id))}(0,r.s3)(t,i)}));t.hiddenSlots={add(e){const{elem:t}=e;i.observe(t),n.set(t,e),e.hiddenSlots={unobserve(){i.unobserve(t),n.delete(t),delete e.hiddenSlots}},r.Rm.info("Slot",e.id,"is paused")}},t.events.on("slot.destroy",(e=>{let{data:t}=e;t.slot.hiddenSlots?.unobserve()}))}function F(e){const{state:t,data:n}=e;if(n.noHiddenSlots)return;const i=[];for(const e of n.slots){if(e.hiddenSlots||e.destroyed)continue;const{elem:n}=e;n?n.isConnected?(0,o.dW)(n)?i.push(e):(t.hiddenSlots.add(e),delete e.core.state):(0,r.Tz)(t,e.id):i.push(e)}n.slots=i,i.length||e.stop()}const L=-1,W=1,V=0;function G(e,t){const n=e.scrollY;return{top:n,bottom:n+t[1]}}function H(e,t,n){let[r,i]=n;return{w:r,h:i,visible:"visible"===e.document.visibilityState,scroll:t.scroll}}function J(e,t,n){e.on("init",(e=>((e,t,n)=>{let{state:a}=n;(function(e){if(e.view)return;const{wnd:t}=e;e.view={...G(t,(0,o.Hr)(t)),subs:[],scroll:V};const n=(0,o.nF)((()=>(e=>{let{wnd:t,view:n}=e;const r=(0,o.Hr)(t),{top:i,bottom:a}=G(t,r);(i<n.top||a>n.bottom)&&(i<=n.top&&a<=n.bottom?n.scroll=L:i>=n.top&&a>=n.bottom?n.scroll=W:n.scroll=V),n.top=i,n.bottom=a;const s=H(t,n,r);for(const e of n.subs)e(s)})(e)),150);t.addEventListener("resize",n),t.addEventListener("scroll",n,{capture:!0}),t.document.addEventListener("visibilitychange",n)})(a),a[e]={slotIds:new Set},((e,t)=>{e.view.subs.push(t)})(a,(n=>((e,t,n,o)=>{if(!o.visible)return;const a=[],{slotIds:s}=n[e];for(const t of s){const r=n.core.slots.get(t);if(!r||r.core.state){s.delete(t);continue}const i=r.ad?.[e];i.checkEager?i.checkEager(o)&&(s.delete(t),a.push(t),r.core.state=i.slotState,delete r.ad[e]):s.delete(t)}a.length&&(0,r.hj)(n,t,i._d+1,a)})(e,t,a,n)))})(t,n,e))).on("slot.destroy",(e=>{let{state:n,data:r}=e;n[t].slotIds.delete(r.slot.id)})).on("ad.init",(e=>{let{state:n,data:r}=e;for(const e of r.slots)n[t].slotIds.delete(e.id)}),i.Ry).on(n,(e=>((e,t)=>{const{state:n}=t,r=[],i=(e=>{let{wnd:t,view:n}=e;return H(t,n,(0,o.Hr)(t))})(n);for(const o of t.data.slots){const{elem:t,ad:a}=o;if(!t||!a)continue;const{enabled:s,pixels:d}={...n.config.modules[e],...o.config[e],...o.tile.config[e]};if(!s||null==d){r.push(o);continue}const c=e=>K(t,d,e);if(i.visible&&c(i))r.push(o);else{n[e].slotIds.add(o.id);const t=o.core.state;delete o.core.state,o.ad[e]={checkEager:c,slotState:t}}}t.data.slots=r,r.length||t.stop()})(t,e)),i._d)}function K(e,t,n){const{top:r,bottom:i}=e.getBoundingClientRect();return i>=0&&r<=n.h||!(i<0&&n.scroll>0||r>n.h&&n.scroll<0)&&(i<0?-i:r-n.h)<=t}function X(e){let{state:t}=e;t.prebid={ready:Promise.resolve().then(n.bind(n,981)).then((e=>(t.prebid.pbjs=e.default,e.default)))},(0,o.BU)(t.prebid,t.prebid.ready)}async function Y(e){let{state:t,data:n}=e;const{bidsBackReady:r,code:i}=n.slot.prebid||{};r&&(await r,t.prebid.pbjs.markWinningBidAsUsed({adUnitCode:i}))}function Q(e){let{state:t,data:n}=e;for(const e of n.slots)e.ad&&!e.prebid&&(e.tile.config.prebid||e.config.tiles.some((e=>{let[,t]=e;return t?.prebid})))&&(e.prebid={gpid:t.prebid.gpid(e)},ie(t,e))}function Z(e){let{state:t,data:n}=e;const{disabledBidders:r}=t.hb;if(r.prebid)return;const{bids:i,groups:a,native:s}=t.config.modules.prebid,d=[];for(const e of n.slots){const{prebid:t}=e.tile.config;if(!t||!e.ad)continue;let n;const c={},l=e.sizes?.filter(o.Fs);if(l?.length&&(c.banner={sizes:l,name:e.name},n=!0),s&&null!=t.native&&(c.native={sendTargetingKeys:!1,...s[t.native]},n=!0),!n)continue;const{gpid:u}=e.prebid,p={ext:{gpid:u,data:{pbadslot:u}}};e.config.interstitial&&(p.instl=1);const[g,m]=re(i,a,t.groups,r);!g.length&&m||(e.ad.prebid={adUnit:{code:e.prebid.code,mediaTypes:c,ortb2Imp:p}},e.ad.hb={},g.length&&(e.ad.prebid.adUnit.bids=g),d.push(e))}d.length&&t.events.emit("prebid.adunits",{slots:d},{sync:!0})}async function ee(e){let{state:t,data:n}=e;if(!n.slots.some((e=>e.ad?.prebid)))return;await t.prebid.allReady,(e=>{const t=e.prebid.consentManagement||={};if(t.done)return;const n={},i=e.config?.modules?.prebid?.config?.v3Settings;let o=i?.gdpr?.timeout;("number"!=typeof o||isNaN(o))&&(o=8e3);let a=i?.gpp?.timeout;("number"!=typeof a||isNaN(a))&&(a=8e3),_(e,"tcfapi")&&(n.gdpr={timeout:o,defaultGdprScope:!0}),_(e,"uspapi")&&(n.usp={timeout:3e3}),_(e,"gpp")&&(n.gpp={cmpApi:!0,timeout:a}),Object.keys(n).length?(e.prebid.pbjs.setConfig({consentManagement:n}),r.Rm.trace("Consent management is configured for Prebid.js"),t.done=!0):Date.now()-e.ts>5e3&&(t.done=!0,r.Rm.trace("Consent management is not configured for Prebid.js"))})(t);const i=n.slots.filter((e=>e.ad?.prebid));if(!i.length)return;const o=new Promise((e=>{t.prebid.pbjs.requestBids({adUnits:i.map((e=>e.ad.prebid.adUnit)),bidsBackHandler:e})}));o.then((e=>{t.events.emit("prebid.bids",{slots:i,bidsBack:e},{sync:!0})}));for(const e of i)e.prebid.bidsBackReady=e.ad.prebid.bidsBackReady=o}async function te(e){let{state:t,data:n}=e;const r=n.slots.filter((e=>e.ad?.prebid?.bidsBackReady));if(!r.length)return;await Promise.allSettled(r.map((e=>e.ad.prebid.bidsBackReady)));const i=t.prebid.pbjs.getAdserverTargeting();for(const e of r)e.ad&&Object.assign(e.ad.targeting,i[e.prebid.code])}function ne(e){let{data:t}=e;const n=t.slot.ad?.prebid?.bidSize;n&&(t.size=n,r.Rm.trace("Prebid.js saves for slot",t.slot.id,"the rendered size",n))}function re(e,t,n,r){let i;const o=[];for(const a of n.map((e=>t[e])))for(let t=1;t<a.length;t+=2){const[n,...s]=e[a[t-1]];r[n]?i=!0:o.push({bidder:n,params:{...s[a[t]]}})}return[o,i]}function ie(e,t){const{elemId:n}=t;if(n)t.prebid.code=n;else if(t.elem){const{prebid:n}=e,r=t.name||"htl-ad";let i=r;for(;e.wnd.document.getElementById(i);)i=`${r}-${++n.slotSeq}`;t.prebid.code=t.elemId=i}else t.prebid.code=t.id}function oe(e,t){let{adUnitCode:n,width:r,height:i}=t;if(n&&r&&i)for(const t of e.core.slots.values()){const e=t.ad?.prebid;if(e?.adUnit.code===n)return void(e.bidSize||=[r,i])}}function ae(e){let{data:t}=e;t.slot.prebidBidderThrottling={}}function se(e){let{data:t}=e;for(const e of Object.values(t.slot.prebidBidderThrottling))e.reset()}function de(e){let{state:t,data:n}=e;const{bidderThrottling:i}=t.config.modules.prebid,[o,a]=(s=i.reportingKeyPrefix)?[(e,t)=>((e,t,n)=>{const r=t.ad.prebid.opps||={};if(r[e])return;const i=r[e]={};for(const{bidder:r}of n)t.ad.targeting[`${e}_${r}`]=i[r]=(i[r]||0)+1})(s,e,t),(e,t)=>((e,t,n)=>{const r=t.ad.prebid.opps[e];if(!r)return;const i=new Set(n.map((e=>e.bidder)));for(const[n,o]of Object.entries(r))i.has(n)||(t.ad.targeting[`${e}_${n}`]=-o,delete r[n])})(s,e,t)]:[()=>{},()=>{}];var s;for(const e of n.slots){const{adUnit:t}=e.ad.prebid;if(!t.bids)continue;o(e,t.bids);const n=new Set,s=[];for(const r of t.bids)(e.prebidBidderThrottling[r.bidder]?.fails||0)<i.failsToPause?s.push(r):n.add(r.bidder);a(e,s),s.length?t.bids=s:delete e.ad.prebid,n.size&&r.Rm.trace("Slot",e.id,"throttles bidders",n)}n.slots=n.slots.filter((e=>e.ad.prebid))}function ce(e){let{state:t,data:n}=e;const{failsToPause:i,unpauseSeconds:a}=t.config.modules.prebid.bidderThrottling;for(const e of n.slots){if(!e.ad)continue;const{code:t,bids:s}=e.ad.prebid.adUnit,d=new Set(s.map((e=>{let{bidder:t}=e;return t})));for(const{bidder:r}of n.bidsBack[t]?.bids||[])le(e,r).reset(),d.delete(r);const c=[];for(const t of d){const n=le(e,t);++n.fails,n.fails>=i&&(c.push(t),n.cancelTimeout(),n.cancelTimeout=(0,o.uN)((()=>{n.fails=0,r.Rm.trace("Slot",e.id,"stops throttling bidder",t)}),1e3*a))}c.length&&r.Rm.trace("Slot",e.id,"is to throttle bidders",c)}}function le(e,t){return e.prebidBidderThrottling[t]||={fails:0,cancelTimeout(){},reset(){this.cancelTimeout(),this.fails=0}}}function ue(e){let{state:t,data:n}=e;const{blockAdvertisers:i,pbjs:o}=t.prebid;function a(e){return i.has(e)}for(const[e,{bids:t}]of Object.entries(n.bidsBack))for(const n of t)(n.meta?.advertiserDomains||[]).some(a)&&(r.Rm.trace("Prebid bid for slot",e,"is blocked due to advertiser domains",n),o.markWinningBidAsUsed({adId:n.adId}))}function pe(e){let{state:t,data:n}=e;const{htlbid:r}=n;((e,t)=>{var n;t.browserType||=(n=e.wnd.navigator.userAgent).includes("Firefox")?"firefox":n.includes("Edg")?"edge":n.includes("Chrome")?"chrome":n.includes("Safari")?"safari":"other"})(t,r),t.config.modules.prebid.config.floors.additionalSchemaFields={bidder:(e,t)=>t.bidderCode||e?.bidder,browser:()=>r.browserType,country:()=>r.countryCode,device:()=>r.deviceType,slot(e){const n=e?.adUnitCode;if(n)for(const e of t.core.slots.values())if(e.ad?.prebid?.adUnit.code===n)return e.name;return null}}}function ge(e){let{state:t,data:n}=e;const{slot:i}=n;i.refresh={count:0,switchEnabled(e){this.disabled=!e,e&&this.stopped&&(this.stopped=!1,(0,r.s3)(t,[i.id]))}}}function me(e){let{data:t}=e;const n=Date.now();for(const e of t.slots)e.refresh.stopped=!1,e.refresh.adInitTs=n}function fe(e){let{state:t,data:n}=e;const{slot:i}=n;if(!i.ad)return;i.ad.refresh&&(i.ad.refresh.stop(),delete i.ad.refresh);const{max:a,interval:s}={...t.config.modules.refresh,...i.config.refresh,...i.tile.config.refresh};if(!a||!s||i.refresh.count>=a)return;++i.refresh.count===a&&r.Rm.trace("Slot",i.id,"reaches max refreshes");const d=Math.max(0,1e3*s-(Date.now()-i.refresh.adInitTs)),[c,l]=(0,o.Sf)(d);i.ad.refresh={ready:c,stop(){l(!0)}},c.then((e=>{e||r.Rm.trace("Refresh interval of slot",i.id,"passed")}))}async function he(e){const{slot:t}=e.data;t.ad?.refresh&&!await t.ad.refresh.ready&&t.ad?.refresh&&(delete t.ad.refresh,t.refresh.disabled?t.refresh.stopped=!0:e.next((()=>(0,r.s3)(e.state,[t.id]))))}function be(e){let{state:t}=e;const n=new t.wnd.IntersectionObserver((e=>((e,t)=>{for(const n of t){const t=e.refreshView.elemData.get(n.target);if(!t)continue;const{boundingClientRect:r,intersectionRatio:i}=n,o=i>=(r.width*r.height>=242e3?.3:.5);t.inView!==o&&(o?we(t):Ie(t))}})(t,e)),{threshold:[.3,.5]});t.refreshView={observer:n,elemData:new Map};const{document:i}=t.wnd;i.addEventListener("visibilitychange",(()=>{((e,t)=>{if(t){for(const t of e.core.slots.values())t.ad?.refreshView?.observe();r.Rm.trace("Viewability refresh resumed")}else{const{elemData:t,observer:n}=e.refreshView;for(const e of t.values())Ie(e);n.disconnect(),t.clear(),r.Rm.trace("Viewability refresh paused")}})(t,"visible"===i.visibilityState)}))}function ye(e){let{state:t,data:n}=e;if(n.empty)return;const{ad:r}=n.slot;if(!r?.refresh)return;const{elem:i}=r;if(!i)return;r.refreshView?.done();const[a,s]=(0,o.v6)(),{refreshView:d}=t;r.refreshView={slotId:n.slot.id,ready:a,observe(){d.elemData.has(i)||(d.observer.observe(i),d.elemData.set(i,this))},done(){this.stopContTimer(),this.stopAccTimer(),d.observer.unobserve(i),d.elemData.delete(i),this.observe=()=>{},s()},accTime:0,stopContTimer(){},stopAccTimer(){}},"visible"===t.wnd.document.visibilityState&&r.refreshView.observe()}const ve=5e3;function we(e){e.inView=!0,e.contViewed||(e.stopContTimer=(0,o.uN)((()=>{e.contViewed=!0,r.Rm.trace("Continous viewable time of slot",e.slotId,"reached"),e.accViewed&&e.done()}),1e3)),e.accViewed||(e.vStart=Date.now(),e.stopAccTimer=(0,o.uN)((()=>{Ce(e)}),ve-e.accTime))}function Ie(e){e.inView=!1,e.contViewed||e.stopContTimer(),e.accViewed||(e.stopAccTimer(),null!=e.vStart&&(e.accTime+=Date.now()-e.vStart,delete e.vStart,e.accTime>=ve&&Ce(e)))}function Ce(e){e.accViewed=!0,r.Rm.trace("Accumulative viewable time of slot",e.slotId,"reached"),e.contViewed&&e.done()}function xe(e){let{state:t,data:n}=e;const{key:r,initialValue:i=0}=t.config.modules.refreshCounter;for(const e of n.slots){if(null==e.refreshCounter){e.refreshCounter=i;let t=e.ad.targeting[r];Array.isArray(t)&&([t]=t),"string"==typeof t&&(t=t.trim(),""!==t&&(t=Number(t))),Number.isInteger(t)&&(e.refreshCounter=t)}e.ad.targeting[r]=e.refreshCounter}}const Se="htlbid";function Te(e){if(!e.localStorage){const{wnd:t}=e;let[n,r]=Ae(t);e.localStorage={get:e=>n[e],set(e,t){null==t?delete n[e]:n[e]=t,r&&ke(r,n)}},t.addEventListener("storage",(0,o.vA)((()=>{[n,r]=Ae(t)}),1e3))}return e.localStorage}function Ae(e){let t,n;try{n=e.localStorage.getItem(Se),t=e.localStorage}catch{return[{}]}if(n)try{if(n=JSON.parse(n),"object"!=typeof n||Array.isArray(n))throw new Error}catch{n=null}return n||(n={},ke(t,n)),[n,t]}function ke(e,t){try{e.setItem(Se,JSON.stringify(t))}catch{}}const _e="blockStickyUntil";let Ee=!0;function Oe(e){let{state:t}=e;const{document:n}=t.wnd,r=n.createElement("style");Ee=!(Number.isInteger(t.config?.accountId)&&243===t.config.accountId),r.innerHTML=".ams-sticky{position:fixed;bottom:0;left:0;right:0;display:block;z-index:100000;text-align:center}.ams-sticky>div{display:inline-block;position:relative}.ams-sticky .ams-sticky-container{border:none;margin:0;padding:0}.ams-sticky .ams-sticky-close{position:absolute;top:-11px;right:-11px;display:block;width:22px;height:22px;overflow:hidden;border:none;font-size:0;line-height:0;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWCAMAAADzapwJAAACfFBMVEXNzs/Oz9DLzM28vb6PkZOVl5i3uLrKy8y/wMGlpqjMzc7R0tPHycrIycrP0NHh4uPb3N3e3t7d3t/c3N3s7e3Fxseys7XFxsjs7ezY2drp6erS09Tn5+jU1da1t7jZ2tuhpKVfYmSipKVSVViho6S2t7i2t7mEhoh/gYMcICRPUlVPUlUcICR/goOEhoiMjpBsbnIpLDEpLTBsb3KMjpCEhokeIicfIyaEhoh2eHt1eHtzdnhydXjJyswgJSkgJClnam5oa22qrK4kKCwkKCyrra+Bg4aBg4YnLC8oLC9rbXBqbXBqbXAmKi8nKy+GiIqGiIolKS0lKS2ys7Voam5oam3Hx8kbHyMbICPHx8mRk5WRk5Vxc3YUGB0UGR1wc3ZbXmAmKi4nKi5bXWCZm51rbXAoLDAoLDCZnJ1+gYN7fX8bICVOUVZOUlUdISR7fX9/gYQbHyMmKi4OEhYKDhQVGR4dISYhJSkeIiYVGh4KDxMJDhIUGB0gJCkiJikVGR0JDRMMEBUXGyAkKCwKDhMQFBgjJysYHCAMERURFRoMEBSQkpRoam4jJisKDRNoa24ECQ4iJioLDxSanJ7////+/v5VWFwIDREIDBFWWFwLEBQECA4hJioJDRKOkZP7+/smKi8mKy8dISUOExhucnTu7u9vcnUOEhgcICUjJyxVV1v6+vpVWFsDBwwqLTLt7e4qLTEDCAwqLjPt7e0rLzMKDhIhJCkPExhsb3Lu7+8UGBwiJSknKy8TFxwFCQ6bnJ9XWl2bnZ8SFhoNERWLjY9kZmoLDxNkZ2oeISYkJywQFBkRFRkXHCAIDRISFxsTFxsWGh4hJSgJDhMOEhd/K57pAAAAcXRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQG52dWw/Aw2A29p/DErc2kpkYjY0CN7chYMC6OcCQD9vbXZ1dm5vPT7l5gGDhQji5AlBQmX8/Wc52ds7DIDb3AwEQWx2dm1CBZFwjgAAAAHJSURBVBjTY2BgZGJmYWVT19DU0tbR1WNjZWFmYmRgYGBk5+DUNzAsLCouLio0Mjbh5GAHCnMxcvOYmpWUlpUDQUVllbkFLzcjFwMXH79ldU1tXTkU1DdY8fNxMQgIWjc2NZe3tLaVl7e1VpU3t3fYCAkziNjadTZXdHX3NLT19vV3d1U0d9rbijCIOkyYWD5p8pSp06bPmDl1yuRZ5RNnO4oyODnXzJk7b8qUKfMXLJwPpObNratxcWVwW1RWvnjJVKDA0qVAYuqy5eVlK9wZPIC2r6xetXoKGKxeMxdoda0ng9daoHjb9HXrQaLrN0wHipZv9GbwhghvAgtv3jIDLOzD4AvU09aCMGQrSNyPwX/Rom3bd4Ct3Amycsf28kUrAhjEAnfthjhwzx6wA7eW7w0KZhAN2TexvHH/lKkHZsw4MHXKwa7yiftCxRkkwsIPNVccPnL0WFvbseNHDp84eSgiUoRBUipqOjCouk6Bgur0rPLmM2ejpSQZpIVkYmLPlcMD9nxcvIyQNIOsJJdcQmLDhYqLoGgovZSULMclKcsgK8+uoJiSmlZYdBkYaempGYpK7PJgYSVlFdXMrOyc3Lz8AjUVZZAwAFt80ArYIo0GAAAAAElFTkSuQmCC) center no-repeat transparent}",Ee&&n.head.appendChild(r),t.sticky={}}function Re(e){let{state:t}=e;const n=Te(t).get(_e);Number.isFinite(n)&&(t.sticky.block=Date.now()<1e3*n)}function Ue(e){const{slot:t}=e.data;t.safeData.sticky={get container(){return t.sticky?.container},get closeButton(){return t.sticky?.closeButton}},t.config.sticky&&e.state.sticky.block&&(e.stop(),t.config.tiles=[],r.Rm.info("Sticky slot",t.id,"is blocked"))}function Be(e){let{data:t}=e;const{slot:n}=t,{sticky:r}=n;r&&(delete n.sticky,r.container&&(delete n.elem.dataset.refId,n.elem.remove(),n.elem=r.container),r.closeButton&&r.closeButton.parentElement.remove(),n.elem.classList.remove("ams-sticky"),r.inserted&&n.elem.remove())}function je(e){let{state:t,data:n}=e;const{document:i}=t.wnd,o=i.body||i.documentElement;for(const e of n.slots){const{sticky:n}=e.config;if(!n||e.sticky)continue;e.sticky={};let{elem:a}=e;if(a||(a=o.appendChild(i.createElement("div")),e.elem=a,e.sticky.inserted=!0),Ee&&a.classList.add("ams-sticky"),n.closeable){const o=$e(i,a);e.elem=$e(i,o),a.id&&(e.elem.dataset.refId=a.id);const s=i.createElement("a");s.classList.add("ams-sticky-close"),s.href="#",s.style.display="none",s.onclick=i=>{i.preventDefault(),(0,r.Tz)(t,e.id),t.sticky.block=!0,n.closeHours&&Te(t).set(_e,Math.floor(Date.now()/1e3)+3600*n.closeHours)},e.sticky.closeButton=o.appendChild(s),e.sticky.container=a}}}function De(e){let{data:t}=e;for(const e of t.slots){const t=e.sticky?.closeButton;t&&(t.style.display="none")}}function Pe(e){let{data:t}=e;const{slot:n}=t;if(!n.sticky)return;const{closeButton:r}=n.sticky;r&&n.elem.offsetWidth&&n.elem.offsetHeight&&(r.style.display="")}function $e(e,t){const n=e.createElement("div");return n.classList.add("ams-sticky-container"),t.appendChild(n)}function ze(e){(0,r.s3)(e,e.core.slots.keys(),{noBatch:!0})}function Ne(e,t){const n=(0,p.C)(e,t);n&&(0,r.s3)(e,[n.id])}function qe(e,t){return(0,p.C)(e,t)?.safeData}function Me(e,t,n){function r(e){e.refresh?.switchEnabled(t)}if(null==n)return void e.core.slots.forEach(r);const i=(0,p.C)(e,n);i&&r(i)}function Fe(e){for(const{id:t,apiDivs:n}of e.core.slots.values())n&&!n.elem.isConnected&&(0,r.Tz)(e,t);const t=`${e.config.htlPrefix}ad-`,n=e.wnd.document.querySelectorAll(`div[class*="${t}"]:not([data-ad-processed])`),i=[];for(const a of n){if(!(0,o.dW)(a))continue;const{dataset:n}=a;let s;n.adProcessed="";for(const n of a.classList)if(n.startsWith(t)){const r=n.slice(t.length);if(e.config.slots[r]){s=r;break}}s?i.push((0,r.YW)(e,{name:s,elem:a,apiDivs:{elem:a}})):r.Rm.warn("Unknown slot name for element",a)}(0,r.s3)(e,i,{noBatch:!0})}function Le(e){let{data:t}=e;for(const e of t.slots){if(!e.apiDivs)continue;const{targeting:t}=e.apiDivs.elem.dataset;if(t)try{Object.assign(e.ad.targeting,JSON.parse(t))}catch{We("targeting",e)}}}function We(e,t){r.Rm.warn(`Ignored invalid data-${e} for slot`,t.id)}function Ve(e){let{data:t}=e;const{slot:n}=t;n.apiDivs&&(delete n.apiDivs.elem.dataset.adProcessed,delete n.apiDivs)}async function Ge(e,t){t=!1!==t;const{apiLayout:n}=e;if(t!==n.started)if(n.started=t,t){const{wnd:t}=e;if(!t.document.body){const[e,i]=(e=>{r.Rm.trace("API layout waiting for body");const[t,n]=(0,o.v6)(),i=new e.MutationObserver((()=>{e.document.body&&(r.Rm.trace("API layout finds body"),i.disconnect(),n(!0))}));return i.observe(e.document.documentElement,{childList:!0}),[t,()=>{i.disconnect(),n(!1)}]})(t);if(n.stop=i,!await e)return}if(n.ready){r.Rm.trace("API layout waiting");const[e,t]=(0,o.v6)();n.stop=()=>t(!1);try{n.ready.then((()=>t(!0)))}catch(e){r.Rm.warn("API layout waiting error:",e),t(!0)}if(!await e)return;r.Rm.trace("API layout continuing")}const i=(0,o.nF)((()=>Fe(e)),100),a=new t.MutationObserver(i);Fe(e),a.observe(t.document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["class","data-ad-processed"]}),n.stop=()=>{a.disconnect(),i.cancel()}}else n.stop();else t&&Fe(e)}function He(e,t){let{data:n}=t;const{slot:r}=n,i=r.apiDivs?.elem.dataset;if(!i)return;const o=r.config[e]={...r.config[e]};if(null!=i.eager&&(o.enabled=!1),i.lazyPixels){const e=Number(i.lazyPixels);e>0&&Number.isFinite(e)?o.pixels=e:We("lazy-pixels",r)}}function Je(e){let{data:t}=e;const{slot:n}=t,r=n.apiDivs?.elem.dataset;if(!r)return;const i=n.config.refresh={...n.config.refresh};switch(r.refresh){case"viewable":i.max||=1/0;break;case"disabled":i.max=0;break;default:r.refresh&&We("refresh",n)}if(r.refreshSecs){const e=Number(r.refreshSecs);e>0&&Number.isFinite(e)?i.interval=e:We("refresh-secs",n)}if(r.refreshMax){const e=Number(r.refreshMax);e>=0?i.max=e:We("refresh-max",n)}}function Ke(e){(function(e){e.on("slot.define",s,i._5).on("slot.destroy",d,i._5).on("ad.init",(e=>{let{state:t,data:n}=e;for(const e of n.slots)l(t,e)}),i.Ry).on("ad.init",c,i._5).on("ad.init",(t=>{if(!t.stopped){const{data:n}=t;t.next((()=>{e.emit("ad.fetch",n)}))}}),i.Uh).on("ad.fetch",a.P,i.ny).on("ad.rendered",(e=>{let{data:t}=e;t.slot.filled||=!t.empty}),i._5);const{state:t}=e;t.wnd.addEventListener("resize",(0,o.vA)((()=>(e=>{const[t,n]=(0,o.Hr)(e.wnd),r=[];for(const i of e.core.slots.values()){if(!i.tile)continue;const{viewport:e}=i.tile;if(e){const[o,a]=e;if(o>t||o===t&&a>n){r.push(i);continue}}const[o]=u(i,t,n);o!==e&&r.push(i)}r.length&&e.events.emit("viewport.break",{slots:r})})(t)),500))})(e),function(e){e.on("init",y,i.Cm).on("init",(e=>{(async e=>{let{state:t}=e;const n=await t.gpt.ready,i=n.pubads();i.disableInitialLoad(),i.enableSingleRequest(),i.setCentering(!0),i.addEventListener("slotRenderEnded",(e=>{((e,t,n)=>{if(!t)return;if(r.Rm.trace("GPT slot",t.id,"render ended with",n),"requested"!==t.ad?.gpt.state)return;t.elem||=e.wnd.document.getElementById(n.slot.getSlotElementId());const i={empty:n.isEmpty,size:n.size,ts:Date.now()};if(i.empty||t.ad.gpt.onload)return void w(e,t,i);t.ad.gpt.notifyRendered?.(!0);const a=(0,o.uN)((()=>w(e,t,i)),3e3);t.ad.gpt.notifyRendered=n=>{a()&&!n&&w(e,t,i)}})(t,T(t,e.slot),e)})),i.addEventListener("slotOnload",(e=>{var n;(n=T(t,e.slot))&&(r.Rm.trace("GPT slot",n.id,"loaded"),"requested"===n.ad?.gpt.state&&(n.ad.gpt.onload=!0,n.ad.gpt.notifyRendered?.()))})),n.enableServices()})(e),(0,p.a)(e.state,e.data.htlbid,{clearTargeting:h,setTargeting:f,pubads:b})})).on("pageview",v).on("slot.define",I).on("slot.destroy",C).on("ad.init",x,i.lD).on("ad.init",(e=>{(async e=>{let{state:t,data:n}=e;for(const e of n.slots)e.ad&&"default"===e.gpt?.mode&&(Object.assign(e.ad.targeting,e.config.gpt.targeting),e.gpt.slot&&(e.ad.gpt={}));const i=await t.gpt.ready;for(const e of n.slots){if(!e.ad||e.gptDefault?.slotDefined)continue;const{gpt:n}=e;if("default"!==n?.mode||n.slot)continue;e.gptDefault.slotDefined=!0;const{outOfPage:o,adUnitPath:a}=n;try{if(!0===o)n.slot=i.defineOutOfPageSlot(a,S(e),{htl:{slotName:""}});else if(o){if(n.slot=i.defineOutOfPageSlot(a,i.enums.OutOfPageFormat[o],{htl:{slotName:""}}),!n.slot){r.Rm.warn("GPT slot",e.id,"cannot be defined as",o),delete e.gpt;continue}}else n.slot=i.defineSlot(a,e.sizes,S(e),{htl:{slotName:""}})}catch(t){r.Rm.error(t.message),delete e.gpt;continue}n.slot.addService(i.pubads()),t.events.emit("gpt.slot.define",{slot:e},{sync:!0}),e.ad.gpt={}}})(e)})).on("ad.fetch",(e=>{let{state:t,data:n}=e;return(async(e,t,n,r)=>{if(!(r=r.filter((e=>"default"===e.gpt?.mode))).length)return;await e.gpt.allReady;const i=[];for(const e of r){if(!e.ad)continue;const t=e.gpt.slot;if(t){for(const[n,r]of Object.entries(e.ad.targeting))t.setTargeting(n,(0,o.vD)(r));i.push(t),e.ad.gpt.state="requested"}}if(!i.length)return;const a={gptSlots:i};a.safeData={get gptSlots(){return[...a.gptSlots]}},e.events.emit("gpt.refresh",a,{sync:!0}),n(i)})(t,0,(function(){t.gpt.googletag.pubads().refresh(...arguments)}),n.slots)}))}(e),(e=>{e.on("init",A).on("ad.init",k,i.eo)})(e),function(e){e.on("init",R,i.Cm).on("init",(e=>{(async e=>{let{state:t,data:n}=e;if(!t.amazon)return;t.events.on("slot.destroyed",U).on("ad.init",B,i.PF).on("ad.init",j,i.n8).on("ad.fetch",D,i.sW).on("user.data",$);const{htlbid:a}=n,{modules:s}=t.config,{amazon:d}=s;if(!d.pubId)return a.aps=t.wnd.apstag,void t.amazon.initDone();((e,t)=>{function n(n,r){t[e]._Q.push([n,r])}t[e]||(t[e]={init:function(){n("i",arguments)},fetchBids:function(){n("f",arguments)},setDisplayBids:()=>{},targetingKeys:()=>[],dpa:function(){n("di",arguments)},rpa:function(){n("ri",arguments)},upa:function(){n("ui",arguments)},_Q:[]})})("apstag",t.wnd),a.aps=t.wnd.apstag;const c={pubID:d.pubId,bidTimeout:s.hb.timeout,gdpr:{cmpTimeout:8e3}};null!=d.schain&&(c.schain=(0,o.T)(s.schain,d.schain)),d.deals&&(c.deals=!0),Object.assign(c,await(a.amazon?.initConfig)),(async(e,t,n)=>{if(!t.params?.us_privacy){let i;await n;const a=_(e,"uspapi");if(a){try{i=(await(0,o.Z3)((e=>(t,n,r)=>new Promise(((i,o)=>{e(t,n,((e,t)=>(t?i:o)(e)),r)})))(a)("getUSPData",1),3e3)).uspString}catch(e){r.Rm.error("Failed to get U.S. privacy data",e),i="1-Y-"}t.params||={},t.params.us_privacy=i}}e.wnd.apstag.init(t),r.Rm.info("APS initialized"),e.amazon.initDone()})(t,c,a.iab?.ready)})(e)}))}(e),(e=>{e.on("init",z).on("ad.init",N,i.yO).on("ad.init",q,i.rN)})(e),(e=>{e.on("init",M).on("ad.init",F,i.Ry)})(e),(e=>{J(e,"lazyFetch","ad.fetch")})(e),(e=>{J(e,"lazyLoad","ad.init")})(e),function(e){e.on("init",X,i.Cm).on("init",(e=>{(async e=>{let{state:t,data:n}=e;const{htlbid:i}=n;t.prebid.waitFor(i.iab?.ready),i.pbjs||={cmd:[]};const o=await t.prebid.ready,{modules:a}=t.config,{prebid:s}=a;o.setConfig({bidderTimeout:a.hb.timeout}),s.config&&o.setConfig(s.config),o.bidderSettings=Object.fromEntries(Object.entries(s.bidderSettings||{}).map((e=>{let[t,{bidCpmMultiplier:n,...r}]=e;return n&&(r.bidCpmAdjustment=e=>e*n),[t,r]})));for(const[e,...t]of s.aliases||[])for(const n of t)o.aliasBidder(e,n);if(s.analytics){const e=s.analytics.filter((e=>{e.options||={};const{percent:t}=e;return delete e.percent,!t||100*Math.random()<t}));e.length&&o.enableAnalytics(e)}o.onEvent("bidWon",(e=>{oe(t,e)})),o.onEvent("adRenderSucceeded",(e=>{let{bid:n}=e;oe(t,n)}));const{cmd:d}=i.pbjs;i.pbjs=o;for(const e of d||[])o.cmd.push(e);((e,t)=>{t.generateGpid?e.gpid=e=>{const n=t.generateGpid(e.safeData)||"";return n||r.Rm.error("generateGpid returns empty value for GPID"),n}:e.gpid=t=>{const n=t.config.prebid?.gpid;if(n)return n;const r=`${t.gpt?.adUnitPath||t.name||"slot"}#`;return e.gpidSeqs[r]||=0,`${r}${++e.gpidSeqs[r]}`}})(t.prebid,i)})(e)})).on("init",(e=>{(async e=>{let{state:t}=e;const{prebid:n}=t.config.modules,{userSync:r}=n;r&&(delete n.userSync,(n.config||={}).userSync=r,(await t.prebid.ready).setConfig({userSync:r}))})(e)}),i.bk).on("pageview",(e=>{let{state:t}=e;t.prebid.gpidSeqs={},t.prebid.slotSeq=0})).on("slot.destroy",Y).on("ad.init",Q,i.LL).on("ad.init",Z,i.PF).on("ad.init",ee,i.n8).on("ad.fetch",te,i.sW).on("ad.rendered",ne,i.Ry)}(e),(e=>{e.on("prebid.adunits",(e=>{let{data:t}=e;for(const e of t.slots){const t=e.gpt?.adUnitPath;t&&(e.ad.prebid.adUnit.ortb2Imp.ext.data.adserver={name:"gam",adslot:t})}}))})(e),(e=>{e.on("slot.define",ae).on("slot.destroy",se).on("prebid.adunits",de).on("prebid.bids",ce)})(e),function(e){e.on("init",(e=>{(async e=>{let{state:t}=e;const{blockAdvertisers:n}=t.config.modules.prebid;t.prebid.blockAdvertisers=new Set(n),((e,t,n)=>{const r=n(e.getConfig(t));r&&e.setConfig({[t]:r})})(await t.prebid.ready,"ortb2",(e=>((e||={}).badv=n,e)))})(e)})).on("prebid.bids",ue)}(e),function(e){e.on("init",(e=>{(async e=>{let{state:t}=e;const{prebid:n,schain:r}=t.config.modules,i=n.schain||{},a=await t.prebid.ready;a.setConfig({schain:{config:(0,o.T)(r,i.global)}});for(const[e,...t]of i.bidders||[])a.setBidderConfig({bidders:t,config:{schain:{config:(0,o.T)(r,e)}}})})(e)}))}(e),(e=>{e.on("init",pe,i.sW)})(e),(e=>{e.on("slot.define",ge).on("ad.init",me,i.Ry).on("ad.destroy",(e=>{let{data:t}=e;t.ad.refresh?.stop()})).on("ad.rendered",fe).on("ad.rendered",he,i.bk)})(e),(e=>{e.on("init",be).on("ad.destroy",(e=>{let{data:t}=e;t.ad.refreshView?.done()})).on("ad.rendered",ye,i.HZ).on("ad.rendered",(e=>{let{data:t}=e;return t.slot.ad?.refreshView?.ready}),i.iD)})(e),(e=>{e.on("ad.init",xe,i.HZ).on("ad.rendered",(e=>{let{data:t}=e;++t.slot.refreshCounter}))})(e),(e=>{e.on("init",Oe).on("pageview",Re).on("slot.define",Ue,i.lD).on("slot.destroy",Be,i.bk).on("ad.init",je,i.lD).on("ad.fetch",De,i.bk).on("ad.rendered",Pe)})(e),(e=>{e.on("pageview",(e=>{let{state:t}=e;t.wnd.fetch(`//ams-pageview-public.s3.amazonaws.com/1x1-pixel.png?id=${t.config.pixelId}`,{mode:"no-cors",credentials:"omit",cache:"no-store"})}))})(e),(e=>{e.on("init",(e=>{let{state:t,data:n}=e;(0,p.a)(t,n.htlbid,{refresh:ze,refreshSlot:Ne,getSlot:qe,disableRefresh(e,t){Me(e,!1,t)},enableRefresh(e,t){Me(e,!0,t)}})}))})(e),(e=>{e.on("init",(e=>{let{state:t,data:n}=e;const{htlbid:r}=n;t.apiLayout={started:!1,ready:r.layoutReady},(0,p.a)(t,r,{layout:Ge})})),function(e){e.state.apiDivs||(e.state.apiDivs={},e.on("slot.destroy",Ve).on("ad.init",Le,i.HZ))}(e)})(e),(e=>{e.on("slot.define",(e=>{let{data:t}=e;const{slot:n}=t;let r=n.apiDivs?.elem.dataset.unit?.trim().replace(/\/$/,"");if(r){if(r.startsWith("/")){const e=r.slice(1),[t]=e.split("/",1);/^\d+$/.test(t)||(r=e)}n.config.gpt={...n.config.gpt,adUnit:r}}}))})(e),(e=>{e.on("slot.define",(e=>{let{data:t}=e;const{slot:n}=t,r=n.apiDivs?.elem.dataset.gpid;r&&(n.config.prebid={...n.config.prebid,gpid:r})}))})(e),(e=>{e.on("slot.define",(e=>He("lazyFetch",e)))})(e),(e=>{e.on("slot.define",(e=>He("lazyLoad",e)))})(e),(e=>{e.on("slot.define",Je)})(e)}},981:(e,t,n)=>{n.d(t,{default:()=>am});const r=window,i=r.pbjs=r.pbjs||{};function o(){return i}function a(e){i.installedModules.push(e)}function s(e,t,n){return e&&e.includes(t,n)||!1}function d(e,t,n){return e&&e.find(t,n)}i.cmd=i.cmd||[],i.que=i.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"));const c={buckets:[{max:5,increment:.5}]},l={buckets:[{max:20,increment:.1}]},u={buckets:[{max:20,increment:.01}]},p={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},g={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function m(e,t,n){let r="";if(!f(t))return r;const i=t.buckets.reduce(((e,t)=>e.max>t.max?e:t),{max:0});let o=0,a=d(t.buckets,(t=>{if(e>i.max*n){let e=t.precision;void 0===e&&(e=2),r=(t.max*n).toFixed(e)}else{if(e<=t.max*n&&e>=o*n)return t.min=o,t;o=t.max}}));return a&&(r=h(e,a,n)),r}function f(e){if(Oe(e)||!e.buckets||!Array.isArray(e.buckets))return!1;let t=!0;return e.buckets.forEach((e=>{e.max&&e.increment||(t=!1)})),t}function h(e,t,n){const r=void 0!==t.precision?t.precision:2,i=t.increment*n,o=t.min*n;let a=Math.floor,s=P.getConfig("cpmRoundingFunction");"function"==typeof s&&(a=s);let d,c,l=Math.pow(10,r+2),u=(e*l-o*l)/(i*l);try{d=a(u)*i+o}catch(e){c=!0}return(c||"number"!=typeof d)&&(fe("Invalid rounding function passed in config"),d=Math.floor(u)*i+o),d=Number(d.toFixed(10)),d.toFixed(r)}function b(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}const y="adserverTargeting",v={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent",BID_ACCEPTED:"bidAccepted"},w={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},I={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp"},C={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},x={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},S="s2s",T="targetingSet",A="rendered",k={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},_={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},E=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],O={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},R="TRUE"===Ce("pbjs_debug").toUpperCase(),U="random",B={};B[U]=!0,B.fixed=!0;const j=U,D={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},P=function(){let e,t,n,r=[],i=null;function o(){function r(e){return o[e].val}function i(e,t){o[e].val=t}e={};const o={publisherDomain:{set(e){null!=e&&fe("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{val:D.MEDIUM,set(e){c(e)&&("string"==typeof e?i("priceGranularity",s(e)?e:D.MEDIUM):_e(e)&&(i("customPriceBucket",e),i("priceGranularity",D.CUSTOM),ge("Using custom price granularity")))}},customPriceBucket:{val:{},set(){}},mediaTypePriceGranularity:{val:{},set(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce(((t,n)=>(c(e[n])?"string"==typeof e?t[n]=s(e[n])?e[n]:r("priceGranularity"):_e(e)&&(t[n]=e[n],ge(`Using custom price granularity for ${n}`)):fe(`Invalid price granularity for media type: ${n}`),t)),{}))}},bidderSequence:{val:j,set(e){B[e]?i("bidderSequence",e):fe(`Invalid order: ${e}. Bidder Sequence was not set.`)}},auctionOptions:{val:{},set(e){(e=>{if(!_e(e))return fe("Auction Options must be an object"),!1;for(let t of Object.keys(e)){if("secondaryBidders"!==t&&"suppressStaleRender"!==t)return fe(`Auction Options given an incorrect param: ${t}`),!1;if("secondaryBidders"===t){if(!Ae(e[t]))return fe(`Auction Options ${t} must be of type Array`),!1;if(!e[t].every(Te))return fe(`Auction Options ${t} must be only string`),!1}else if("suppressStaleRender"===t&&!Ee(e[t]))return fe(`Auction Options ${t} must be of type boolean`),!1}return!0})(e)&&i("auctionOptions",e)}}};let a={debug:R,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,timeoutBuffer:400,disableAjaxTimeout:!1,maxNestedIframes:10};function s(e){return d(Object.keys(D),(t=>e===D[t]))}function c(e){if(!e)return he("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)s(e)||fe("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if(_e(e)&&!f(e))return he("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}Object.defineProperties(a,Object.fromEntries(Object.entries(o).map((e=>{let[t,n]=e;return[t,Object.assign({get:r.bind(null,t),set:i.bind(null,t),enumerable:!0},n)]})))),t&&m(Object.keys(t).reduce(((e,n)=>(t[n]!==a[n]&&(e[n]=a[n]||{}),e)),{})),t=a,n={}}function a(){if(i&&n&&_e(n[i])){let e=n[i];return function(){return Array.from.apply(Array,arguments)}(new Set(Object.keys(t).concat(Object.keys(e)))).reduce(((n,r)=>(void 0===e[r]?n[r]=t[r]:void 0===t[r]?n[r]=e[r]:_e(e[r])?n[r]=gt({},t[r],e[r]):n[r]=e[r],n)),{})}return Object.assign({},t)}const[c,l]=[a,()=>{const e=a();return Object.defineProperty(e,"ortb2",{get:()=>{throw new Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map((e=>function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0];return t?b(e(),t):a()}return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t;if("string"!=typeof e&&(i=e,e="*",n=t||{}),"function"!=typeof i)return void he("listener must be a function");const o={topic:e,callback:i};return r.push(o),n.init&&i("*"===e?l():{[e]:l(e)}),()=>{r.splice(r.indexOf(o),1)}}(...arguments)})),[u,p]=[l,c].map((e=>function(){let t=e(...arguments);return t&&"object"==typeof t&&(t=Je(t)),t}));function g(n){if(!_e(n))return void he("setConfig options must be an object");let r=Object.keys(n),i={};r.forEach((r=>{let o=n[r];_e(e[r])&&_e(o)&&(o=Object.assign({},e[r],o));try{i[r]=t[r]=o}catch(e){fe(`Cannot set config for property ${r} : `,e)}})),m(i)}function m(e){const t=Object.keys(e);r.filter((e=>s(t,e.topic))).forEach((t=>{t.callback({[t.topic]:e[t.topic]})})),r.filter((e=>"*"===e.topic)).forEach((t=>t.callback(e)))}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{(e=>{if(!_e(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!_e(e.config))throw"setBidderConfig bidder options must contain a config object"})(e),e.bidders.forEach((r=>{n[r]||(n[r]={}),Object.keys(e.config).forEach((i=>{let o=e.config[i];if(_e(o)){const e=t?gt:Object.assign;n[r][i]=e({},n[r][i]||{},o)}else n[r][i]=o}))}))}catch(e){he(e)}}function y(e,t){i=e;try{return t()}finally{v()}}function v(){i=null}return o(),{getCurrentBidder:()=>i,resetBidder:v,getConfig:l,getAnyConfig:c,readConfig:u,readAnyConfig:p,setConfig:g,mergeConfig:e=>{if(!_e(e))return void he("mergeConfig input must be an object");const t=gt(a(),e);return g({...t}),t},setDefaults:n=>{_e(e)?(Object.assign(e,n),Object.assign(t,n)):he("defaults must be an object")},resetConfig:o,runWithBidder:y,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return y(e,t.bind(this,...r))}fe("config.callbackWithBidder callback is not a function")}}},setBidderConfig:h,getBidderConfig:()=>n,mergeBidderConfig:e=>h(e,!0)}}();var $=n(855),z=n.n($);const N=0,q=1;class M{#e;#t;static timeout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new M((t=>{0===e?t():setTimeout(t,e)}))}constructor(e){if("function"!=typeof e)throw new Error("resolver not a function");const t=[],n=[];let[r,i]=[N,q].map((e=>o=>{if(e===N&&"function"==typeof o?.then)o.then(r,i);else if(!t.length)for(t.push(e,o);n.length;)n.shift()()}));try{e(r,i)}catch(e){i(e)}this.#e=t,this.#t=n}then(e,t){const n=this.#e;return new this.constructor(((r,i)=>{const o=()=>{let o=n[1],[a,s]=n[0]===N?[e,r]:[t,i];if("function"==typeof a){try{o=a(o)}catch(e){return void i(e)}s=r}s(o)};n.length?o():this.#t.push(o)}))}catch(e){return this.then(null,e)}finally(e){let t;return this.then((n=>(t=n,e())),(n=>(t=this.constructor.reject(n),e()))).then((()=>t))}static#n(e,t,n){let r=e.length;function i(){t.apply(this,arguments),--r<=0&&n&&n()}0===e.length&&n?n():e.forEach(((e,t)=>this.resolve(e).then((e=>i(!0,e,t)),(e=>i(!1,e,t)))))}static race(e){return new this(((t,n)=>{this.#n(e,((e,r)=>e?t(r):n(r)))}))}static all(e){return new this(((t,n)=>{let r=[];this.#n(e,((e,t,i)=>e?r[i]=t:n(t)),(()=>t(r)))}))}static allSettled(e){return new this((t=>{let n=[];this.#n(e,((e,t,r)=>n[r]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}),(()=>t(n)))}))}static resolve(e){return new this((t=>t(e)))}static reject(e){return new this(((t,n)=>n(e)))}}function F(){let e,t,{promiseFactory:n=e=>new M(e)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function r(e){return t=>e(t)}return{promise:n(((n,r)=>{e=n,t=r})),resolve:r(e),reject:r(t)}}var L="String",W="Object",V="Boolean",G=Object.prototype.toString;let H,J=Boolean(window.console),K=Boolean(J&&window.console.log),X=Boolean(J&&window.console.info),Y=Boolean(J&&window.console.warn),Q=Boolean(J&&window.console.error);const Z=o();function ee(){null!=H&&H(...arguments)}const te={checkCookieSupport:Ze,createTrackPixelIframeHtml:function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?((!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e=encodeURI(e)),t&&(t=`sandbox="${t}"`),`<iframe ${t} id="${oe()}"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="${e}">\n    </iframe>`):""},getWindowSelf:ue,getWindowTop:le,getWindowLocation:pe,insertUserSyncIframe:Ne,insertElement:De,isFn:Se,triggerPixel:$e,logError:he,logWarn:fe,logMessage:ge,logInfo:me,parseQS:dt,formatQS:ct,deepEqual:pt};let ne={};var re,ie=(re=0,()=>++re);function oe(){return ie()+Math.random().toString(16).substr(2)}function ae(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,ae)}function se(e,t){return t?.[e]||""}function de(e){return"string"==typeof e?e.split(",").filter((e=>e.match(/^(\d)+x(\d)+$/i))):"object"==typeof e?2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]?[ce(e)]:e.map(ce):[]}function ce(e){if(function(e){return Ae(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}(e))return e[0]+"x"+e[1]}function le(){return window.top}function ue(){return window.self}function pe(){return window.location}function ge(){ve()&&K&&console.log.apply(console,ye(arguments,"MESSAGE:"))}function me(){ve()&&X&&console.info.apply(console,ye(arguments,"INFO:"))}function fe(){ve()&&Y&&console.warn.apply(console,ye(arguments,"WARNING:")),ee(v.AUCTION_DEBUG,{type:"WARNING",arguments})}function he(){ve()&&Q&&console.error.apply(console,ye(arguments,"ERROR:")),ee(v.AUCTION_DEBUG,{type:"ERROR",arguments})}function be(e){function t(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];t(e,...r)}}return{logError:t(he),logWarn:t(fe),logMessage:t(ge),logInfo:t(me)}}function ye(e,t){e=[].slice.call(e);let n=P.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?`%c${n}`:"")),e;function r(e){return`display: inline-block; color: #fff; background: ${e}; padding: 1px 4px; border-radius: 3px;`}}function ve(){return!!P.getConfig("debug")}const we=(()=>{const e={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"};return function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=t.createElement("iframe");return Object.assign(i,Object.assign({},e,n)),Object.assign(i.style,r),i}})();function Ie(){return we(document,{id:oe(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function Ce(e){return dt(pe().search)[e]||""}function xe(e,t){return G.call(e)==="[object "+t+"]"}function Se(e){return xe(e,"Function")}function Te(e){return xe(e,L)}const Ae=Array.isArray.bind(Array);function ke(e){return xe(e,"Number")}function _e(e){return xe(e,W)}function Ee(e){return xe(e,V)}function Oe(e){return!e||(Ae(e)||Te(e)?!(e.length>0):Object.keys(e).length<=0)}function Re(e){return Te(e)&&(!e||0===e.length)}function Ue(e,t){if(Se(e?.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach((e=>{let[n,r]=e;return t.call(this,r,n)}))}function Be(e,t){return Se(e?.includes)&&e.includes(t)}function je(e,t){return Se(e?.map)?e.map(t):Object.entries(e||{}).map((n=>{let[r,i]=n;return t(i,r,e)}))}function De(e,t,n,r){let i;t=t||document,i=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if(i=i.length?i:t.getElementsByTagName("body"),i.length){i=i[0];let t=r?null:i.firstChild;return i.insertBefore(e,t)}}catch(e){}}function Pe(e,t){let n=null;return new M((r=>{const i=()=>{e.removeEventListener("load",i),e.removeEventListener("error",i),null!=n&&window.clearTimeout(n),r()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(n=window.setTimeout(i,t))}))}function $e(e,t,n){const r=new Image;t&&te.isFn(t)&&Pe(r,n).then(t),r.src=e}function ze(e){if(!e)return;const t=Ie();var n;te.insertElement(t,document,"body"),(n=t.contentWindow.document).open(),n.write(e),n.close()}function Ne(e,t,n){let r=te.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=r;let o=i.firstChild;t&&te.isFn(t)&&Pe(o,n).then(t),te.insertElement(o,document,"html",!0)}function qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;if(!e)return"";let n='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return n+='<img src="'+t(e)+'"></div>',n}function Me(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map((e=>e[1])).reduce(((e,t)=>e.replace("$"+encodeURIComponent(t),"$"+t)),encodeURI(e))}function Fe(e,t,n){return n.indexOf(e)===t}function Le(e,t){return e.concat(t)}function We(e,t){if(e)return t.flatMap((e=>e.bids)).find((t=>["bidId","adId","bid_id"].some((n=>t[n]===e))))}function Ve(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z.adUnits).map((e=>e.bids.map((e=>e.bidder)).reduce(Le,[]))).reduce(Le,[]).filter((e=>void 0!==e)).filter(Fe)}function Ge(){if(window.googletag&&Se(window.googletag.pubads)&&Se(window.googletag.pubads().getSlots))return!0}function He(e){let t=e.length;for(;t>0;){let n=Math.floor(Math.random()*t);t--;let r=e[t];e[t]=e[n],e[n]=r}return e}function Je(e){return z()(e)}function Ke(){try{return te.getWindowSelf()!==te.getWindowTop()}catch(e){return!0}}function Xe(e,t){if(e)return Object.entries(t).reduce(((e,t)=>{let[n,r]=t;return e.replace(new RegExp("\\$\\{"+n+"\\}","g"),r||"")}),e)}function Ye(){return(new Date).getTime()}function Qe(){return!1!==P.getConfig("deviceAccess")}function Ze(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function et(e,t){if(t<1)throw new Error(`numRequiredCalls must be a positive number. Got ${t}`);let n=0;return function(){n++,n===t&&e.apply(this,arguments)}}function tt(e,t){return e.reduce(((e,n)=>((e[n[t]]=e[n[t]]||[]).push(n),e)),{})}function nt(e,t){return t.filter((t=>e[t])).reduce(((t,n)=>Object.assign(t,{[n]:e[n]})),{})}function rt(e,t,n){return e.filter((e=>e.code===t)).flatMap((e=>e.bids)).filter((e=>e.bidder===n)).map((e=>e.params||{}))}const it=(e,t)=>e.getAdUnitPath()===t||e.getSlotElementId()===t,ot=Number.isInteger.bind(Number);function at(e,t){return"object"!=typeof e?{}:t.reduce(((n,r,i)=>{if("function"==typeof r)return n;let o=r,a=r.match(/^(.+?)\sas\s(.+?)$/i);a&&(r=a[1],o=a[2]);let s=e[r];return"function"==typeof t[i+1]&&(s=t[i+1](s,n)),void 0!==s&&(n[o]=s),n}),{})}function st(e,t){return Ae(e)&&(!t||e.length===t)&&e.every((e=>ot(e)))}function dt(e){return e?e.replace(/^\?/,"").split("&").reduce(((e,t)=>{let[n,r]=t.split("=");return/\[\]$/.test(n)?(n=n.replace("[]",""),e[n]=e[n]||[],e[n].push(r)):e[n]=r||"",e}),{}):{}}function ct(e){return Object.keys(e).map((t=>Array.isArray(e[t])?e[t].map((e=>`${t}[]=${e}`)).join("&"):`${t}=${e[t]}`)).join("&")}function lt(e,t){let n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);let r=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:r?n.search:te.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function ut(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?`:${e.port}`:""))+(e.pathname||"")+(e.search?`?${te.formatQS(e.search||"")}`:"")+(e.hash?`#${e.hash}`:"")}function pt(e,t){let{checkTypes:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t||n&&e.constructor!==t.constructor)return!1;{const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(let i of r){if(!t.hasOwnProperty(i))return!1;if(!pt(e[i],t[i],{checkTypes:n}))return!1}return!0}}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(_e(e)&&_e(i))for(const t in i)_e(i[t])?(e[t]||Object.assign(e,{[t]:{}}),gt(e[t],i[t])):Ae(i[t])?e[t]?Ae(e[t])&&i[t].forEach((n=>{let r=1;for(let i=0;i<e[t].length;i++)if(pt(e[t][i],n)){r=0;break}r&&e[t].push(n)})):Object.assign(e,{[t]:[...i[t]]}):Object.assign(e,{[t]:i[t]});return gt(e,...n)}function mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(e,t)=>{if(Se(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},r=3735928559^t,i=1103547991^t;for(let t,o=0;o<e.length;o++)t=e.charCodeAt(o),r=n(r^t,2654435761),i=n(i^t,1597334677);return r=n(r^r>>>16,2246822507)^n(i^i>>>13,3266489909),i=n(i^i>>>16,2246822507)^n(r^r>>>13,3266489909),(4294967296*(2097151&i)+(r>>>0)).toString()}function ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;const n=new Map,r=function(){const r=t.apply(this,arguments);return n.has(r)||n.set(r,e.apply(this,arguments)),n.get(r)};return r.clear=n.clear.bind(n),r}function ht(e,t,n){t.split&&(t=t.split("."));for(var r,i,o=0,a=t.length,s=e;o<a&&"__proto__"!==(i=t[o++])&&"constructor"!==i&&"prototype"!==i;)s=s[i]=o===a?n:typeof(r=s[i])==typeof t?r:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}function bt(){let{startTime:e=Ye,ttl:t=()=>null,monotonic:n=!1,slack:r=5e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=new Map,o=[],a=[],s=n?e=>a.push(e):e=>a.splice(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,r=0,i=e.length&&e.length-1;const o=n(t);for(;i-r>1;){const t=r+Math.round((i-r)/2);o>n(e[t])?r=t:i=t}for(;e.length>r&&o>n(e[r]);)r++;return r}(a,e,(e=>e.expiry)),0,e);let d,c;function l(){if(c&&clearTimeout(c),a.length>0){const e=Ye();d=Math.max(e,a[0].expiry+r),c=setTimeout((()=>{const e=Ye();let t=0;for(const n of a){if(n.expiry>e)break;o.forEach((e=>{try{e(n.item)}catch(e){he(e)}})),i.delete(n.item),t++}a.splice(0,t),c=null,l()}),d-e)}else c=null}let u={};return{[Symbol.iterator]:()=>i.keys(),add(n){!i.has(n)&&i.set(n,function(n){const i={},o=u;let a;const[p,g]=Object.entries({start:e,delta:t}).map((e=>{let t,[p,g]=e;return()=>{const e=t={};M.resolve(g(n)).then((n=>{e===t&&(i[p]=n,o===u&&null!=i.start&&null!=i.delta&&(a=i.start+i.delta,s(m),(null==c||d>a+r)&&l()))}))}})),m={item:n,refresh:g,get expiry(){return a}};return p(),g(),m}(n))},clear(){a.length=0,l(),i.clear(),u={}},toArray:()=>Array.from(i.keys()),refresh(){a.length=0,l();for(const e of i.values())e.refresh()},onExpiry:e=>(o.push(e),()=>{const t=o.indexOf(e);t>=0&&o.splice(t,1)})}}const yt="eventHistoryTTL";let vt=null;const wt=bt({monotonic:!0,ttl:()=>vt});P.getConfig(yt,(e=>{const t=vt;e=e?.[yt],vt="number"==typeof e?1e3*e:null,t!==vt&&wt.refresh()}));let It=Array.prototype.slice,Ct=Array.prototype.push,xt=Object.values(v);const St={bidWon:"adUnitCode"},Tt=(()=>{let e={},t={};function n(e){return xt.includes(e)}return t.has=n,t.on=(t,r,i)=>{if(n(t)){let n=e[t]||{que:[]};i?(n[i]=n[i]||{que:[]},n[i].que.push(r)):n.que.push(r),e[t]=n}else he("Wrong event name : "+t+" Valid event names :"+xt)},t.emit=function(t){((t,n)=>{ge("Emitting event for: "+t);let r=n[0]||{},i=r[St[t]],o=e[t]||{que:[]};var a=Object.keys(o);let s=[];wt.add({eventType:t,args:r,id:i,elapsedTime:window.performance&&window.performance.now&&window.performance.now()||0}),i&&a.includes(i)&&Ct.apply(s,o[i].que),Ct.apply(s,o.que),(s||[]).forEach((e=>{if(e)try{e.apply(null,n)}catch(e){he("Error executing handler:","events.js",e,t)}}))})(t,It.call(arguments,1))},t.off=(t,n,r)=>{let i=e[t];Oe(i)||Oe(i.que)&&Oe(i[r])||r&&(Oe(i[r])||Oe(i[r].que))||(r?(i[r].que||[]).forEach((e=>{let t=i[r].que;e===n&&t.splice(t.indexOf(e),1)})):(i.que||[]).forEach((e=>{let t=i.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=i)},t.get=()=>e,t.addEvents=e=>{xt=xt.concat(e)},t.getEvents=()=>wt.toArray().map((e=>Object.assign({},e))),t})();var At;At=Tt.emit.bind(Tt),H=At;const{on:kt,off:_t,get:Et,getEvents:Ot,emit:Rt,addEvents:Ut,has:Bt}=Tt,jt={fetch:window.fetch.bind(window),makeRequest:(e,t)=>new Request(e,t),timeout(e,t){const n=new AbortController;let r=setTimeout((()=>{n.abort(),he(`Request timeout after ${e}ms`,t),r=null}),e);return{signal:n.signal,done(){r&&clearTimeout(r)}}}},Dt="GET",Pt="Content-Type";function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:t,done:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(t,n)=>{let r;null==e||null!=n?.signal||P.getConfig("disableAjaxTimeout")||(r=jt.timeout(e,t),n=Object.assign({signal:r.signal},n));let i=jt.fetch(t,n);return null!=r?.done&&(i=i.finally(r.done)),i};return null==t&&null==n||(r=(e=>(r,i)=>{const o=new URL(null==r?.url?r:r.url,document.location).origin;let a=e(r,i);return t&&t(o),n&&(a=a.finally((()=>n(o)))),a})(r)),r}function zt(e,t){let{status:n,statusText:r="",headers:i,url:o}=e,a=0;function s(e){if(0===a)try{a=(new DOMParser).parseFromString(t,i?.get(Pt)?.split(";")?.[0])}catch(t){a=null,e&&e(t)}return a}return{readyState:XMLHttpRequest.DONE,status:n,statusText:r,responseText:t,response:t,responseType:"",responseURL:o,get responseXML(){return s(he)},getResponseHeader:e=>i?.has(e)?i.get(e):null,toJSON(){return Object.assign({responseXML:s()},this)},timedOut:!1}}function Nt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,{request:t,done:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=$t(e,{request:t,done:n});return function(e,t,n){((e,t)=>{const{success:n,error:r}="object"==typeof t&&null!=t?t:{success:"function"==typeof t?t:()=>null,error:(e,t)=>he("Network error",e,t)};e.then((e=>e.text().then((t=>[e,t])))).then((e=>{let[t,i]=e;const o=zt(t,i);t.ok||304===t.status?n(i,o):r(t.statusText,o)}),(e=>r("",Object.assign(zt({status:0},""),{reason:e,timedOut:"AbortError"===e?.name}))))})(r(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n.method||(t?"POST":Dt);if(r===Dt&&t){const r=lt(e,n);Object.assign(r.search,t),e=ut(r)}const i=new Headers(n.customHeaders);i.set(Pt,n.contentType||"text/plain");const o={method:r,headers:i};return r!==Dt&&t&&(o.body=t),n.withCredentials&&(o.credentials="include"),n.browsingTopics&&isSecureContext&&(o.browsingTopics=!0),jt.makeRequest(e,o)}(e,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),t)}}const qt=Nt(),Mt=$t();function Ft(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.vastXml?e.vastXml:`<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${e.vastUrl}]]></VASTAdTagURI>\n        ${(r=(r=e.vastImpUrl)&&(Array.isArray(r)?r:[r]))?r.map((e=>`<Impression><![CDATA[${e}]]></Impression>`)).join(""):""}\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`;var r;const i=t.getAuction(e);let o={type:"xml",value:n,ttlseconds:Number(e.ttl)+15};return P.getConfig("cache.vasttrack")&&(o.bidder=e.bidder,o.bidid=e.requestId,o.aid=e.auctionId),null!=i&&(o.timestamp=i.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(o.key=e.customCacheKey),o}const Lt=new WeakMap,Wt=["debugging","adloox","criteo","outstream","adagio","spotx","browsi","brandmetrics","justtag","tncId","akamaidap","ftrackId","inskin","hadron","medianet","improvedigital","azerionedge","aaxBlockmeter","confiant","arcspan","airgrid","clean.io","a1Media","geoedge","mediafilter","qortex","dynamicAdBoost","contxtful","id5","lucead"];function Vt(e,t,n,r,i){if(!t||!e)return void he("cannot load external script without url and moduleCode");if(!s(Wt,t))return void he(`${t} not whitelisted for loading external JavaScript`);r||(r=document);const o=c(r,e);if(o)return n&&"function"==typeof n&&(o.loaded?n():o.callbacks.push(n)),o.tag;const a=Lt.get(r)||{},d={loaded:!1,tag:null,callbacks:[]};return a[e]=d,Lt.set(r,a),n&&"function"==typeof n&&d.callbacks.push(n),fe(`module ${t} is loading external JavaScript`),((t,n,r,i)=>{r||(r=document);var o=r.createElement("script");o.type="text/javascript",o.async=!0;const a=c(r,e);return a&&(a.tag=o),o.readyState?o.onreadystatechange=()=>{"loaded"!==o.readyState&&"complete"!==o.readyState||(o.onreadystatechange=null,n())}:o.onload=()=>{n()},o.src=t,i&&((e,t)=>{Object.entries(t).forEach((t=>{let[n,r]=t;return e.setAttribute(n,r)}))})(o,i),De(o,r),o})(e,(()=>{d.loaded=!0;try{for(let e=0;e<d.callbacks.length;e++)d.callbacks[e]()}catch(e){he("Error executing callback","adloader.js:loadExternalScript",e)}}),r,i);function c(e,t){const n=Lt.get(e);return n&&n[t]?n[t]:null}}const Gt=o();function Ht(e){const{url:t,config:n,id:r,callback:i,loaded:o,adUnitCode:a,renderNow:s}=e;this.url=t,this.config=n,this.handlers={},this.id=r,this.renderNow=s,this.loaded=o,this.cmd=[],this.push=e=>{"function"==typeof e?this.loaded?e.call():this.cmd.push(e):he("Commands given to Renderer.push must be wrapped in a function")},this.callback=i||(()=>{this.loaded=!0,this.process()}),this.render=function(){const e=arguments,n=()=>{this._render?this._render.apply(this,e):fe("No render function was provided, please use .setRender on the renderer")};(e=>{const t=d(Gt.adUnits,(t=>t.code===e));if(!t)return!1;const n=b(t,"renderer"),r=!!(n&&n.url&&n.render),i=b(t,"mediaTypes.video.renderer"),o=!!(i&&i.url&&i.render);return!!(r&&!0!==n.backupOnly||o&&!0!==i.backupOnly)})(a)?(fe(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${a}`),n()):s?n():(this.cmd.unshift(n),Vt(t,"outstream",this.callback,this.documentContext))}.bind(this)}Ht.install=e=>{let{url:t,config:n,id:r,callback:i,loaded:o,adUnitCode:a,renderNow:s}=e;return new Ht({url:t,config:n,id:r,callback:i,loaded:o,adUnitCode:a,renderNow:s})},Ht.prototype.getConfig=function(){return this.config},Ht.prototype.setRender=function(e){this._render=e},Ht.prototype.setEventHandlers=function(e){this.handlers=e},Ht.prototype.handleVideoEvent=function(e){let{id:t,eventName:n}=e;"function"==typeof this.handlers[n]&&this.handlers[n](),ge(`Prebid Renderer event for id ${t} type ${n}`)},Ht.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){he("Error processing Renderer command: ",e)}};const Jt=new class{constructor(e,t){this.getSettings=e,this.defaultScope=t}get(e,t){let n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}getOwn(e,t){return e=this.#r(e),b(this.getSettings(),`${e}.${t}`)}getScopes(){return Object.keys(this.getSettings()).filter((e=>e!==this.defaultScope))}settingsFor(e){return gt({},this.ownSettingsFor(null),this.ownSettingsFor(e))}ownSettingsFor(e){return e=this.#r(e),this.getSettings()[e]||{}}#r(e){return e??this.defaultScope}}((()=>o().bidderSettings||{}),"standard"),Kt="prebid",Xt="bidder",Yt="userId",Qt="analytics";var Zt=n(128),en=n.n(Zt);let tn=en()({ready:en().SYNC|en().ASYNC|en().QUEUE});const nn=F();tn.ready=(()=>{const e=tn.ready;return function(){try{return e.apply(tn,arguments)}finally{nn.resolve()}}})();const rn=nn.promise,on=tn.get,an={};function sn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=an[e];if(i)return i(...n);on(e).before(((e,t)=>{t.push(n),e(t)}))}const dn="component",cn=dn+"Type",ln=dn+"Name",un="adapterCode",pn="storageType",gn="configName",mn="syncType",fn="syncUrl",hn="_config";function bn(e){return(t,n,r)=>{const i={[cn]:t,[ln]:n,[dn]:`${t}.${n}`};return t===Xt&&(i[un]=e(n)),yn(Object.assign(i,r))}}const yn=tn("sync",(e=>e)),[vn,wn]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be("Activity control:");const t={};function n(e){return t[e]=t[e]||[]}function r(t,n,r,i){let o;try{o=r(i)}catch(r){e.logError(`Exception in rule ${n} for '${t}'`,r),o={allow:!1,reason:r}}return o&&Object.assign({activity:t,name:n,component:i[dn]},o)}const i={};function o(t){let{activity:n,name:r,allow:o,reason:a,component:s}=t;const d=`${r} ${o?"allowed":"denied"} '${n}' for '${s}'${a?":":""}`,c=i.hasOwnProperty(d);if(c&&clearTimeout(i[d]),i[d]=setTimeout((()=>delete i[d]),1e3),!c){const t=[d];a&&t.push(a),(o?e.logInfo:e.logWarn).apply(e,t)}}return[function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const o=n(e),a=o.findIndex((e=>{let[t]=e;return i<t})),s=[i,t,r];return o.splice(a<0?o.length:a,0,s),()=>{const e=o.indexOf(s);e>=0&&o.splice(e,1)}},(e,t)=>{let i,a;for(const[s,d,c]of n(e)){if(i!==s&&a)break;i=s;const n=r(e,d,c,t);if(n){if(!n.allow)return o(n),!1;a=n}}return a&&o(a),!0}]}(),In="accessDevice",Cn="syncUser",xn="enrichUfpd",Sn="enrichEids",Tn="fetchBids",An="transmitEids",kn="transmitUfpd",_n="transmitPreciseGeo",En="transmitTid";function On(e){var t=e;return{callBids:()=>{},setBidderCode:e=>{t=e},getBidderCode:()=>t}}function Rn(e){let{src:t="client",bidder:n="",bidId:r,transactionId:i,adUnitId:o,auctionId:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s=t,d=e||0;Object.assign(this,{bidderCode:n,width:0,height:0,statusMessage:(()=>{switch(d){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}})(),adId:oe(),requestId:r,transactionId:i,adUnitId:o,auctionId:a,mediaType:"banner",source:s}),this.getStatusCode=()=>d,this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}function Un(e,t){return new Rn(e,t)}const Bn="outstream",jn="instream",Dn=tn("sync",((e,t,n,r,i)=>n&&(i||r!==Bn)?P.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):(he('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):!(r===Bn&&!i&&!(e.renderer||t&&t.renderer||n.renderer))),"checkVideoBidSetup"),Pn="performanceMetrics",$n=window.performance&&window.performance.now?()=>window.performance.now():()=>Date.now(),zn=new WeakMap;function Nn(){let{now:e=$n,mkNode:t=Fn,mkTimer:n=Mn,mkRenamer:r=e=>e,nodes:i=zn}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return()=>function o(a){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>({forEach(t){t(e)}});s=r(s);const d=e=>a.dfWalk({visit(t,n){const r=n.timestamps;if(r.hasOwnProperty(e))return r[e]}});function c(e,t){const n=s(e);a.dfWalk({follow:(e,t)=>t.propagate&&(!e||!e.stopPropagation),visit(e,r){n.forEach((n=>{null==e?r.metrics[n]=t:(r.groups.hasOwnProperty(n)||(r.groups[n]=[]),r.groups[n].push(t))}))}})}function l(t){return n(e,(e=>c(t,e)))}function u(){let e={};return a.dfWalk({visit(t,n){e=Object.assign({},!t||t.includeGroups?n.groups:null,n.metrics,e)}}),e}const p={startTiming:l,measureTime:(e,t)=>l(e).stopAfter(t)(),measureHookTime:(e,t,n)=>{const r=l(e);return n((e=>{const t=r.stopBefore(e);return t.bail=e.bail&&r.stopBefore(e.bail),t.stopTiming=r,t.untimed=e,t})(t))},checkpoint:t=>{a.timestamps[t]=e()},timeSince:(t,n)=>{const r=d(t),i=null!=r?e()-r:null;return null!=n&&c(n,i),i},timeBetween:(e,t,n)=>{const r=d(e),i=d(t),o=null!=r&&null!=i?i-r:null;return null!=n&&c(n,o),o},setMetric:c,getMetrics:u,fork:function(){let{propagate:e=!0,stopPropagation:n=!1,includeGroups:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t([[a,{propagate:e,stopPropagation:n,includeGroups:r}]]),s)},join:function(e){let{propagate:t=!0,stopPropagation:n=!1,includeGroups:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i.get(e);null!=o&&o.addParent(a,{propagate:t,stopPropagation:n,includeGroups:r})},newMetrics:()=>o(a.newSibling(),s),renameWith:e=>o(a,e),toJSON:()=>u()};return i.set(p,a),p}(t([]))}function qn(e,t,n){return function(){t&&t();try{return e.apply(this,arguments)}finally{n&&n()}}}function Mn(e,t){const n=e();let r=!1;function i(){r||(t(e()-n),r=!0)}return i.stopBefore=e=>qn(e,i),i.stopAfter=e=>qn(e,null,i),i}function Fn(e){return{metrics:{},timestamps:{},groups:{},addParent(t,n){e.push([t,n])},newSibling:()=>Fn(e.slice()),dfWalk(){let t,{visit:n,follow:r=()=>!0,visited:i=new Set,inEdge:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.has(this)){if(i.add(this),t=n(o,this),null!=t)return t;for(const[a,s]of e)if(r(o,s)&&(t=a.dfWalk({visit:n,follow:r,visited:i,inEdge:s}),null!=t))return t}}}}const Ln=(()=>{const e=()=>{},t=()=>({}),n={forEach:e},r=()=>null;r.stopBefore=e=>e,r.stopAfter=e=>e;const i=Object.defineProperties({dfWalk:e,newSibling:()=>i,addParent:e},Object.fromEntries(["metrics","timestamps","groups"].map((e=>[e,{get:t}]))));return Nn({now:()=>0,mkNode:()=>i,mkRenamer:()=>()=>n,mkTimer:()=>r,nodes:{get:e,set:e}})()})();let Wn=!0;function Vn(e){return Wn&&e||Ln}P.getConfig(Pn,(e=>{Wn=!!e[Pn]}));const Gn=(()=>{const e=Nn();return()=>Wn?e():Ln})();function Hn(e,t){return function(n,r){return function(i){for(var o=arguments.length,a=new Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];const d=this;return Vn(t.apply(d,a)).measureHookTime(e+n,i,(e=>r.call(d,e,...a)))}}}const Jn=Hn("requestBids.",(e=>e.metrics)),Kn=Hn("addBidResponse.",((e,t)=>t.metrics)),Xn=bn((e=>Xr.resolveAlias(e))),Yn=["cpm","ttl","creativeId","netRevenue","currency"],Qn=["auctionId","transactionId"];function Zn(e){const t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){const n=er(e);Xr.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((t=>{let r,i,o=t;_e(t)&&(o=t.code,r=t.gvlid,i=t.skipPbsAliasing),Xr.aliasRegistry[o]=e.code,n(Object.assign({},e,{code:o,gvlid:r,skipPbsAliasing:i}))}))}function er(e){return Object.assign(new On(e.code),{getSpec:()=>Object.freeze(Object.assign({},e)),registerSyncs:t,callBids:(n,r,i,o,a,d)=>{if(!Array.isArray(n.bids))return;const c=(e=>{if(wn(En,Xn(Xt,e)))return{bidRequest:e=>e,bidderRequest:e=>e};function t(e,t,n){return Qn.includes(t)?null:Reflect.get(e,t,n)}function n(e,t){const n=new Proxy(e,t);return Object.entries(e).filter((e=>{let[t,n]=e;return"function"==typeof n})).forEach((t=>{let[r,i]=t;return n[r]=i.bind(e)})),n}const r=ft((e=>n(e,{get:t})),(e=>e.bidId));return{bidRequest:r,bidderRequest:e=>n(e,{get:(n,i,o)=>"bids"===i?e.bids.map(r):t(n,i,o)})}})(n.bidderCode),l={};const u=[];function p(){i(),P.runWithBidder(e.code,(()=>{Rt(v.BIDDER_DONE,n),t(u,n.gdprConsent,n.uspConsent,n.gppConsent)}))}const g=ar(n).measureTime("validate",(()=>n.bids.filter((t=>{return n=c.bidRequest(t),!!e.isBidRequestValid(n)||(fe(`Invalid bid sent to bidder ${e.code}: ${JSON.stringify(n)}`),!1);var n}))));if(0===g.length)return void p();const m={};g.forEach((e=>{m[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),rr(e,g.map(c.bidRequest),c.bidderRequest(n),o,d,{onRequest:e=>Rt(v.BEFORE_BIDDER_HTTP,n,e),onResponse:t=>{a(e.code),u.push(t)},onPaapi:e=>{const t=m[e.bidId];t?or(t,e.config):fe("Received fledge auction configuration for an unknown bidId",e)},onError:(t,r)=>{r.timedOut||a(e.code),Xr.callBidderError(e.code,r,n),Rt(v.BIDDER_ERROR,{error:r,bidderRequest:n}),he(`Server call for ${e.code} failed: ${t} ${r.status}. Continuing without bids.`)},onBid:t=>{const n=m[t.requestId];if(n){if(t.adapterCode=n.bidder,((e,t)=>{let n=Jt.get(t,"allowAlternateBidderCodes")||!1,r=Jt.get(t,"allowedAlternateBidderCodes");return!!(e&&t&&t!==e&&(r=Ae(r)?r.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(Fe):r,!n||Ae(r)&&"*"!==r[0]&&!r.includes(e)))})(t.bidderCode,n.bidder))return fe(`${t.bidderCode} is not a registered partner or known bidder of ${n.bidder}, hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.`),void r.reject(n.adUnitCode,t,"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes");t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[n.bidder]);const e=Object.assign(Un(1,n),t,at(n,Qn));!function(e,t){const n=Vn(t.metrics);n.checkpoint("addBidResponse"),l[e]=!0,n.measureTime("addBidResponse.validate",(()=>function(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function r(e){return`Invalid bid from ${t.bidderCode}. Ignoring bid: ${e}`}return e?t?(()=>{let e=Object.keys(t);return Yn.every((n=>s(e,n)&&!s([void 0,null],t[n])))})()?"native"!==t.mediaType||function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.getAdUnit(e);if(!n)return!1;let r=n.nativeOrtbRequest;return((e,t)=>{if(!b(e,"link.url"))return he("native response doesn't have 'link' property. Ortb response: ",e),!1;let n=t.assets.filter((e=>1===e.required)).map((e=>e.id)),r=e.assets.map((e=>e.id));const i=n.every((e=>s(r,e)));return i||he(`didn't receive a bid with all required assets. Required ids: ${n}, but received ids in response: ${r}`),i})(e.native?.ortb||lo(e.native,r),r)}(t,{index:n})?"video"!==t.mediaType||function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=b(t.getMediaTypes(e),"video"),r=n&&b(n,"context"),i=n&&b(n,"useCacheKey"),o=t.getAdUnit(e);return Dn(e,o,n,r,i)}(t,{index:n})?!("banner"===t.mediaType&&!function(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;const r=n.getBidRequest(t),i=n.getMediaTypes(t),o=de(r&&r.sizes||i&&i.banner&&i.banner.sizes);if(1===o.length){const[e,n]=o[0].split("x");return t.width=parseInt(e,10),t.height=parseInt(n,10),!0}return!1}(e,t,{index:n})&&(he(r("Banner bids require a width and height")),1)):(he(r("Video bid does not have required vastUrl or renderer property")),!1):(he(r("Native bid missing some required properties.")),!1):(he(r(`Bidder ${t.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`)),!1):(fe(`Some adapter tried to add an undefined bid for ${e}.`),!1):(fe("No adUnitCode was supplied to addBidResponse."),!1)}(e,t)))?r(e,t):r.reject(e,t,"Bid has missing or invalid properties")}(n.adUnitCode,e)}else fe(`Bidder ${e.code} made bid for unknown request ID: ${t.requestId}. Ignoring.`),r.reject(null,t,"Invalid request ID")},onCompletion:p})}});function t(t,n,r,i){ir(e,t,n,r,i)}}const tr=["paapiAuctionConfigs","fledgeAuctionConfigs"],nr=["bids"].concat(tr),rr=tn("sync",((e,t,n,r,i,o)=>{let{onRequest:a,onResponse:s,onPaapi:d,onError:c,onBid:l,onCompletion:u}=o;const p=ar(n);u=p.startTiming("total").stopBefore(u);let g=p.measureTime("buildRequests",(()=>e.buildRequests(t,n)));if(!g||0===g.length)return void u();Array.isArray(g)||(g=[g]);const m=et(u,g.length);g.forEach((t=>{const n=p.fork();function o(e){null!=e&&(e.metrics=n.fork().renameWith()),l(e)}const u=i(((r,i)=>{f();try{r=JSON.parse(r)}catch(e){}r={body:r,headers:{get:i.getResponseHeader.bind(i)}},s(r);try{r=n.measureTime("interpretResponse",(()=>e.interpretResponse(r,t)))}catch(t){return he(`Bidder ${e.code} failed to interpret the server's response. Continuing without bids`,null,t),void m()}let a,c;r&&!Object.keys(r).some((e=>!nr.includes(e)))?(a=r.bids,c=(e=>{const[t,n]=tr.map((t=>e[t]));if(null!=t&&null!=n)throw new Error(`Adapter response should use ${tr[0]} over ${tr[1]}, not both`);return t??n})(r)):a=r,Ae(c)&&c.forEach(d),a&&(Ae(a)?a.forEach(o):o(a)),m()})),g=i(((e,t)=>{f(),c(e,t),m()}));a(t);const f=n.startTiming("net");function h(n){const r=t.options;return Object.assign(n,r,{browsingTopics:!(r?.hasOwnProperty("browsingTopics")&&!r.browsingTopics)&&(Jt.get(e.code,"topicsHeader")??!0)&&wn(kn,Xn(Xt,e.code))})}switch(t.method){case"GET":r(`${t.url}${b=t.data,b?`?${"object"==typeof b?(e=>{let t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t=t.replace(/&$/,""),t})(b):b}`:""}`,{success:u,error:g},void 0,h({method:"GET",withCredentials:!0}));break;case"POST":r(t.url,{success:u,error:g},"string"==typeof t.data?t.data:JSON.stringify(t.data),h({method:"POST",contentType:"text/plain",withCredentials:!0}));break;default:fe(`Skipping invalid request from ${e.code}. Request type ${t.type} must be GET or POST`),m()}var b}))}),"processBidderRequests"),ir=tn("async",((e,t,n,r,i)=>{const o=P.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!Xr.aliasRegistry[e.code])){let o=P.getConfig("userSync.filterSettings"),a=e.getUserSyncs({iframeEnabled:!(!o||!o.iframe&&!o.all),pixelEnabled:!(!o||!o.image&&!o.all)},t,n,r,i);a&&(Array.isArray(a)||(a=[a]),a.forEach((t=>{ii.registerSync(t.type,e.code,t.url)})),ii.bidderDone(e.code))}}),"registerSyncs"),or=tn("sync",((e,t)=>{}),"addComponentAuction");function ar(e){return Vn(e.metrics).renameWith((t=>[`adapter.client.${t}`,`adapters.client.${e.bidderCode}.${t}`]))}let sr={};function dr(e,t,n){let r=((e,t)=>{let n=sr[e]=sr[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n})(e,n);return r[t]=(r[t]||0)+1,r[t]}function cr(e){return b(sr,`${e}.requestsCounter`)||0}function lr(e,t){return b(sr,`${e}.bidders.${t}.requestsCounter`)||0}function ur(e,t){return b(sr,`${e}.bidders.${t}.winsCounter`)||0}function pr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e)return e;if(/\w+:\/\//.exec(e))return e;let n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:`${n}//${e}`}function gr(e){let{noLeadingWww:t=!1,noPort:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{e=new URL(pr(e))}catch(e){return}return e=n?e.hostname:e.host,t&&e.startsWith("www.")&&(e=e.substring(4)),e}function mr(e){try{const t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}const fr=function(e){let t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:()=>{const o=mr(i.document),a=i.location.href;return t===o&&a===n||(t=o,n=a,r=e()),r}}((hr=window,()=>{const e=[],t=(e=>{try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}})(hr),n=P.getConfig("maxNestedIframes");let r,i,o,a,s=!1,d=0,c=!1,l=!1,u=!1;do{const n=r,a=l;let p,g=!1,m=null;l=!1,r=r?r.parent:hr;try{p=r.location.href||null}catch(e){g=!0}if(g)if(a){const e=n.context;try{m=e.sourceUrl,i=m,u=!0,c=!0,r===hr.top&&(s=!0),e.canonicalUrl&&(o=e.canonicalUrl)}catch(e){}}else{fe("Trying to access cross domain iframe. Continuing without referrer and location");try{const e=n.document.referrer;e&&(m=e,r===hr.top&&(s=!0))}catch(e){}!m&&t&&t[d-1]&&(m=t[d-1],r===hr.top&&(u=!0)),m&&!c&&(i=m)}else{if(p&&(m=p,i=m,c=!1,r===hr.top)){s=!0;const e=mr(r.document);e&&(o=e)}r.context&&r.context.sourceUrl&&(l=!0)}e.push(m),d++}while(r!==hr.top&&d<n);e.reverse();try{a=hr.top.document.referrer}catch(e){}const p=s||u?i:null,g=P.getConfig("pageUrl")||o||null;let m=P.getConfig("pageUrl")||p||pr(g,hr);return p&&p.indexOf("?")>-1&&-1===m.indexOf("?")&&(m=`${m}${p.substring(p.indexOf("?"))}`),{reachedTop:s,isAmp:c,numIframes:d-1,stack:e,topmostLocation:i||null,location:p,canonicalUrl:g,page:m,domain:gr(m)||null,ref:a||null,legacy:{reachedTop:s,isAmp:c,numIframes:d-1,stack:e,referer:i||null,canonicalUrl:g}}}));var hr;const br=Object.freeze({});Object.freeze({});class yr{#i;#o;#a;#s;#d=!0;#c;generatedTime;hashFields;constructor(){this.reset()}#l(e){this.#s=!0,this.#o=e,this.#a.resolve(e)}reset(){this.#a=F(),this.#i=!1,this.#o=null,this.#s=!1,this.generatedTime=null}enable(){this.#i=!0}get enabled(){return this.#i}get ready(){return this.#s}get promise(){return this.#s?M.resolve(this.#o):(this.#i||this.#l(null),this.#a.promise)}setConsentData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye();this.generatedTime=t,this.#d=!0,this.#l(e)}getConsentData(){return this.#o}get hash(){return this.#d&&(this.#c=mt(JSON.stringify(this.#o&&this.hashFields?this.hashFields.map((e=>this.#o[e])):this.#o)),this.#d=!1),this.#c}}const vr=new class extends yr{hashFields=["gdprApplies","consentString"];getConsentMeta(){const e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:Te(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}},wr=new class extends yr{getConsentMeta(){const e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}},Ir=new class extends yr{hashFields=["applicableSections","gppString"];getConsentMeta(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}},Cr=(()=>{function e(){return!!P.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset(){},get promise(){return M.resolve(e())},get hash(){return e()?"1":"0"}}})(),xr=(()=>{const e={},t={},n={};return{register(r,i,o){o&&((e[i]=e[i]||{})[r]=o,t.hasOwnProperty(i)?t[i]!==o&&(t[i]=n):t[i]=o)},get(r){const i={modules:e[r]||{}};return t.hasOwnProperty(r)&&t[r]!==n&&(i.gvlid=t[r]),i}}})(),Sr={gdpr:vr,usp:wr,gpp:Ir,coppa:Cr},Tr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr;return e=Object.entries(e),Object.assign({get promise(){return M.all(e.map((e=>{let[t,n]=e;return n.promise.then((e=>[t,e]))}))).then((e=>Object.fromEntries(e)))},get hash(){return mt(e.map((e=>{let[t,n]=e;return n.hash})).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map((t=>{return[t,(n=t,()=>Object.fromEntries(e.map((e=>{let[t,r]=e;return[t,r[n]()]}))))];var n}))))}(),Ar=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map((e=>`user.${e}`)).concat("device.ext.cdep"),kr=["user.eids","user.ext.eids"],_r=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"];function Er(e){return Object.assign({get(){},run(e,t,n,r,i){const o=n&&n[r];if((e=>null!=e&&("object"!=typeof e||Object.keys(e).length>0))(o)&&i()){const e=this.get(o);void 0===e?delete n[r]:n[r]=e}}},e)}function Or(e){return e.forEach((e=>{e.paths=e.paths.map((e=>{const t=e.split("."),n=t.pop();return[t.length>0?t.join("."):null,n]}))})),function(t,n){const r=[];for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];const s=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return t=>(e.hasOwnProperty(t.name)||(e[t.name]=!!t.applies(...n)),e[t.name])}(t,...o);return e.forEach((e=>{if(!1!==t[e.name])for(const[i,o]of e.paths){const a=null==i?n:b(n,i);if(r.push(e.run(n,i,a,o,s.bind(null,e))),!1===t[e.name])return}})),r.filter((e=>null!=e))}}function Rr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wn;return n=>!t(e,n)}const Ur=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn;const t=Or(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn;return[{name:kn,paths:Ar,applies:Rr(kn,e)},{name:An,paths:kr,applies:Rr(An,e)},{name:_n,paths:_r,applies:Rr(_n,e),get:e=>Math.round(100*(e+Number.EPSILON))/100},{name:En,paths:["source.tid"],applies:Rr(En,e)}].map(Er)}(e)),n=Or(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wn;return[{name:An,paths:["userId","userIdAsEids"],applies:Rr(An,e)},{name:En,paths:["ortb2Imp.ext.tid"],applies:Rr(En,e)}].map(Er)}(e));return e=>{const r={};return{ortb2:n=>(t(r,n,e),n),bidRequest:t=>(n(r,t,e),t)}}}();vn(En,"enableTIDs config",(()=>{if(!P.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}}));const Br="pbsBidAdapter",jr={CLIENT:"client",SERVER:"server"},Dr={isAllowed:wn,redact:Ur};let Pr={},$r=Pr.bidderRegistry={},zr=Pr.aliasRegistry={},Nr=[];P.getConfig("s2sConfig",(e=>{e&&e.s2sConfig&&(Nr=Ae(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var qr={};const Mr=bn((e=>Pr.resolveAlias(e))),Fr=tn("sync",(e=>{let{bidderCode:t,auctionId:n,bidderRequestId:r,adUnits:i,src:o,metrics:a}=e;return i.reduce(((e,i)=>{const d=i.bids.filter((e=>e.bidder===t));return null==t&&0===d.length&&null!=i.s2sBid&&d.push({bidder:null}),e.push(d.reduce(((e,d)=>{const c=null==(d=Object.assign({},d,{ortb2Imp:gt({},i.ortb2Imp,d.ortb2Imp)},nt(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:d.mediaTypes;return(e=>{const t=["banner","native","video"];return!!Object.keys(e).every((e=>s(t,e)))&&(!e.video||!e.video.context||s(["instream","outstream","adpod"],e.video.context))})(c)?d=Object.assign({},d,{mediaTypes:c}):he(`mediaTypes is not correctly configured for adunit ${i.code}`),"client"===o&&((e,t)=>{dr(e,"requestsCounter",t)})(i.code,t),e.push(Object.assign({},d,{adUnitCode:i.code,transactionId:i.transactionId,adUnitId:i.adUnitId,sizes:b(c,"banner.sizes")||b(c,"video.playerSize")||[],bidId:d.bid_id||oe(),bidderRequestId:r,auctionId:n,src:o,metrics:a,bidRequestsCount:cr(i.code),bidderRequestsCount:lr(i.code,d.bidder),bidderWinsCount:ur(i.code,d.bidder)})),e}),[])),e}),[]).reduce(Le,[]).filter((e=>""!==e))}),"getBids"),Lr=tn("sync",(function(e,t){let{getS2SBidders:n=Vr}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null==t)return e;{const r=n(t);return e.filter((e=>r.has(e.bidder)))}}),"filterBidsForAdUnit"),Wr=tn("sync",((e,t)=>e),"setupAdUnitMediaTypes");function Vr(e){Ae(e)||(e=[e]);const t=new Set([null]);return e.filter((e=>e&&e.enabled)).flatMap((e=>e.bidders)).forEach((e=>t.add(e))),t}const Gr=tn("sync",(function(e,t){let{getS2SBidders:n=Vr}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n(t);return Ve(e).reduce(((e,t)=>(e[r.has(t)?jr.SERVER:jr.CLIENT].push(t),e)),{[jr.CLIENT]:[],[jr.SERVER]:[]})}),"partitionBidders");function Hr(e,t){const n=$r[e],r=n?.getSpec&&n.getSpec();if(r&&r[t]&&"function"==typeof r[t])return[r,r[t]]}function Jr(e,t,n,r){try{me(`Invoking ${e}.${t}`);for(var i=arguments.length,o=new Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];P.runWithBidder(e,r.bind(n,...o))}catch(n){fe(`Error calling ${t} of ${e}`)}}function Kr(e,t,n){if(n?.src!==S){const r=Hr(e,t);null!=r&&Jr(e,t,...r,n)}}Pr.makeBidRequests=tn("sync",(function(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6?arguments[6]:void 0;a=Vn(a),Rt(v.BEFORE_REQUEST_BIDS,e),(e=>{e.forEach((e=>{const t=e.nativeParams||b(e,"mediaTypes.native");t&&(e.nativeParams=Xi(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||io(e.nativeParams))}))})(e),e.forEach((e=>{_e(e.mediaTypes)||(e.mediaTypes={}),e.bids=e.bids.filter((e=>!e.bidder||Dr.isAllowed(Tn,Mr(Xt,e.bidder)))),dr(e.code,"requestsCounter")})),e=Wr(e,i);let{[jr.CLIENT]:s,[jr.SERVER]:c}=Gr(e,Nr);P.getConfig("bidderSequence")===U&&(s=He(s));const l=fr();let u=[];const p=o.global||{},g=o.bidder||{};function m(e,t){const r=Dr.redact(null!=t?t:Mr(Xt,e.bidderCode)),i=Object.freeze(r.ortb2(gt({source:{tid:n}},p,g[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map((e=>(e.ortb2=i,r.bidRequest(e)))),e}Nr.forEach((r=>{const i=(e=>Mr(Kt,Br,{[gn]:e.configName}))(r);if(r&&r.enabled&&Dr.isAllowed(Tn,i)){let{adUnits:o,hasModuleBids:s}=((e,t)=>{let n=Je(e),r=!1;return n.forEach((e=>{const n=e.bids.filter((e=>e.module===Br&&e.params?.configName===t.configName));1===n.length?(e.s2sBid=n[0],r=!0,e.ortb2Imp=gt({},e.s2sBid.ortb2Imp,e.ortb2Imp)):n.length>1&&fe('Multiple "module" bids for the same s2s configuration; all will be ignored',n),e.bids=Lr(e.bids,t).map((e=>(e.bid_id=oe(),e)))})),n=n.filter((e=>0!==e.bids.length||null!=e.s2sBid)),{adUnits:n,hasModuleBids:r}})(e,r),p=ae();(0===c.length&&s?[null]:c).forEach((e=>{const s=oe(),d=a.fork(),c=m({bidderCode:e,auctionId:n,bidderRequestId:s,uniquePbsTid:p,bids:Fr({bidderCode:e,auctionId:n,bidderRequestId:s,adUnits:Je(o),src:S,metrics:d}),auctionStart:t,timeout:r.timeout,src:S,refererInfo:l,metrics:d},i);0!==c.bids.length&&u.push(c)})),o.forEach((e=>{let t=e.bids.filter((e=>d(u,(t=>d(t.bids,(t=>t.bidId===e.bid_id))))));e.bids=t})),u.forEach((e=>{void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=o.filter((e=>e.bids.length>0||null!=e.s2sBid)))}))}}));let f=(e=>{let t=Je(e);return t.forEach((e=>{e.bids=Lr(e.bids,null)})),t=t.filter((e=>0!==e.bids.length)),t})(e);return s.forEach((e=>{const o=oe(),s=a.fork(),d=m({bidderCode:e,auctionId:n,bidderRequestId:o,bids:Fr({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:Je(f),labels:i,src:"client",metrics:s}),auctionStart:t,timeout:r,refererInfo:l,metrics:s}),c=$r[e];c||he(`Trying to make a request for bidder that does not exist: ${e}`),c&&d.bids&&0!==d.bids.length&&u.push(d)})),u.forEach((e=>{vr.getConsentData()&&(e.gdprConsent=vr.getConsentData()),wr.getConsentData()&&(e.uspConsent=wr.getConsentData()),Ir.getConsentData()&&(e.gppConsent=Ir.getConsentData())})),u}),"makeBidRequests"),Pr.callBids=function(e,t,n,r,i,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!t.length)return void fe("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");let[d,c]=t.reduce(((e,t)=>(e[Number(void 0!==t.src&&t.src===S)].push(t),e)),[[],[]]);var l=[];c.forEach((e=>{for(var t=-1,n=0;n<l.length;++n)if(e.uniquePbsTid===l[n].uniquePbsTid){t=n;break}t<=-1&&l.push(e)}));let u=0;Nr.forEach((e=>{if(e&&l[u]&&Vr(e).has(l[u].bidderCode)){const t=Nt(o,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0);let d=e.bidders;const p=$r[e.adapter];let g=l[u].uniquePbsTid,m=l[u].adUnitsS2SCopy,f=c.filter((e=>e.uniquePbsTid===g));if(p){let i={ad_units:m,s2sConfig:e,ortb2Fragments:s};if(i.ad_units.length){let e=f.map((e=>(e.start=Ye(),function(t){t||a(e.bidderRequestId),r.apply(e,arguments)})));const o=Ve(i.ad_units).filter((e=>d.includes(e)));ge(`CALLING S2S HEADER BIDDERS ==== ${o.length>0?o.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only'}`),f.forEach((e=>{Rt(v.BID_REQUESTED,{...e,tid:e.auctionId})})),p.callBids(i,c,n,(t=>e.forEach((e=>e(t)))),t)}}else he("missing "+e.adapter);u++}})),d.forEach((e=>{e.start=Ye();const t=$r[e.bidderCode];P.runWithBidder(e.bidderCode,(()=>{ge("CALLING BIDDER"),Rt(v.BID_REQUESTED,e)}));let s=Nt(o,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0);const d=r.bind(e);try{P.runWithBidder(e.bidderCode,t.callBids.bind(t,e,n,d,s,(()=>a(e.bidderRequestId)),P.callbackWithBidder(e.bidderCode)))}catch(t){he(`${e.bidderCode} Bid Adapter emitted an uncaught error when parsing their bidRequest`,{e:t,bidRequest:e}),d()}}))},Pr.videoAdapters=[],Pr.registerBidAdapter=function(e,t){let{supportedMediaTypes:n=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&t?"function"==typeof e.callBids?($r[t]=e,xr.register(Xt,t,e.getSpec?.().gvlid),s(n,"video")&&Pr.videoAdapters.push(t),s(n,"native")&&Li.push(t)):he("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):he("bidAdapter or bidderCode not specified")},Pr.aliasBidAdapter=(e,t,n)=>{if(void 0===$r[t]){let r=$r[e];if(void 0===r){const n=[];Nr.forEach((r=>{if(r.bidders&&r.bidders.length){const i=r&&r.bidders;r&&s(i,t)?zr[t]=e:n.push(e)}})),n.forEach((e=>{he('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{let i,o=(e=>{let t=[];return s(Pr.videoAdapters,e)&&t.push("video"),s(Li,e)&&t.push("native"),t})(e);if(r.constructor.prototype!=Object.prototype)i=new r.constructor,i.setBidderCode(t);else{let o=r.getSpec(),a=n&&n.gvlid;null!=o.gvlid&&null==a&&fe(`Alias '${t}' will NOT re-use the GVL ID of the original adapter ('${o.code}', gvlid: ${o.gvlid}). Functionality that requires TCF consent may not work as expected.`);let s=n&&n.skipPbsAliasing;i=er(Object.assign({},o,{code:t,gvlid:a,skipPbsAliasing:s})),zr[t]=e}Pr.registerBidAdapter(i,t,{supportedMediaTypes:o})}catch(t){he(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else ge('alias name "'+t+'" has been already specified.')},Pr.resolveAlias=e=>{let t,n=e;for(;zr[n]&&(!t||!t.has(n));)n=zr[n],(t=t||new Set).add(n);return n},Pr.registerAnalyticsAdapter=e=>{let{adapter:t,code:n,gvlid:r}=e;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,qr[n]={adapter:t,gvlid:r},xr.register(Qt,n,r)):he(`Prebid Error: Analytics adaptor error for analytics "${n}"\n        analytics adapter must implement an enableAnalytics() function`):he("Prebid Error: analyticsAdapter or analyticsCode not specified")},Pr.enableAnalytics=e=>{Ae(e)||(e=[e]),e.forEach((e=>{const t=qr[e.provider];t&&t.adapter?Dr.isAllowed("reportAnalytics",Mr(Qt,e.provider,{[hn]:e}))&&t.adapter.enableAnalytics(e):he(`Prebid Error: no analytics adapter found in registry for '${e.provider}'.`)}))},Pr.getBidAdapter=e=>$r[e],Pr.getAnalyticsAdapter=e=>qr[e],Pr.callTimedOutBidders=(e,t,n)=>{t=tt(t=t.map((t=>(t.params=rt(e,t.adUnitCode,t.bidder),t.timeout=n,t))),"bidder"),Object.keys(t).forEach((e=>{Kr(e,"onTimeout",t[e])}))},Pr.callBidWonBidder=(e,t,n)=>{t.params=rt(n,t.adUnitCode,t.bidder),((e,t)=>{dr(e,"winsCounter",t)})(t.adUnitCode,t.bidder),Kr(e,"onBidWon",t)},Pr.callBidBillableBidder=e=>{Kr(e.bidder,"onBidBillable",e)},Pr.callSetTargetingBidder=(e,t)=>{Kr(e,"onSetTargeting",t)},Pr.callBidViewableBidder=(e,t)=>{Kr(e,"onBidViewable",t)},Pr.callBidderError=(e,t,n)=>{Kr(e,"onBidderError",{error:t,bidderRequest:n})},Pr.callDataDeletionRequest=tn("sync",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r="onDataDeletionRequest";Object.keys($r).filter((e=>!zr.hasOwnProperty(e))).forEach((e=>{const n=Hr(e,r);if(null!=n){const i=Fi.getBidsRequested().filter((t=>(e=>{const t=new Set;for(;zr.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=zr[e];return e})(t.bidderCode)===e));Jr(e,r,...n,i,...t)}})),Object.entries(qr).forEach((e=>{let[n,i]=e;const o=i?.adapter?.[r];if("function"==typeof o)try{o.apply(i.adapter,t)}catch(e){he(`error calling ${r} of ${n}`,e)}}))}));const Xr=Pr,Yr="html5",Qr="cookie";let Zr=[];function ei(){let{moduleName:e,moduleType:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{isAllowed:n=wn}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};function r(r,i){let o=e;const a=P.getCurrentBidder();return a&&t===Xt&&Xr.aliasRegistry[a]===e&&(o=a),r({valid:n(In,Xn(t,o,{[pn]:i}))})}function i(e,t,n){if(!n||"function"!=typeof n)return r(e,t);Zr.push((()=>{let i=r(e,t);n(i)}))}const o=e=>i((e=>{if(e&&e.valid)try{return!!window.localStorage}catch(e){he("Local storage api disabled")}return!1}),Yr,e);return{setCookie:(e,t,n,r,o,a)=>i((i=>{if(i&&i.valid){const i=o&&""!==o?` ;domain=${encodeURIComponent(o)}`:"",a=n&&""!==n?` ;expires=${n}`:"",s=null!=r&&"none"==r.toLowerCase()?"; Secure":"";document.cookie=`${e}=${encodeURIComponent(t)}${a}; path=/${i}${r?`; SameSite=${r}`:""}${s}`}}),Qr,a),getCookie:(e,t)=>i((t=>{if(t&&t.valid){let t=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return t?decodeURIComponent(t[2]):null}return null}),Qr,t),localStorageIsEnabled:e=>i((e=>{if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1}),Yr,e),cookiesAreEnabled:e=>i((e=>!(!e||!e.valid)&&Ze()),Qr,e),setDataInLocalStorage:(e,t,n)=>i((n=>{n&&n.valid&&o()&&window.localStorage.setItem(e,t)}),Yr,n),getDataFromLocalStorage:(e,t)=>i((t=>t&&t.valid&&o()?window.localStorage.getItem(e):null),Yr,t),removeDataFromLocalStorage:(e,t)=>i((t=>{t&&t.valid&&o()&&window.localStorage.removeItem(e)}),Yr,t),hasLocalStorage:o,findSimilarCookies:(e,t)=>i((t=>{if(t&&t.valid){const t=[];if(Qe()){const n=document.cookie.split(";");for(;n.length;){const r=n.pop();let i=r.indexOf("=");i=i<0?r.length:i,decodeURIComponent(r.slice(0,i).replace(/^\s+/,"")).indexOf(e)>=0&&t.push(decodeURIComponent(r.slice(i+1)))}}return t}}),Qr,t)}}function ti(){let{moduleType:e,moduleName:t,bidderCode:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};function r(){throw new Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return n?((e&&e!==Xt||t)&&r(),e=Xt,t=n):t&&e||r(),ei({moduleType:e,moduleName:t})}function ni(e){return ei({moduleName:e,moduleType:Kt})}vn(In,"deviceAccess config",(()=>{if(!Qe())return{allow:!1}})),vn(In,"bidderSettings.*.storageAllowed",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Jt;if(e[cn]!==Xt)return;let n=t.get(e[un],"storageAllowed");if(n&&!0!==n){const t=e[pn];n=Array.isArray(n)?n.some((e=>e===t)):n===t}else n=!!n;return n?void 0:{allow:n}})),P.setDefaults({userSync:Je({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});const ri=ni("usersync"),ii=(e=>{let t={},n={image:[],iframe:[]},r=new Set,i={},o={image:!0,iframe:!1},a=e.config;function d(){if(a.syncEnabled&&e.browserSupportsCookies){try{o.iframe&&c(n.iframe,(e=>{let[t,r]=e;ge(`Invoking iframe user sync for bidder: ${t}`),Ne(r),((e,t)=>{e.image=e.image.filter((e=>e[0]!==t))})(n,t)})),o.image&&c(n.image,(e=>{let[t,n]=e;ge(`Invoking image pixel user sync for bidder: ${t}`),$e(n)}))}catch(e){return he("Error firing user syncs",e)}n={image:[],iframe:[]}}}function c(e,t){He(e).forEach(t)}return P.getConfig("userSync",(e=>{if(e.userSync){let t=e.userSync.filterSettings;_e(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}a=Object.assign(a,e.userSync)})),e.regRule(Cn,"userSync config",(e=>{if(!a.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[cn]===Xt){const n=e[mn],r=e[ln];if(!t.canBidderRegisterSync(n,r))return{allow:!1,reason:`${n} syncs are not enabled for ${r}`}}})),t.registerSync=(t,o,s)=>r.has(o)?ge(`already fired syncs for "${o}", ignoring registerSync call`):a.syncEnabled&&Ae(n[t])?o?0!==a.syncsPerBidder&&Number(i[o])>=a.syncsPerBidder?fe(`Number of user syncs exceeded for "${o}"`):void(e.isAllowed(Cn,Xn(Xt,o,{[mn]:t,[fn]:s}))&&(n[t].push([o,s]),i=((e,t)=>(e[t]?e[t]+=1:e[t]=1,e))(i,o))):fe("Bidder is required for registering sync"):fe(`User sync type "${t}" not supported`),t.bidderDone=r.add.bind(r),t.syncUsers=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(d,Number(e));d()},t.triggerUserSyncs=()=>{a.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=(e,t)=>!a.filterSettings||!function(e,t){let n=a.filterSettings;if(((e,t)=>{if(e.all&&e[t])return fe(`Detected presence of the "filterSettings.all" and "filterSettings.${t}" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.`),!1;let n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;let i=n.filter,o=n.bidders;return i&&"include"!==i&&"exclude"!==i?(fe(`UserSync "filterSettings.${r}.filter" setting '${i}' is not a valid option; use either 'include' or 'exclude'.`),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every((e=>Te(e)&&"*"!==e)))||(fe(`Detected an invalid setup in userSync "filterSettings.${r}.bidders"; use either '*' (to represent all bidders) or an array of bidders.`),!1)})(n,e)){o[e]=!0;let r=n.all?n.all:n[e],i="*"===r.bidders?[t]:r.bidders;const a={include:(e,t)=>!s(e,t),exclude:(e,t)=>s(e,t)};return a[r.filter||"include"](i,t)}return!o[e]}(e,t),t})(Object.defineProperties({config:P.getConfig("userSync"),isAllowed:wn,regRule:vn},{browserSupportsCookies:{get:()=>!/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)&&ri.cookiesAreEnabled()}})),oi="native",ai="video",si="banner",di="adpod";function ci(e,t,n){let{index:r=Fi.index,bs:i=Jt}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n=n||r.getBidRequest(t);const o=t?.adapterCode,a=t?.bidderCode||n?.bidder,s=i.get(t?.adapterCode,"adjustAlternateBids"),d=i.getOwn(a,"bidCpmAdjustment")||i.get(s?o:a,"bidCpmAdjustment");if(d&&"function"==typeof d)try{return d(e,Object.assign({},t),n)}catch(e){he("Error during bid adjustment",e)}return e}const{syncUsers:li}=ii,ui="completed";kt(v.BID_ADJUSTMENT,(e=>{(e=>{let t=ci(e.cpm,e);t>=0&&(e.cpm=t)})(e)}));const pi={},gi={},mi=[],fi=o();function hi(e){let{adUnits:t,adUnitCodes:n,callback:r,cbTimeout:i,labels:o,auctionId:a,ortb2Fragments:d,metrics:f}=e;f=Vn(f);const h=t,y=o,w=n,I=a||ae(),C=i,x=new Set,T=F();let A,k,_,E,O=[],R=r,U=[],B=[],j=[],D=[],$=[];function z(){return{auctionId:I,timestamp:A,auctionEnd:k,auctionStatus:E,adUnits:h,adUnitCodes:w,labels:y,bidderRequests:U,noBids:j,bidsReceived:B,bidsRejected:O,winningBids:D,timeout:C,metrics:f,seatNonBids:$}}function N(e){if(e?Rt(v.AUCTION_TIMEOUT,z()):clearTimeout(_),void 0===k){let n=[];e&&(ge(`Auction ${I} timedOut`),n=U.filter((e=>!x.has(e.bidderRequestId))).flatMap((e=>e.bids)),n.length&&Rt(v.BID_TIMEOUT,n)),E=ui,k=Date.now(),f.checkpoint("auctionEnd"),f.timeBetween("requestBids","auctionEnd","requestBids.total"),f.timeBetween("callBids","auctionEnd","requestBids.callBids"),T.resolve(),Rt(v.AUCTION_END,z()),wi(h,(()=>{try{if(null!=R){const t=B.filter((e=>w.includes(e.adUnitCode))).reduce(Pi,{});R.apply(fi,[t,e,I]),R=null}}catch(e){he("Error executing bidsBackHandler",null,e)}finally{n.length&&Xr.callTimedOutBidders(t,n,C);let e=P.getConfig("userSync")||{};e.enableOverride||li(e.syncDelay)}}))}}function q(){P.resetBidder(),me(`Bids Received for Auction with id: ${I}`,B),E=ui,N(!1)}function L(e){x.add(e)}function W(e){e.forEach((e=>{var t;t=e,U=U.concat(t)}));let t={},n={bidRequests:e,run:()=>{_=setTimeout((()=>N(!0)),C),E="inProgress",Rt(v.AUCTION_INIT,z());let n=function(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0,i=!1,o=new Set,a={};function d(){r--,i&&0===r&&e()}function f(e,t,n){return a[t.requestId]=!0,function(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n.getBidderRequest(e),i=n.getAdUnit(e),o=r&&r.start||e.requestTimestamp;Object.assign(e,{responseTimestamp:e.responseTimestamp||Ye(),requestTimestamp:e.requestTimestamp||o,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t}),null!=i?.ttlBuffer&&(e.ttlBuffer=i.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),r++,n(d)}function h(e,r){f(e,r,(e=>{let i=function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rt(v.BID_ADJUSTMENT,e);const n=t.getBidRequest(e)?.renderer||t.getAdUnit(e).renderer,r=e.mediaType,i=t.getMediaTypes(e),o=i&&i[r];var a=o&&o.renderer,s=null;a&&a.url&&a.render&&(!0!==a.backupOnly||!e.renderer)?s=a:n&&n.url&&n.render&&(!0!==n.backupOnly||!e.renderer)&&(s=n),s&&(e.renderer=Ht.install({url:s.url,config:s.options}),e.renderer.setRender(s.render));const d=ki(e.mediaType,i,P.getConfig("mediaTypePriceGranularity")),f=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=parseFloat(e);return isNaN(r)&&(r=""),{low:""===r?"":m(e,c,n),med:""===r?"":m(e,l,n),high:""===r?"":m(e,u,n),auto:""===r?"":m(e,g,n),dense:""===r?"":m(e,p,n),custom:""===r?"":m(e,t,n)}}(e.cpm,"object"==typeof d?d:P.getConfig("customPriceBucket"),P.getConfig("currency.granularityMultiplier"));return e.pbLg=f.low,e.pbMg=f.med,e.pbHg=f.high,e.pbAg=f.auto,e.pbDg=f.dense,e.pbCg=f.custom,e}(r);Rt(v.BID_ACCEPTED,i),i.mediaType===ai?function(e,t,n){let{index:r=Fi.index}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=!0;const o=b(r.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}),"video"),a=o&&b(o,"context"),s=o&&b(o,"useCacheKey");P.getConfig("cache.url")&&(s||a!==Bn)&&(!t.videoCacheKey||P.getConfig("cache.ignoreBidderCacheKey")?(i=!1,Ai(e,t,n,o)):t.vastUrl||(he("videoCacheKey specified but not required vastUrl for video bid"),i=!1)),i&&(Ii(e,t),n())}(t,i,e):((e=>e.native&&"object"==typeof e.native)(i)&&((e,t)=>{const n=t?.nativeOrtbRequest,r=e.native?.ortb;if(n&&r){const t=uo(r,n);Object.assign(e.native,t)}["rendererUrl","adTemplate"].forEach((n=>{const r=t?.nativeParams?.[n];r&&(e.native[n]=ro(r))}))})(i,n.getAdUnit(i)),Ii(t,i),e())}))}function y(e,n,r){return f(e,n,(e=>{n.rejectionReason=r,fe(`Bid from ${n.bidder||"unknown bidder"} was rejected: ${r}`,n),Rt(v.BID_REJECTED,n),t.addBidRejected(n),e()}))}function w(){let n=t.getBidRequests();const d=P.getConfig("auctionOptions");if(o.add(this),d&&!Oe(d)){const e=d.secondaryBidders;e&&!n.every((t=>s(e,t.bidderCode)))&&(n=n.filter((t=>!s(e,t.bidderCode))))}i=n.every((e=>o.has(e))),this.bids.forEach((e=>{a[e.bidId]||(t.addNoBid(e),Rt(v.NO_BID,e))})),i&&0===r&&e()}return{addBidResponse:(()=>{function e(e,t){bi.call({dispatch:h},e,t,(()=>{let n=!1;return r=>{n||(y(e,t,r),n=!0)}})())}return e.reject=y,e})(),adapterDone:function(){yi(M.resolve()).finally((()=>w.call(this)))}}}(q,this);Xr.callBids(h,e,n.addBidResponse,n.adapterDone,{request(e,n){i(pi,n),i(t,e),gi[e]||(gi[e]={SRA:!0,origin:n}),t[e]>1&&(gi[e].SRA=!1)},done(e){pi[e]--,mi[0]&&r(mi[0])&&mi.shift()}},C,L,d)}};function r(e){let t=!0,n=P.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((e=>{let r=1,i=void 0!==e.src&&e.src===S?"s2s":e.bidderCode;return gi[i]&&(!1===gi[i].SRA&&(r=Math.min(e.bids.length,n)),pi[gi[i].origin]+r>n&&(t=!1)),!t})),t&&e.run(),t}function i(e,t){void 0===e[t]?e[t]=1:e[t]++}r(n)||(fe("queueing auction due to limited endpoint capacity"),mi.push(n))}return kt(v.SEAT_NON_BID,(e=>{var t;e.auctionId===I&&(t=e.seatnonbid,$=$.concat(t))})),{addBidReceived:e=>{B=B.concat(e)},addBidRejected:e=>{O=O.concat(e)},addNoBid:e=>{j=j.concat(e)},callBids:function(){E="started",A=Date.now();let e=f.measureTime("requestBids.makeRequests",(()=>Xr.makeBidRequests(h,A,I,C,y,d,f)));me(`Bids Requested for Auction with id: ${I}`,e),f.checkpoint("callBids"),e.length<1?(fe("No valid bid requests returned for auction"),q()):vi.call({dispatch:W,context:this},e)},addWinningBid:e=>{const n=t.find((t=>t.adUnitId===e.adUnitId));D=D.concat(e),(e=>{let{source:t,burl:n}=e;t===S&&n&&te.triggerPixel(n)})(e),Xr.callBidWonBidder(e.adapterCode||e.bidder,e,t),n&&!n.deferBilling&&Xr.callBidBillableBidder(e)},setBidTargeting:e=>{Xr.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:()=>D,getAuctionStart:()=>A,getAuctionEnd:()=>k,getTimeout:()=>C,getAuctionId:()=>I,getAuctionStatus:()=>E,getAdUnits:()=>h,getAdUnitCodes:()=>w,getBidRequests:()=>U,getBidsReceived:()=>B,getNoBids:()=>j,getNonBids:()=>$,getFPD:()=>d,getMetrics:()=>f,end:T.promise}}const bi=tn("sync",(function(e,t,n){this.dispatch.call(null,e,t)}),"addBidResponse"),yi=tn("sync",(e=>e),"responsesReady"),vi=tn("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),wi=tn("async",((e,t)=>{t&&t()}),"bidsBackCallback");function Ii(e,t){(e=>{let t;const n=!0===Jt.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(n||e.dealId)&&(t=function(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t)return{};const r=n.getBidRequest(t);var i={};return Di(i,ji(t.mediaType,e),t,r),e&&Jt.getOwn(e,y)&&(Di(i,Jt.ownSettingsFor(e),t,r),t.sendStandardTargeting=Jt.get(e,"sendStandardTargeting")),t.native&&(i=Object.assign({},i,function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};const r=t.getAdUnit(e),i=!1!==b(r,"nativeParams.sendTargetingKeys"),o=(e=>{const t={};return b(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((e=>{t[e]=`hb_native_${e}`})),{...x,...t}})(r),a={...e.native,...e.native.ext};return delete a.ext,Object.keys(a).forEach((t=>{const a=o[t];let s=ro(e.native[t])||ro(b(e,`native.ext.${t}`));if("adTemplate"===t||!a||!s)return;let d=b(r,`nativeParams.${t}.sendId`);"boolean"!=typeof d&&(d=b(r,`nativeParams.ext.${t}.sendId`)),d&&(s=`${a}:${e.adId}`);let c=b(r,`nativeParams.${t}.sendTargetingKeys`);"boolean"!=typeof c&&(c=b(r,`nativeParams.ext.${t}.sendTargetingKeys`)),("boolean"==typeof c?c:i)&&(n[a]=s)})),n}(t))),i}(e.bidderCode,e)),e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)})(t),Vn(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),Rt(v.BID_RESPONSE,t)}const Ci=e=>{!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nt;const r={puts:e.map(Ft)};n(P.getConfig("cache.timeout"))(P.getConfig("cache.url"),(e=>({success:t=>{let n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:(t,n)=>{e(new Error(`Error storing video ad in the cache: ${t}: ${JSON.stringify(n)}`),[])}}))(t),JSON.stringify(r),{contentType:"text/plain",withCredentials:!0})}(e.map((e=>e.bidResponse)),((t,n)=>{n.forEach(((n,r)=>{const{auctionInstance:i,bidResponse:o,afterBidAdded:a}=e[r];var s;t?fe(`Failed to save to the video cache: ${t}. Video bid must be discarded.`):""===n.uuid?fe("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(o.videoCacheKey=n.uuid,o.vastUrl||(o.vastUrl=(s=o.videoCacheKey,`${P.getConfig("cache.url")}?uuid=${s}`)),Ii(i,o),a())}))}))};let xi,Si;P.getConfig("cache",(e=>{xi="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,Si="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0}));const Ti=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ci,n=[[]],r=!1;const i=e=>e();return(o,a,s)=>{const d=Si>0?e:i;n[n.length-1].length>=xi&&n.push([]),n[n.length-1].push({auctionInstance:o,bidResponse:a,afterBidAdded:s}),r||(r=!0,d((()=>{n.forEach(t),n=[[]],r=!1}),Si))}}(),Ai=tn("async",((e,t,n,r)=>{Ti(e,t,n)}),"callPrebidCache");function ki(e,t,n){if(e&&n){if(e===ai){const e=b(t,`${ai}.context`,"instream");if(n[`${ai}-${e}`])return n[`${ai}-${e}`]}return n[e]}}const _i=e=>t=>{const n=e||function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=ki(e.mediaType,t.getMediaTypes(e),P.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&n?"string"==typeof n?n:"custom":P.getConfig("priceGranularity")}(t);return"auto"===n?t.pbAg:"dense"===n?t.pbDg:"low"===n?t.pbLg:"medium"===n?t.pbMg:"high"===n?t.pbHg:"custom"===n?t.pbCg:void 0},Ei=()=>e=>e.creativeId?e.creativeId:"",Oi=()=>e=>e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:"",Ri=()=>e=>e.meta&&(e.meta.networkId||e.meta.networkName)?b(e,"meta.networkName")||b(e,"meta.networkId"):"",Ui=()=>e=>e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:"";function Bi(e,t){return{key:e,val:"function"==typeof t?(e,n)=>t(e,n):e=>((e,t)=>e[t])(e,t)}}function ji(e,t){const n=Object.assign({},Jt.settingsFor(null));if(n[y]||(n[y]=[Bi(I.BIDDER,"bidderCode"),Bi(I.AD_ID,"adId"),Bi(I.PRICE_BUCKET,_i()),Bi(I.SIZE,"size"),Bi(I.DEAL,"dealId"),Bi(I.SOURCE,"source"),Bi(I.FORMAT,"mediaType"),Bi(I.ADOMAIN,Oi()),Bi(I.ACAT,Ui()),Bi(I.DSP,Ri()),Bi(I.CRID,Ei())]),"video"===e){const e=n[y].slice();if(n[y]=e,[I.UUID,I.CACHE_ID].forEach((t=>{void 0===d(e,(e=>e.key===t))&&e.push(Bi(t,"videoCacheKey"))})),P.getConfig("cache.url")&&(!t||!1!==Jt.get(t,"sendStandardTargeting"))){const t=lt(P.getConfig("cache.url"));void 0===d(e,(e=>e.key===I.CACHE_HOST))&&e.push(Bi(I.CACHE_HOST,(e=>b(e,`adserverTargeting.${I.CACHE_HOST}`)?e.adserverTargeting[I.CACHE_HOST]:t.hostname)))}}return n}function Di(e,t,n,r){var i=t[y];return n.size=n.getSize(),(i||[]).forEach((i=>{var o=i.key,a=i.val;if(e[o]&&fe("The key: "+o+" is being overwritten"),Se(a))try{a=a(n,r)}catch(e){he("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==I.DEAL&&o!==I.ACAT&&o!==I.DSP&&o!==I.CRID||!Re(a)&&null!=a?e[o]=a:me("suppressing empty key '"+o+"' from adserver targeting")})),e}function Pi(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}function $i(e){Object.assign(this,{getAuction(t){let{auctionId:n}=t;if(null!=n)return e().find((e=>e.getAuctionId()===n))},getAdUnit(t){let{adUnitId:n}=t;if(null!=n)return e().flatMap((e=>e.getAdUnits())).find((e=>e.adUnitId===n))},getMediaTypes(e){let{adUnitId:t,requestId:n}=e;if(null!=n){const e=this.getBidRequest({requestId:n});if(null!=e&&(null==t||e.adUnitId===t))return e.mediaTypes}else if(null!=t){const e=this.getAdUnit({adUnitId:t});if(null!=e)return e.mediaTypes}},getBidderRequest(t){let{requestId:n,bidderRequestId:r}=t;if(null!=n||null!=r){let t=e().flatMap((e=>e.getBidRequests()));return null!=r&&(t=t.filter((e=>e.bidderRequestId===r))),null==n?t[0]:t.find((e=>e.bids&&null!=e.bids.find((e=>e.bidId===n))))}},getBidRequest(t){let{requestId:n}=t;if(null!=n)return e().flatMap((e=>e.getBidRequests())).flatMap((e=>e.bids)).find((e=>e&&e.bidId===n))}})}let zi=1;const Ni=[];function qi(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:zi)}P.getConfig("ttlBuffer",(e=>{if("number"==typeof e.ttlBuffer){const t=zi;zi=e.ttlBuffer,t!==zi&&Ni.forEach((e=>e(zi)))}else he("Invalid value for ttlBuffer",e.ttlBuffer)}));const Mi="minBidCacheTTL",Fi=(()=>{let e=null;const t=bt({startTime:e=>e.end.then((()=>e.getAuctionEnd())),ttl:t=>null==e?null:t.end.then((()=>1e3*Math.max(e,...t.getBidsReceived().map(qi))))});var n;n=()=>{null!=e&&t.refresh()},Ni.push(n),P.getConfig(Mi,(n=>{const r=e;e=n?.[Mi],e="number"==typeof e?e:null,r!==e&&t.refresh()}));const r={onExpiry:t.onExpiry};function i(e){for(const n of t)if(n.getAuctionId()===e)return n}function o(){return t.toArray().flatMap((e=>e.getBidsReceived()))}return r.addWinningBid=e=>{const t=Vn(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","render.pending"),t.timeBetween("requestBids","bidWon","render.e2e");const n=i(e.auctionId);n?(e.status=A,n.addWinningBid(e)):fe("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:e=>e.getAuctionStatus()===ui},getAdUnitCodes:{post:Fe}}).forEach((e=>{let[n,{name:i=n,pre:o,post:a}]=e;const s=null==o?e=>e[i]():e=>o(e)?e[i]():[],d=null==a?e=>e:e=>e.filter(a);r[n]=()=>d(t.toArray().flatMap(s))})),r.getAllBidsForAdUnitCode=e=>o().filter((t=>t&&t.adUnitCode===e)),r.createAuction=e=>{const n=hi(e);return(e=>{t.add(e)})(n),n},r.findBidByAdId=e=>o().find((t=>t.adId===e)),r.getStandardBidderAdServerTargeting=()=>ji()[y],r.setStatusForBids=(e,t)=>{let n=r.findBidByAdId(e);if(n&&(n.status=t),n&&t===T){const e=i(n.auctionId);e&&e.setBidTargeting(n)}},r.getLastAuctionId=()=>{const e=t.toArray();return e.length&&e[e.length-1].getAuctionId()},r.clearAllAuctions=()=>{t.clear()},r.index=new $i((()=>t.toArray())),r})(),Li=[],Wi=Object.keys(x).map((e=>x[e])),Vi={image:{ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},Gi=po(k),Hi=po(_),Ji={img:1,js:2,1:"img",2:"js"},Ki={impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4};function Xi(e){if(e&&e.type&&(!(!(t=e.type)||!s(Object.keys(Vi),t))||(he(`${t} nativeParam is not supported`),!1))&&(e=Vi[e.type]),!e||!e.ortb||Yi(e.ortb))return e;var t}function Yi(e){const t=e.assets;if(!Array.isArray(t)||0===t.length)return he("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;const n=t.map((e=>e.id));return t.length!==new Set(n).size||n.some((e=>e!==parseInt(e,10)))?(he("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?(he("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every((e=>(e=>{if(!_e(e))return he("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!ke(e.img.w)&&!ke(e.img.wmin))return he("for img asset there must be 'w' or 'wmin' property"),!1;if(!ke(e.img.h)&&!ke(e.img.hmin))return he("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!ke(e.title.len))return he("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!ke(e.data.type))return he("for data asset 'type' property must be a number"),!1}else if(e.video&&!(Array.isArray(e.video.mimes)&&Array.isArray(e.video.protocols)&&ke(e.video.minduration)&&ke(e.video.maxduration)))return he("video asset is not properly configured"),!1;return!0})(e)))}function Qi(e,t){const n=t.native.ortb||co(t.native);return"click"===e.action?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{fetchURL:n=$e}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){const r=(e.assets||[]).filter((e=>e.link)).reduce(((e,t)=>(e[t.id]=t.link,e)),{}),i=e.link?.clicktrackers||[];let o=r[t],a=i;o&&(a=o.clicktrackers||[]),a.forEach((e=>n(e)))}else(e.link?.clicktrackers||[]).forEach((e=>n(e)))}(n,e?.assetId):function(e){let{runMarkup:t=e=>ze(e),fetchURL:n=$e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=(e.eventtrackers||[]).filter((e=>e.event===Ki.impression));let{img:i,js:o}=r.reduce(((e,t)=>(Ji.hasOwnProperty(t.method)&&e[Ji[t.method]].push(t.url),e)),{img:[],js:[]});e.imptrackers&&(i=i.concat(e.imptrackers)),i.forEach((e=>n(e))),o=o.map((e=>`<script async src="${e}"><\/script>`)),e.jstracker&&(o=o.concat([e.jstracker])),o.length&&t(o.join("\n"))}(n),e.action}function Zi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[];return Object.entries(e).filter((e=>{let[r,i]=e;return i&&(!1===n&&"ext"===r||null==t||t.includes(r))})).forEach((e=>{let[i,o]=e;!1===n&&"ext"===i?r.push(...Zi(o,t,!0)):(n||x.hasOwnProperty(i))&&r.push({key:i,value:ro(o)})})),r}function eo(e,t,n){const r={...nt(e.native,["rendererUrl","adTemplate"]),assets:Zi(e.native,n),nativeKeys:x};return e.native.ortb?r.ortb=e.native.ortb:t.mediaTypes?.native?.ortb&&(r.ortb=lo(e.native,t.nativeOrtbRequest)),r}function to(e,t,n){let{index:r=Fi.index}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return{message:"assetResponse",adId:e.adId,...eo(t,r.getAdUnit(t),n)}}const no=Object.fromEntries(Object.entries(x).map((e=>{let[t,n]=e;return[n,t]})));function ro(e){return e?.url||e}function io(e){if(!e&&!_e(e))return void he("Native assets object is empty or not an object: ",e);const t={ver:"1.2",assets:[]};for(let n in e){if(E.includes(n))continue;if(!x.hasOwnProperty(n)){he(`Unrecognized native asset code: ${n}. Asset will be ignored.`);continue}if("privacyLink"===n){t.privacy=1;continue}const r=e[n];let i=0;r.required&&Ee(r.required)&&(i=Number(r.required));const o={id:t.assets.length,required:i};if(n in k)o.data={type:_[k[n]]},r.len&&(o.data.len=r.len);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?1:3},r.aspect_ratios)if(Ae(r.aspect_ratios))if(r.aspect_ratios.length){const{min_width:e,min_height:t}=r.aspect_ratios[0];ot(e)&&ot(t)?(o.img.wmin=e,o.img.hmin=t):he("image.aspect_ratios min_width or min_height are invalid: ",e,t);const n=r.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));n.length>0&&(o.img.ext={aspectratios:n})}else he("image.aspect_ratios was passed, but it's empty:",r.aspect_ratios);else he("image.aspect_ratios was passed, but it's not a an array:",r.aspect_ratios);r.sizes&&(2===r.sizes.length&&ot(r.sizes[0])&&ot(r.sizes[1])?(o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):he("image.sizes was passed, but its value is not an array of integers:",r.sizes))}else"title"===n?o.title={len:r.len||140}:"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}return t}function oo(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}function ao(e){if(!Yi(e))return;const t={};for(const n of e.assets){if(n.title){const e={required:!!n.required&&Boolean(n.required),len:n.title.len};t.title=e}else if(n.img){const e={required:!!n.required&&Boolean(n.required)};if(n.img.w&&n.img.h)e.sizes=[n.img.w,n.img.h];else if(n.img.wmin&&n.img.hmin){const t=oo(n.img.wmin,n.img.hmin);e.aspect_ratios=[{min_width:n.img.wmin,min_height:n.img.hmin,ratio_width:n.img.wmin/t,ratio_height:n.img.hmin/t}]}3===n.img.type?t.image=e:t.icon=e}else if(n.data){let e=Object.keys(_).find((e=>_[e]===n.data.type)),r=Object.keys(k).find((t=>k[t]===e));t[r]={required:!!n.required&&Boolean(n.required)},n.data.len&&(t[r].len=n.data.len)}e.privacy&&(t.privacyLink={required:!1})}return t}function so(e){{if(!e||!Ae(e))return e;if(!e.some((e=>(e?.mediaTypes||{})[oi]?.ortb)))return e;let t=Je(e);for(const e of t)e.mediaTypes&&e.mediaTypes[oi]&&e.mediaTypes[oi].ortb&&(e.mediaTypes[oi]=Object.assign(at(e.mediaTypes[oi],E),ao(e.mediaTypes[oi].ortb)),e.nativeParams=Xi(e.mediaTypes[oi]));return t}}function co(e){const t={link:{},eventtrackers:[]};return Object.entries(e).forEach((e=>{let[n,r]=e;switch(n){case"clickUrl":t.link.url=r;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(r)?r:[r];break;case"impressionTrackers":(Array.isArray(r)?r:[r]).forEach((e=>{t.eventtrackers.push({event:Ki.impression,method:Ji.img,url:e})}));break;case"javascriptTrackers":t.jstracker=Array.isArray(r)?r.join(""):r;break;case"privacyLink":t.privacy=r}})),t}function lo(e,t){const n={...co(e),assets:[]};function r(e,r){let i=t.assets.find(e);null!=i&&(i=Je(i),r(i),n.assets.push(i))}return Object.keys(e).filter((t=>!!e[t])).forEach((t=>{const n=ro(e[t]);switch(t){case"title":r((e=>null!=e.title),(e=>{e.title={text:n}}));break;case"image":case"icon":const e="image"===t?3:1;r((t=>null!=t.img&&t.img.type===e),(e=>{e.img={url:n}}));break;default:t in k&&r((e=>null!=e.data&&e.data.type===_[k[t]]),(e=>{e.data={value:n}}))}})),n}function uo(e,t){const n={},r=t?.assets||[];n.clickUrl=e.link.url,n.privacyLink=e.privacy;for(const t of e?.assets||[]){const e=r.find((e=>t.id===e.id));t.title?n.title=t.title.text:t.img?n[3===e.img.type?"image":"icon"]={url:t.img.url,width:t.img.w,height:t.img.h}:t.data&&(n[Gi[Hi[e.data.type]]]=t.data.value)}n.impressionTrackers=[];let i=[];e.imptrackers&&n.impressionTrackers.push(...e.imptrackers);for(const t of e?.eventtrackers||[])t.event===Ki.impression&&t.method===Ji.img&&n.impressionTrackers.push(t.url),t.event===Ki.impression&&t.method===Ji.js&&i.push(t.url);return i=i.map((e=>`<script async src="${e}"><\/script>`)),e?.jstracker&&i.push(e.jstracker),i.length&&(n.javascriptTrackers=i.join("\n")),n}function po(e){var t={};for(var n in e)t[e[n]]=n;return t}const go=tn("sync",(e=>'!function(){"use strict";window.render=function({ad:d,adUrl:i,width:n,height:e},{mkFrame:o},r){if(!d&&!i)throw{reason:"noAd",message:"Missing ad markup or URL"};{const t=r.document,s={width:n,height:e};i&&!d?s.src=i:s.srcdoc=d,t.body.appendChild(o(t,s))}}}();')),mo=(()=>{const e={};return t=>{const n=go(t);return e.hasOwnProperty(n)||(e[n]=new M((e=>{const t=Ie();t.srcdoc=`<script>${n}<\/script>`,t.onload=()=>e(t.contentWindow.render),document.body.appendChild(t)}))),e[n]}})(),{AD_RENDER_FAILED:fo,AD_RENDER_SUCCEEDED:ho,STALE_RENDER:bo,BID_WON:yo}=v,{EXCEPTION:vo}=w;function wo(e){let{reason:t,message:n,bid:r,id:i}=e;const o={reason:t,message:n};r&&(o.bid=r,o.adId=r.adId),i&&(o.adId=i),he(`Error rendering ad (id: ${i}): ${n}`),Rt(fo,o)}function Io(e){let{doc:t,bid:n,id:r}=e;const i={doc:t};n&&(i.bid=n),r&&(i.adId=r),Rt(ho,i)}function Co(e,t){switch(e.event){case v.AD_RENDER_FAILED:wo({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case v.AD_RENDER_SUCCEEDED:Io({doc:null,bid:t,id:t.adId});break;default:he(`Received event request for unsupported event: '${e.event}' (adId: '${t.adId}')`)}}function xo(e,t,n){let{resizeFn:r,fireTrackers:i=Qi}=n;"resizeNativeHeight"===e.action?r(e.width,e.height):i(e,t)}const So={[O.EVENT]:Co};So[O.NATIVE]=xo;const To=tn("sync",((e,t)=>{const{ad:n,adUrl:r,cpm:i,originalCpm:o,width:a,height:s}=e,d={AUCTION_PRICE:o||i,CLICKTHROUGH:t?.clickUrl||""};return{ad:Xe(n,d),adUrl:Xe(r,d),width:a,height:s}})),Ao=tn("sync",(e=>{let{renderFn:t,resizeFn:n,bidResponse:r,options:i}=e;if(r.mediaType===ai)return void wo({reason:w.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:r,id:r.adId});const o=To(r,i);t(Object.assign({adId:r.adId},o));const{width:a,height:s}=o;null!=(a??s)&&n(a,s)}));function ko(e){let{renderFn:t,resizeFn:n,adId:r,options:i,bidResponse:o,doc:a}=e;if(null!=o){if(o.status!==A||(fe(`Ad id ${r} has been rendered before`),Rt(bo,o),!b(P.getConfig("auctionOptions"),"suppressStaleRender"))){try{Ao({renderFn:t,resizeFn:n,bidResponse:o,options:i,doc:a})}catch(e){wo({reason:w.EXCEPTION,message:e.message,id:r,bid:o})}Fi.addWinningBid(o),Rt(yo,o)}}else wo({reason:w.CANNOT_FIND_AD,message:`Cannot find ad '${r}'`,id:r})}Ao.before(((e,t)=>{const{bidResponse:n,doc:r}=t;var i;(i=n.renderer)&&(i.url||i.renderNow)?(((e,t,n)=>{let r=null;e.config&&e.config.documentResolver&&(r=e.config.documentResolver(t,document,n)),r||(r=document),e.documentContext=r,e.render(t,e.documentContext)})(n.renderer,n,r),Io({doc:r,bid:n,id:n.adId}),e.bail()):e(t)}),100);const{REQUEST:_o,RESPONSE:Eo,NATIVE:Oo,EVENT:Ro}=O,Uo=v.BID_WON,Bo={[_o]:(e,t,n)=>{ko({renderFn(t){e(Object.assign({message:Eo,renderer:go(n)},t))},resizeFn:Do(n),options:t.options,adId:t.adId,bidResponse:n})},[Ro]:(e,t,n)=>{if(null!=n){if(n.status===A)return Co(t,n);fe(`Received x-origin event request without corresponding render request for ad '${n.adId}'`)}else he(`Cannot find ad '${t.adId}' for x-origin event request`)}};function jo(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){const t=d(Fi.getBidsReceived(),(e=>e.adId===n.adId));Bo.hasOwnProperty(n.message)&&Bo[n.message]((e=>null==e.origin&&0===e.ports.length?()=>{const e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw he(e),new Error(e)}:e.ports.length>0?t=>{e.ports[0].postMessage(JSON.stringify(t))}:t=>{e.source.postMessage(JSON.stringify(t),e.origin)})(e),n,t)}}function Do(e){return(t,n)=>{(e=>{let{adId:t,adUnitCode:n,width:r,height:i}=e;function o(e){return e?e+"px":"100%"}function a(e){let r=function(e,t){return Ge()?function(e){const t=d(window.googletag.pubads().getSlots(),(t=>d(t.getTargetingKeys(),(n=>s(t.getTargeting(n),e)))));return t?t.getSlotElementId():null}(e):(()=>{if(window.apntag&&Se(window.apntag.getTag))return!0})()?function(e){let t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),i=document.getElementById(r);return i&&i.querySelector(e)}["div","iframe"].forEach((e=>{let t=a(e+':not([style*="display: none"])');if(t){let e=t.style;e.width=o(r),e.height=o(i)}else fe(`Unable to locate matching page element for adUnitCode ${n}.  Can't resize it to ad's dimensions.  Please review setup.`)}))})({...e,width:t,height:n})}}function Po(e,t){return e===t?0:e<t?-1:1}function $o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e;return(t,n)=>Po(e(t),e(n))}function zo(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return(t,n)=>-e(t,n)||0}function No(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(e,n)=>{for(const r of t){const t=r(e,n);if(0!==t)return t}return 0}}function qo(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po;return(t,n)=>e(n,t)<0?n:t}(zo(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Po))}Object.assign(Bo,{[Oo]:(e,t,n)=>{if(null!=n)switch(n.status!==A&&(Fi.addWinningBid(n),Rt(Uo,n)),t.action){case"assetRequest":e(((e,t)=>{const n=e.assets.map((e=>no[e]));return to(e,t,n)})(t,n));break;case"allAssetRequest":e(((e,t)=>to(e,t,null))(t,n));break;default:xo(t,n,{resizeFn:Do(n)})}else he(`Cannot find ad for x-origin event request: '${t.adId}'`)}});const Mo=$o((e=>e.cpm)),Fo=$o((e=>e.responseTimestamp)),Lo=qo(No(Mo,zo($o((e=>e.timeToRespond))))),Wo=qo(No(Mo,zo(Fo)));qo(No(Mo,Fo));var Vo=[];const Go="targetingControls.allowTargetingKeys",Ho="targetingControls.addTargetingKeys",Jo=`Only one of "${Go}" or "${Ho}" can be set`,Ko=Object.keys(I).map((e=>I[e]));let Xo={isActualBid:e=>1===e.getStatusCode(),isBidNotExpired:e=>e.responseTimestamp+1e3*qi(e)>Ye(),isUnusedBid:e=>e&&(e.status&&!s([A],e.status)||!e.status)};function Yo(e){return!Object.values(Xo).some((t=>!t(e)))}const Qo=tn("sync",(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){const r=[],i=P.getConfig("sendBidsControl.dealPrioritization");let o=tt(e,"adUnitCode");return Object.keys(o).forEach((e=>{let a=[],s=tt(o[e],"bidderCode");Object.keys(s).forEach((e=>a.push(s[e].reduce(t)))),n>0?(a=i?a.sort(Zo(!0)):a.sort(((e,t)=>t.cpm-e.cpm)),r.push(...a.slice(0,n))):r.push(...a)})),r}return e}));function Zo(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n)=>void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}const ea=(e=>{let t={},n={};function r(e,t){return e.adserverTargeting&&t&&(Ae(t)&&s(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function i(t){return"string"==typeof t?[t]:Ae(t)?t:e.getAdUnitCodes()||[]}function o(){let t=e.getBidsReceived();if(P.getConfig("useBidCache")){const e=P.getConfig("bidCacheFilterFunction");"function"==typeof e&&(t=t.filter((t=>n[t.adUnitCode]===t.auctionId||!!e(t))))}else t=t.filter((e=>n[e.adUnitCode]===e.auctionId));return t=t.filter((e=>b(e,"video.context")!==di)).filter(Yo),t.forEach((e=>(e.latestTargetedAuctionId=n[e.adUnitCode],e))),Qo(t,Wo)}function a(e,n){let r=t.getWinningBids(e,n),i=c();return r=r.map((e=>({[e.adUnitCode]:Object.keys(e.adserverTargeting).filter((t=>void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===i.indexOf(t))).reduce(((t,n)=>{const r=[e.adserverTargeting[n]],i={[n.substring(0,20)]:r};if(n===I.DEAL){const o=`${n}_${e.bidderCode}`.substring(0,20),a={[o]:r};return[...t,i,a]}return[...t,i]}),[])}))),r}function c(){return e.getStandardBidderAdServerTargeting().map((e=>e.key)).concat(Ko).filter(Fe)}function l(e,t,n,r){return Object.keys(t.adserverTargeting).filter(u()).forEach((n=>{e.length&&e.filter((e=>n=>n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e])(n)).forEach((e=>n=>{Ae(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(Fe),delete t.adserverTargeting[e]})(n))})),e.push(t),e}function u(){let e=c();return e=e.concat(Wi),t=>-1===e.indexOf(t)}function p(e){return{[e.adUnitCode]:Object.keys(e.adserverTargeting).filter(u()).map((t=>({[t.substring(0,20)]:[e.adserverTargeting[t]]})))}}function g(e,t){return t.map((t=>({[`${t}_${e.bidderCode}`.substring(0,20)]:[e.adserverTargeting[t]]})))}return t.setLatestAuctionForAdUnit=(e,t)=>{n[e]=t},t.resetPresetTargeting=(t,n)=>{if(Ge()){const r=i(t),o=e.getAdUnits().filter((e=>s(r,e.code)));let a=Vo.reduce(((e,t)=>(e[t]=null,e)),{});window.googletag.pubads().getSlots().forEach((e=>{let t=Se(n)&&n(e);o.forEach((n=>{(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||Se(t)&&t(n.code))&&e.updateTargetingFromMap(a)}))}))}},t.resetPresetTargetingAST=e=>{i(e).forEach((e=>{const t=window.apntag.getTag(e);if(t&&t.keywords){const n=Object.keys(t.keywords),r={};n.forEach((e=>{s(Vo,e.toLowerCase())||(r[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:r})}}))},t.getAllTargeting=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();const c=i(t);var u=a(c,n).concat(((e,t)=>t.filter((t=>s(e,t.adUnitCode))).map((e=>Object.assign({},e))).reduce(l,[]).map(p).filter((e=>e)))(c,n)).concat(P.getConfig("enableSendAllBids")?((e,t)=>{const n=Ko.concat(Wi),i=P.getConfig("sendBidsControl.bidLimit"),o=Qo(t,Lo,i),a=P.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),s=a?a.map((e=>I[e])):n;return o.map((t=>{if(r(t,e))return{[t.adUnitCode]:g(t,n.filter((e=>void 0!==t.adserverTargeting[e]&&-1!==s.indexOf(e))))}})).filter((e=>e))})(c,n):((e,t)=>{if(!0===P.getConfig("targetingControls.alwaysIncludeDeals")){const n=Ko.concat(Wi);return Qo(t,Lo).map((t=>{if(t.dealId&&r(t,e))return{[t.adUnitCode]:g(t,n.filter((e=>void 0!==t.adserverTargeting[e])))}})).filter((e=>e))}return[]})(c,n)).concat((t=>{function n(e){return b(e,y)}function r(e){const t=n(e);return Object.keys(t).map((e=>(Te(t[e])&&(t[e]=t[e].split(",").map((e=>e.trim()))),Ae(t[e])||(t[e]=[t[e]]),{[e]:t[e]})))}return e.getAdUnits().filter((e=>s(t,e.code)&&n(e))).map((e=>({[e.code]:r(e)})))})(c));u.map((e=>{Object.keys(e).map((t=>{e[t].map((e=>{-1===Vo.indexOf(Object.keys(e)[0])&&(Vo=Object.keys(e).concat(Vo))}))}))}));const m=Object.keys(Object.assign({},C,x));let f=P.getConfig(Go);const h=P.getConfig(Ho);if(null!=h&&null!=f)throw new Error(Jo);f=null!=h?m.concat(h):f||m,Array.isArray(f)&&f.length>0&&(u=((e,t)=>{const n=Object.assign({},I,x),r=Object.keys(n),i={};return me(`allowTargetingKeys - allowed keys [ ${t.map((e=>n[e])).join(", ")} ]`),e.map((e=>{const o=Object.keys(e)[0],a=e[o].filter((e=>{const o=Object.keys(e)[0],a=0===r.filter((e=>0===o.indexOf(n[e]))).length||d(t,(e=>{const t=n[e];return 0===o.indexOf(t)}));return i[o]=!a,a}));e[o]=a})),me(`allowTargetingKeys - removed keys [ ${Object.keys(i).filter((e=>i[e])).join(", ")} ]`),e.filter((e=>e[Object.keys(e)[0]].length>0))})(u,f)),u=(e=>{let t=e.map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].map((e=>({[Object.keys(e)[0]]:e[Object.keys(e)[0]].join(",")}))).reduce(((e,t)=>Object.assign(t,e)),{})}))).reduce(((e,t)=>{var n=Object.keys(t)[0];return e[n]=Object.assign({},e[n],t[n]),e}),{});return t})(u);const v=P.getConfig("targetingControls.auctionKeyMaxChars");return v&&(me(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${v} characters.  Running checks on auction keys...`),u=((e,t)=>{let n=Je(e),r=Object.keys(n).map((e=>({adUnitCode:e,adserverTargeting:n[e]}))).sort(Zo());return r.reduce(((e,r,i,o)=>{let a=(s=r.adserverTargeting,Object.keys(s).reduce(((e,t)=>e+`${t}%3d${encodeURIComponent(s[t])}%26`),""));var s;i+1===o.length&&(a=a.slice(0,-3));let d=r.adUnitCode,c=a.length;return c<=t?(me(`AdUnit '${d}' auction keys comprised of ${c} characters.  Deducted from running threshold; new limit is ${t-=c}`,n[d]),e[d]=n[d]):fe(`The following keys for adUnitCode '${d}' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ${c}, the current allotted amount was ${t}.\n`,n[d]),i+1===o.length&&0===Object.keys(e).length&&he("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})})(u,v)),c.forEach((e=>{u[e]||(u[e]={})})),u},P.getConfig("targetingControls",(e=>{null!=b(e,Go)&&null!=b(e,Ho)&&he(Jo)})),t.setTargetingForGPT=(e,t)=>{window.googletag.pubads().getSlots().forEach((n=>{Object.keys(e).filter(t?t(n):(e=>t=>it(e,t))(n)).forEach((t=>{Object.keys(e[t]).forEach((n=>{let r=e[t][n];"string"==typeof r&&-1!==r.indexOf(",")&&(r=r.split(",")),e[t][n]=r})),ge(`Attempting to set targeting-map for slot: ${n.getSlotElementId()} with targeting-map:`,e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();const n=i(e);return t.filter((e=>s(n,e.adUnitCode))).filter((e=>!0===Jt.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0)).map((e=>e.adUnitCode)).filter(Fe).map((e=>t.filter((t=>t.adUnitCode===e?t:null)).reduce(Lo)))},t.setTargetingForAst=e=>{let n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){he("unable to reset targeting for AST"+e)}Object.keys(n).forEach((e=>Object.keys(n[e]).forEach((t=>{if(ge(`Attempting to set targeting for targetId: ${e} key: ${t} value: ${n[e][t]}`),Te(n[e][t])||Ae(n[e][t])){let r={},i=/pt[0-9]/;t.search(i)<0?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}}))))},t.isApntagDefined=()=>{if(window.apntag&&Se(window.apntag.setKeywords))return!0},t})(Fi),ta="__pbjs_debugging__";function na(){return o().installedModules.includes("debugging")}function ra(e){return new M((t=>{Vt(e,"debugging",t)}))}function ia(){let{alreadyInstalled:e=na,script:t=ra}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null;return()=>(null==n&&(n=new M(((n,r)=>{setTimeout((()=>{if(e())n();else{const e="https://cdn.jsdelivr.net/npm/prebid.js@8.47.0/dist/debugging-standalone.js";ge(`Debugging module not installed, loading it from "${e}"...`),o()._installDebugging=!0,t(e).then((()=>{o()._installDebugging({DEBUG_KEY:ta,hook:tn,config:P,createBid:Un,logger:be("DEBUG:")})})).then(n,r)}}))}))),n)}const oa=function(){let{load:e=ia(),hook:t=on("requestBids")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null,r=!1;function i(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return(n||M.resolve()).then((()=>e.apply(this,r)))}function o(){t.getHooks({hook:i}).remove(),r=!1}return{enable:()=>{r||(n=e(),t.before(i,99),r=!0)},disable:o,reset:()=>{n=null,o()}}}();oa.reset,P.getConfig("debugging",(e=>{let{debugging:t}=e;t?.enabled?oa.enable():oa.disable()}));const aa=ni("fpdEnrichment"),sa=ft((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!aa.cookiesAreEnabled())return e;const t=e.split(".");if(2===t.length)return e;let n,r,i=-2;const o=`_rdc${Date.now()}`,a="writeable";do{n=t.slice(i).join(".");let e=new Date(Ye()+1e4).toUTCString();aa.setCookie(o,a,e,"Lax",n,void 0),aa.getCookie(o,void 0)===a?(r=!1,aa.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,n,void 0)):(i+=-1,r=Math.abs(i)<=t.length)}while(r);return n})),da=["architecture","bitness","model","platformVersion","fullVersionList"],ca=["brands","mobile","platform"],la=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator?.userAgentData;const t=e&&ca.some((t=>void 0!==e[t]))?Object.freeze(pa(1,e)):null;return()=>t}(),ua=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator?.userAgentData;const t={},n=new WeakMap;return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:da;if(!n.has(r)){const e=Array.from(r);e.sort(),n.set(r,e.join("|"))}const i=n.get(r);if(!t.hasOwnProperty(i))try{t[i]=e.getHighEntropyValues(r).then((e=>Oe(e)?null:Object.freeze(pa(2,e)))).catch((()=>null))}catch(e){t[i]=M.resolve(null)}return t[i]}}();function pa(e,t){function n(e,t){const n={brand:e};return Te(t)&&!Re(t)&&(n.version=t.split(".")),n}const r={source:e};return t.platform&&(r.platform=n(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(r.browsers=(t.fullVersionList||t.brands).map((e=>{let{brand:t,version:r}=e;return n(t,r)}))),void 0!==t.mobile&&(r.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach((e=>{const n=t[e];Te(n)&&(r[e]=n)})),r}const ga=["dooh","app","site"];function ma(e){return t=>(ga.reduce(((n,r)=>(fa(t,r)&&(null!=n?(fe(`${e} specifies both '${n}' and '${r}'; dropping the latter.`),delete t[r]):n=r),n)),null),t)}function fa(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}const ha={getRefererInfo:fr,findRootDomain:sa,getWindowTop:le,getWindowSelf:ue,getHighEntropySUA:ua,getLowEntropySUA:la},ba=ma("FPD"),ya=tn("sync",(e=>{const t=[e,wa().catch((()=>null)),M.resolve("cookieDeprecationLabel"in navigator&&wn(In,Xn(Kt,"cdep"))&&navigator.cookieDeprecationLabel.getValue()).catch((()=>null))];return M.all(t).then((e=>{let[t,n,r]=e;const i=ha.getRefererInfo();if((e=>{["app","site","device"].forEach((t=>{const n=P.getConfig(t);null!=n&&(e[t]=gt({},n,e[t]))}))})(t),Object.entries(Ca).forEach((e=>{let[n,r]=e;const o=r(t,i);o&&Object.keys(o).length>0&&(t[n]=gt({},o,t[n]))})),n&&ht(t,"device.sua",Object.assign({},n,t.device.sua)),r){const e={cdep:r};ht(t,"device.ext",Object.assign({},e,t.device.ext))}t=ba(t);for(let e of ga)if(fa(t,e)){t[e]=gt({},xa(0,i),t[e]);break}return t}))}));function va(e){try{return e(ha.getWindowTop())}catch(t){return e(ha.getWindowSelf())}}function wa(){const e=P.getConfig("firstPartyData.uaHints");return Array.isArray(e)&&0!==e.length?ha.getHighEntropySUA(e):M.resolve(ha.getLowEntropySUA())}function Ia(e){return nt(e,Object.keys(e))}const Ca={site(e,t){if(!ga.filter((e=>"site"!==e)).some(fa.bind(null,e)))return Ia({page:t.page,ref:t.ref})},device:()=>va((e=>{const t={w:e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,h:e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,dnt:"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift()};return e.navigator?.webdriver&&ht(t,"ext.webdriver",!0),t})),regs(){const e={};va((e=>e.navigator.globalPrivacyControl))&&ht(e,"ext.gpc",1);const t=P.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}};function xa(e,t){const n=gr(t.page,{noLeadingWww:!0}),r=va((e=>e.document.querySelector("meta[name='keywords']")))?.content?.replace?.(/\s/g,"");return Ia({domain:n,keywords:r,publisher:Ia({domain:ha.findRootDomain(n)})})}const Sa=o(),{triggerUserSyncs:Ta}=ii,{ADD_AD_UNITS:Aa,REQUEST_BIDS:ka,SET_TARGETING:_a}=v,Ea={bidWon:e=>{if(Fi.getBidsRequested().map((e=>e.bids.map((e=>e.adUnitCode)))).reduce(Le).filter(Fe).includes(e))return!0;he('The "'+e+'" placement is not defined.')}};function Oa(e,t){let n=[];return Ae(e)&&(t?e.length===t:e.length>0)&&(e.every((e=>st(e,2)))?n=e:st(e,2)&&n.push(e)),n}function Ra(e){const t=Je(e),n=t.mediaTypes.banner,r=Oa(n.sizes);return r.length>0?(n.sizes=r,t.sizes=r):(he("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}function Ua(e){const t=Je(e),n=t.mediaTypes.video;if(n.playerSize){let e="number"==typeof n.playerSize[0]?2:1;const r=Oa(n.playerSize,e);r.length>0?(2===e&&me("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=r,t.sizes=r):(he("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}function Ba(e){const t=Je(e),n=t.mediaTypes.native;if(n.ortb){const e=Object.keys(x).filter((e=>x[e].includes("hb_native_"))),r=Object.keys(n).filter((t=>e.includes(t)));r.length>0&&(he(`when using native OpenRTB format, you cannot use legacy native properties. Deleting ${r} keys from request.`),r.forEach((e=>delete t.mediaTypes.native[e])))}return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&(he("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&(he("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&(he("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}function ja(e,t){let n=b(e,`mediaTypes.${t}.pos`);if(!ke(n)||isNaN(n)||!isFinite(n)){let n=`Value of property 'pos' on ad unit ${e.code} should be of type: Number`;fe(n),Rt(v.AUCTION_DEBUG,{type:"WARNING",arguments:n}),delete e.mediaTypes[t].pos}return e}function Da(e){const t=t=>`adUnit.code '${e.code}' ${t}`,n=e.mediaTypes,r=e.bids;return null==r||Ae(r)?null==r&&null==e.ortb2Imp?(he(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=r&&0!==r.length||(e.bids=[{bidder:null}],ge(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):(he(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):(he(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}(()=>{let e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){let t=oa,n=null;try{n=e.getItem(ta)}catch(e){}null!==n&&t.enable()}})(),Sa.bidderSettings=Sa.bidderSettings||{},Sa.libLoaded=!0,Sa.version="v8.47.0",me("Prebid.js v8.47.0 loaded"),Sa.installedModules=Sa.installedModules||[],Sa.adUnits=Sa.adUnits||[],Sa.triggerUserSyncs=Ta;const Pa={validateAdUnit:Da,validateBannerMediaType:Ra,validateSizes:Oa};Object.assign(Pa,{validateNativeMediaType:Ba}),Object.assign(Pa,{validateVideoMediaType:Ua});const $a=tn("sync",(e=>{const t=[];return e.forEach((e=>{if(null==(e=Da(e)))return;const n=e.mediaTypes;let r,i,o;n.banner&&(r=Ra(e),n.banner.hasOwnProperty("pos")&&(r=ja(r,"banner"))),n.video&&(i=Ua(r||e),n.video.hasOwnProperty("pos")&&(i=ja(i,"video"))),n.native&&(o=Ba(i||r||e));const a=Object.assign({},r,i,o);t.push(a)})),t}),"checkAdUnitSetup");function za(e){const t=Fi[e]().filter((e=>Fi.getAdUnitCodes().includes(e.adUnitCode))),n=Fi.getLastAuctionId();return t.map((e=>e.adUnitCode)).filter(Fe).map((e=>t.filter((t=>t.auctionId===n&&t.adUnitCode===e)))).filter((e=>e&&e[0]&&e[0].adUnitCode)).map((e=>({[e[0].adUnitCode]:{bids:e}}))).reduce(((e,t)=>Object.assign(e,t)),{})}Sa.getAdserverTargetingForAdUnitCodeStr=function(e){if(me("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e)return(e=>e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"):"")(Sa.getAdserverTargetingForAdUnitCode(e));ge("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},Sa.getHighestUnusedBidResponseForAdUnitCode=e=>{if(e){const t=Fi.getAllBidsForAdUnitCode(e).filter(Yo);return t.length?t.reduce(Lo):{}}ge("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},Sa.getAdserverTargetingForAdUnitCode=e=>Sa.getAdserverTargeting(e)[e],Sa.getAdserverTargeting=function(e){return me("Invoking pbjs.getAdserverTargeting",arguments),ea.getAllTargeting(e)},Sa.getConsentMetadata=()=>(me("Invoking pbjs.getConsentMetadata"),Tr.getConsentMeta()),Sa.getNoBids=function(){return me("Invoking pbjs.getNoBids",arguments),za("getNoBids")},Sa.getNoBidsForAdUnitCode=e=>({bids:Fi.getNoBids().filter((t=>t.adUnitCode===e))}),Sa.getBidResponses=function(){return me("Invoking pbjs.getBidResponses",arguments),za("getBidsReceived")},Sa.getBidResponsesForAdUnitCode=e=>({bids:Fi.getBidsReceived().filter((t=>t.adUnitCode===e))}),Sa.setTargetingForGPTAsync=function(e,t){if(me("Invoking pbjs.setTargetingForGPTAsync",arguments),!Ge())return void he("window.googletag is not defined on the page");let n=ea.getAllTargeting(e);ea.resetPresetTargeting(e,t),ea.setTargetingForGPT(n,t),Object.keys(n).forEach((e=>{Object.keys(n[e]).forEach((t=>{"hb_adid"===t&&Fi.setStatusForBids(n[e][t],T)}))})),Rt(_a,n)},Sa.setTargetingForAst=function(e){me("Invoking pbjs.setTargetingForAn",arguments),ea.isApntagDefined()?(ea.setTargetingForAst(e),Rt(_a,ea.getAllTargeting())):he("window.apntag is not defined on the page")},Sa.renderAd=tn("async",(function(e,t,n){me("Invoking pbjs.renderAd",arguments),ge("Calling renderAd with adId :"+t),function(e,t,n){let r;function i(e,n){wo(Object.assign({id:t,bid:r},{reason:e,message:n}))}function o(t,n){e.defaultView&&e.defaultView.frameElement&&(t&&(e.defaultView.frameElement.width=t),n&&(e.defaultView.frameElement.height=n))}const a=(s={resizeFn:o},(e,t,n)=>{So.hasOwnProperty(e)&&So[e](t,n,s)});var s;try{t&&e?(r=Fi.findBidByAdId(t),e!==document||Ke()?ko({renderFn:t=>{t.ad?(e.write(t.ad),e.close(),Io({doc:e,bid:r,adId:r.adId})):mo(r).then((n=>n(t,{sendMessage:(e,t)=>a(e,t,r),mkFrame:we},e.defaultView))).then((()=>Io({doc:e,bid:r,adId:r.adId})),(e=>{i(e?.reason||w.EXCEPTION,e?.message),e?.stack&&he(e)})),De(document.createComment(`Creative ${r.creativeId} served by ${r.bidder} Prebid.js Header Bidding`),e,"html")},resizeFn:o,adId:t,options:{clickUrl:n?.clickThrough},bidResponse:r,doc:e}):i(w.PREVENT_WRITING_ON_MAIN_DOCUMENT,"renderAd was prevented from writing to the main document.")):i(w.MISSING_DOC_OR_ADID,"missing "+(t?"doc":"adId"))}catch(e){i(vo,e.message)}}(e,t,n)})),Sa.removeAdUnit=function(e){if(me("Invoking pbjs.removeAdUnit",arguments),!e)return void(Sa.adUnits=[]);let t;t=Ae(e)?e:[e],t.forEach((e=>{for(let t=Sa.adUnits.length-1;t>=0;t--)Sa.adUnits[t].code===e&&Sa.adUnits.splice(t,1)}))},Sa.requestBids=function(){const e=tn("async",(function(){let{bidsBackHandler:e,timeout:t,adUnits:n,adUnitCodes:r,labels:i,auctionId:o,ttlBuffer:a,ortb2:d,metrics:c,defer:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Rt(ka);const u=t||P.getConfig("bidderTimeout");me("Invoking pbjs.requestBids",arguments),r&&r.length?n=n.filter((e=>s(r,e.code))):r=n&&n.map((e=>e.code));const p={global:gt({},P.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(P.getBidderConfig()).map((e=>{let[t,n]=e;return[t,n.ortb2]})).filter((e=>{let[t,n]=e;return null!=n})))};return ya(M.resolve(p.global)).then((t=>(p.global=t,Na({bidsBackHandler:e,timeout:u,adUnits:n,adUnitCodes:r,labels:i,auctionId:o,ttlBuffer:a,ortb2Fragments:p,metrics:c,defer:l}))))}),"requestBids");return((e,t)=>(Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map((t=>[t,{get:()=>e[t]}])))),t))(e,(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.adUnits||Sa.adUnits;return t.adUnits=Ae(n)?n.slice():[n],t.metrics=Gn(),t.metrics.checkpoint("requestBids"),t.defer=F({promiseFactory:e=>new Promise(e)}),e.call(this,t),t.defer.promise}))}();const Na=tn("async",(function(){let{bidsBackHandler:e,timeout:t,adUnits:n,ttlBuffer:r,adUnitCodes:i,labels:o,auctionId:a,ortb2Fragments:d,metrics:c,defer:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=Vr(P.getConfig("s2sConfig")||[]);function p(t,n,r){if("function"==typeof e)try{e(t,n,r)}catch(e){he("Error executing bidsBackHandler",null,e)}l.resolve({bids:t,timedOut:n,auctionId:r})}(function(e){e.forEach((e=>(e=>{const t=e?.mediaTypes?.video;null!=t&&null==t.plcmt&&(t.context===Bn||[2,3,4].includes(t.placement)?t.plcmt=4:t.context!==Bn&&[2,6].includes(t.playbackmethod)&&(t.plcmt=2))})(e)))})(n),n=Vn(c).measureTime("requestBids.validate",(()=>$a(n)));const g={};if(n.forEach((e=>{const t=Object.keys(e.mediaTypes||{banner:"banner"}),n=e.bids.map((e=>e.bidder)),i=Xr.bidderRegistry,o=n.filter((e=>!u.has(e)));e.adUnitId=ae();const a=e.ortb2Imp?.ext?.tid;a&&(g.hasOwnProperty(e.code)?fe(`Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '${e.code}'`):g[e.code]=a),null==r||e.hasOwnProperty("ttlBuffer")||(e.ttlBuffer=r),o.forEach((n=>{const r=i[n],o=r&&r.getSpec&&r.getSpec(),a=o&&o.supportedMediaTypes||["banner"];t.some((e=>s(a,e)))||(fe(((e,t)=>{const n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return`\n    ${e.code} is a ${n} ad unit\n    containing bidders that don't support ${n}: ${t}.\n    This bidder won't fetch demand.\n  `})(e,n)),e.bids=e.bids.filter((e=>e.bidder!==n)))}))})),n&&0!==n.length){n.forEach((e=>{const t=e.ortb2Imp?.ext?.tid||g[e.code]||ae();g.hasOwnProperty(e.code)||(g[e.code]=t),e.transactionId=t,ht(e,"ortb2Imp.ext.tid",t)}));const e=Fi.createAuction({adUnits:n,adUnitCodes:i,callback:p,cbTimeout:t,labels:o,auctionId:a,ortb2Fragments:d,metrics:c});let r=n.length;r>15&&me(`Current auction ${e.getAuctionId()} contains ${r} adUnits.`,n),i.forEach((t=>ea.setLatestAuctionForAdUnit(t,e.getAuctionId()))),e.callBids()}else ge("No adUnits configured. No bids requested."),p()}),"startAuction");Sa.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(Zr),n(qa),e.call(this,t)}),49),Sa.addAdUnits=function(e){me("Invoking pbjs.addAdUnits",arguments),Sa.adUnits.push.apply(Sa.adUnits,Ae(e)?e:[e]),Rt(Aa)},Sa.onEvent=function(e,t,n){me("Invoking pbjs.onEvent",arguments),Se(t)?!n||Ea[e].call(null,n)?kt(e,t,n):he('The id provided is not valid for event "'+e+'" and no handler was set.'):he('The event handler provided is not a function and was not set on event "'+e+'".')},Sa.offEvent=function(e,t,n){me("Invoking pbjs.offEvent",arguments),n&&!Ea[e].call(null,n)||_t(e,t,n)},Sa.getEvents=()=>(me("Invoking pbjs.getEvents"),Ot()),Sa.registerBidAdapter=function(e,t){me("Invoking pbjs.registerBidAdapter",arguments);try{Xr.registerBidAdapter(e(),t)}catch(e){he("Error registering bidder adapter : "+e.message)}},Sa.registerAnalyticsAdapter=function(e){me("Invoking pbjs.registerAnalyticsAdapter",arguments);try{Xr.registerAnalyticsAdapter(e)}catch(e){he("Error registering analytics adapter : "+e.message)}},Sa.createBid=function(e){return me("Invoking pbjs.createBid",arguments),Un(e)};const qa=[],Ma=tn("async",(e=>{e&&!Oe(e)?(me("Invoking pbjs.enableAnalytics for: ",e),Xr.enableAnalytics(e)):he("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");Sa.enableAnalytics=function(e){qa.push(Ma.bind(this,e))},Sa.aliasBidder=function(e,t,n){me("Invoking pbjs.aliasBidder",arguments),e&&t?Xr.aliasBidAdapter(e,t,n):he("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},Sa.aliasRegistry=Xr.aliasRegistry,P.getConfig("aliasRegistry",(e=>{"private"===e.aliasRegistry&&delete Sa.aliasRegistry})),Sa.getAllWinningBids=()=>Fi.getAllWinningBids(),Sa.getAllPrebidWinningBids=()=>Fi.getBidsReceived().filter((e=>e.status===T)),Sa.getHighestCpmBids=e=>ea.getWinningBids(e),Sa.markWinningBidAsUsed=e=>{const t=Fa(e,"Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function.");t.length>0&&Fi.addWinningBid(t[0])};const Fa=(e,t)=>{let n=[];return e.adUnitCode&&e.adId?n=Fi.getBidsReceived().filter((t=>t.adId===e.adId&&t.adUnitCode===e.adUnitCode)):e.adUnitCode?n=ea.getWinningBids(e.adUnitCode):e.adId?n=Fi.getBidsReceived().filter((t=>t.adId===e.adId)):fe(t),n};function La(e){e.forEach((e=>{if(void 0===e.called)try{e.call(),e.called=!0}catch(e){he("Error processing command :","prebid.js",e)}}))}Sa.getConfig=P.getAnyConfig,Sa.readConfig=P.readAnyConfig,Sa.mergeConfig=P.mergeConfig,Sa.mergeBidderConfig=P.mergeBidderConfig,Sa.setConfig=P.setConfig,Sa.setBidderConfig=P.setBidderConfig,Sa.que.push((()=>{window.addEventListener("message",jo,!1)})),Sa.cmd.push=e=>{if("function"==typeof e)try{e.call()}catch(e){he("Error processing command :",e.message,e.stack)}else he("Commands written into pbjs.cmd.push must be wrapped in a function")},Sa.que.push=Sa.cmd.push,Sa.processQueue=()=>{tn.ready(),La(Sa.que),La(Sa.cmd)},Sa.triggerBilling=e=>{const t=Fa(e,"Improper use of triggerBilling. It requires a bid with at least an adUnitCode or an adId to function."),n=t.find((t=>t.requestId===e.requestId))||t[0];if(t.length>0&&n)try{Xr.callBidBillableBidder(n)}catch(e){he("Error when triggering billing :",e)}else fe("The bid provided to triggerBilling did not match any bids received.")};const Wa=Sa,Va=["inScreen","inImage","inArticle","inBanner"],Ga={[si]:"display",[ai]:"video"},Ha="fixed",Ja=()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection||{};switch(e.type||e.effectiveType){case"wifi":case"ethernet":return Ha;case"cellular":case"wimax":return"mobile";default:return/iPad|iPhone|iPod/.test(navigator.userAgent)||/android/i.test(navigator.userAgent)?"unknown":Ha}};function Ka(e){return!!e.mediaTypes&&!!e.mediaTypes.video}function Xa(e){const t=e.params;return!!t.publisherId&&!!t.adUnitId&&Va.indexOf(t.placement)>-1}function Ya(e){const t=e.params,n=je(Object.keys(e.mediaTypes),(e=>Ga[e])),r={id:e.bidId,transactionId:e.ortb2Imp?.ext?.tid,sizes:e.sizes,supplyTypes:n,adUnitId:t.adUnitId,adUnitCode:e.adUnitCode,geom:es(e.adUnitCode),placement:t.placement,requestCount:e.bidderRequestsCount||1};return Ka(e)&&(r.videoParams=Qa(e)),r}function Qa(e){const t=e.mediaTypes.video||{};return t.playerSize&&(t.w=t.playerSize[0][0],t.h=t.playerSize[0][1]),t}function Za(){const e=(()=>{try{const e=performance.getEntriesByType("navigation")[0];return Math.round(e.responseStart-e.startTime)}catch(e){try{const e=performance.timing;return Math.round(e.responseStart-e.fetchStart)}catch(e){return 0}}})();return e>=0&&e<=performance.now()?e:0}function es(e){const t=document.getElementById(e);if(t){const e=window.scrollY,{top:n,left:r,width:i,height:o}=t.getBoundingClientRect();return{scrollY:e,top:n,left:r,width:i,height:o,viewport:{width:window.innerWidth,height:window.innerHeight}}}}function ts(e){if(!e)return;let t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){let n=e.mediaTypes.banner.sizes;Array.isArray(n[0])?t=n:t.push(n)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t}Zn({code:"seedtag",gvlid:157,aliases:["st"],supportedMediaTypes:[si,ai],isBidRequestValid:e=>Ka(e)?(e=>{const t=Qa(e);let n=!!e.params.publisherId&&!!e.params.adUnitId&&Ka(e)&&!!t.playerSize&&Ae(t.playerSize)&&t.playerSize.length>0;return"inStream"===e.params.placement?n&&"instream"===t.context:n&&"outstream"===t.context&&(e=>!!e.mediaTypes&&!!e.mediaTypes.banner)(e)&&Xa(e)})(e):Xa(e),buildRequests(e,t){const n={url:t.refererInfo.page,publisherToken:e[0].params.publisherId,cmp:!!t.gdprConsent,timeout:t.timeout,version:"8.47.0",connectionType:Ja(),auctionStart:t.auctionStart||Date.now(),ttfb:Za(),bidRequests:je(e,Ya),user:{topics:[],eids:[]}};if(n.cmp){const e=t.gdprConsent.gdprApplies;void 0!==e&&(n.ga=e),n.cd=t.gdprConsent.consentString}t.uspConsent&&(n.uspConsent=t.uspConsent),e[0].schain&&(n.schain=e[0].schain);let r=P.getConfig("coppa");return r&&(n.coppa=r),t.gppConsent?n.gppConsent={gppString:t.gppConsent.gppString,applicableSections:t.gppConsent.applicableSections}:t.ortb2?.regs?.gpp&&(n.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid}),t.ortb2?.user?.data&&(n.user.topics=t.ortb2.user.data),e[0]&&e[0].userIdAsEids&&(n.user.eids=e[0].userIdAsEids),{method:"POST",url:"https://s.seedtag.com/c/hb/bid",data:JSON.stringify(n)}},interpretResponse:e=>{const t=e.body;return t&&t.bids&&Ae(t.bids)?je(t.bids,(e=>function(e){const t="display"===(n=e.mediaType)?si:"video"===n?ai:n;var n;const r={requestId:e.bidId,cpm:e.price,width:e.width,height:e.height,creativeId:e.creativeId,currency:e.currency,netRevenue:!0,mediaType:t,ttl:e.ttl,nurl:e.nurl,meta:{advertiserDomains:e&&e.adomain&&e.adomain.length>0?e.adomain:[]}};return t===ai?r.vastXml=e.content:r.ad=e.content,r}(e))):[]},getUserSyncs(e,t){const n=t[0];if(e.iframeEnabled&&n){const e=n.body.cookieSync;return e?[{type:"iframe",url:e}]:[]}return[]},onTimeout(e){const t=(e=>{let t="";if(Ae(e)&&e[0]&&Ae(e[0].params)&&e[0].params[0]){const n=e[0].params[0],r=e[0].timeout;t="?publisherToken="+n.publisherId+"&adUnitId="+n.adUnitId+"&timeout="+r}return"https://s.seedtag.com/se/hb/timeout"+t})(e);$e(t)},onBidWon:e=>{e&&e.nurl&&$e(e.nurl)}}),a("seedtagBidAdapter");const ns="https://ms-cookie-sync.presage.io",rs="1.6.0";function is(){const e=window.top.document.documentElement.clientWidth?window.top.document.documentElement.clientWidth:0,t=window.top.innerWidth?window.top.innerWidth:0,n=window.top.outerWidth?window.top.outerWidth:0,r=window.top.screen.width?window.top.screen.width:0;return e||t||n||r}function os(){const e=window.top.document.documentElement.clientHeight?window.top.document.documentElement.clientHeight:0,t=window.top.innerHeight?window.top.innerHeight:0,n=window.top.outerHeight?window.top.outerHeight:0,r=window.top.screen.height?window.top.screen.height:0;return e||t||n||r}function as(e){if(!Se(e.getFloor))return 0;let t=e.getFloor({currency:"USD",mediaType:"banner",size:"*"});return"USD"===t.currency?t.floor:0}function ss(){try{return le()}catch(e){return ue()}}const ds={code:"ogury",gvlid:31,supportedMediaTypes:[si],isBidRequestValid:e=>{const t=ts(e),n=Boolean(t)&&t.length>0,r=!!e.params.adUnitId,i=!!e.params.assetKey;return n&&r&&i},getUserSyncs:(e,t,n,r)=>{const i=n&&n.consentString||"";return e.iframeEnabled?[{type:"iframe",url:`${ns}/user-sync.html?gdpr_consent=${i}&source=prebid`}]:e.pixelEnabled?[{type:"image",url:`${ns}/v1/init-sync/bid-switch?iab_string=${i}&source=prebid`},{type:"image",url:`${ns}/ttd/init-sync?iab_string=${i}&source=prebid`},{type:"image",url:`${ns}/xandr/init-sync?iab_string=${i}&source=prebid`}]:[]},buildRequests:(e,t)=>{const n={id:t.bidderRequestId,tmax:1e3,at:1,regs:{ext:{gdpr:t.gdprConsent&&t.gdprConsent.gdprApplies?1:0}},site:{domain:location.hostname,page:location.href},user:{ext:{consent:""}},imp:[],ext:{adapterversion:rs,prebidversion:"8.47.0"},device:{w:is(),h:os(),pxratio:window.devicePixelRatio}};return t.gdprConsent&&t.gdprConsent.consentString&&(n.user.ext.consent=t.gdprConsent.consentString),e.forEach((e=>{const t=ts(e).map((e=>({w:e[0],h:e[1]})));if(e.mediaTypes&&e.mediaTypes.hasOwnProperty("banner")){n.site.id=e.params.assetKey;const r=as(e);e.userId&&(n.user.ext.uids=e.userId),e.userIdAsEids&&(n.user.ext.eids=e.userIdAsEids),n.imp.push({id:e.bidId,tagid:e.params.adUnitId,...r&&{bidfloor:r},banner:{format:t},ext:{...e.params,timeSpentOnPage:document.timeline&&document.timeline.currentTime?document.timeline.currentTime:0}})}})),{method:"POST",url:"https://mweb-hb.presage.io/api/header-bidding-request",data:n,options:{contentType:"application/json"}}},interpretResponse:e=>{if(!e||!e.body||"object"!=typeof e.body||0===Object.keys(e.body).length)return fe("no response or body is malformed"),[];const t=[];return e.body.seatbid.forEach((e=>{e.bid.forEach((e=>{let n={requestId:e.impid,cpm:e.price,currency:"USD",width:e.w,height:e.h,creativeId:e.id,netRevenue:!0,ttl:60,ext:e.ext,meta:{advertiserDomains:e.adomain},nurl:e.nurl,adapterVersion:rs,prebidVersion:"8.47.0"};n.ad=e.adm,t.push(n)}))})),t},getFloor:as,onBidWon:e=>{ss().OG_PREBID_BID_OBJECT={...e&&{...e}},e&&e.nurl&&qt(e.nurl,null)},getWindowContext:ss,onTimeout:e=>{qt("https://ms-ads-monitoring-events.presage.io/bid_timeout",null,JSON.stringify({...e[0],location:window.location.href}),{method:"POST",contentType:"application/json"})}};Zn(ds),a("oguryBidAdapter");const cs=new WeakMap;function ls(e){return(e=de(e)).map((e=>{const[t,n]=e.split("x");return{w:parseInt(t,10),h:parseInt(n,10)}}))}const us=new Set(["pos","placement","plcmt","api","mimes","protocols","playbackmethod","minduration","maxduration","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","minbitrate","maxbitrate","delivery","playbackend"]),ps={instream:1},gs={1:si,2:ai,4:oi},ms=["request","imp","bidResponse","response"],[fs,hs,bs,ys]=ms,[vs,ws]=["default","pbs"],Is=new Set(ms),{registerOrtbProcessor:Cs,getProcessors:xs}=(()=>{const e={};return{registerOrtbProcessor(t){let{type:n,name:r,fn:i,priority:o=0,dialects:a=[vs]}=t;if(!Is.has(n))throw new Error(`ORTB processor type must be one of: ${ms.join(", ")}`);a.forEach((t=>{e.hasOwnProperty(t)||(e[t]={}),e[t].hasOwnProperty(n)||(e[t][n]={}),e[t][n][r]={priority:o,fn:i}}))},getProcessors:t=>e[t]||{}}})(),Ss={[fs]:{fpd:{priority:99,fn(e,t){gt(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:ma("ORTB request")},props:{fn(e,t){Object.assign(e,{id:e.id||ae(),test:e.test||0});const n=parseInt(t.timeout,10);isNaN(n)||(e.tmax=n)}}},[hs]:{fpd:{priority:99,fn(e,t){gt(e,t.ortb2Imp)}},id:{fn(e,t){e.id=t.bidId}},banner:{fn:(e,t,n)=>{if(n.mediaType&&n.mediaType!==si)return;const r=b(t,"mediaTypes.banner");if(r){const t={topframe:!0===Ke()?0:1};r.sizes&&(t.format=ls(r.sizes)),r.hasOwnProperty("pos")&&(t.pos=r.pos),e.banner=gt(t,e.banner)}}},pbadslot:{fn(e){const t=e.ext?.data?.pbadslot;t&&"string"==typeof t||delete e.ext?.data?.pbadslot}}},[bs]:{mediaType:{priority:99,fn:(e,t,n)=>{if(e.mediaType)return;const r=n.mediaType;if(!r&&!gs.hasOwnProperty(t.mtype))throw new Error("Cannot determine mediaType for response");e.mediaType=r||gs[t.mtype]}},banner:{fn:function(){let{createPixel:e=e=>qe(decodeURIComponent(e),Me)}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(t,n)=>{t.mediaType===si&&(n.adm&&n.nurl?(t.ad=n.adm,t.ad+=e(n.nurl)):n.adm?t.ad=n.adm:n.nurl&&(t.adUrl=n.nurl))}}()},props:{fn(e,t,n){Object.entries({requestId:n.bidRequest?.bidId,seatBidId:t.id,cpm:t.price,currency:n.ortbResponse.cur||n.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||n.ttl,netRevenue:n.netRevenue}).filter((e=>{let[t,n]=e;return void 0!==n})).forEach((t=>{let[n,r]=t;return e[n]=r})),e.meta||(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),t.ext?.dsa&&(e.meta.dsa=t.ext.dsa)}}}};function Ts(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.shift(),i=t.length>1?Ts(...t):t[0];return Object.fromEntries(ms.map((e=>[e,Object.assign({},r[e],i[e])])))}Ss[hs].native={fn:(e,t,n)=>{if(n.mediaType&&n.mediaType!==oi)return;let r=t.nativeOrtbRequest;r&&(r=Object.assign({},n.nativeRequest,r),r.assets?.length?e.native=gt({},{request:JSON.stringify(r),ver:r.ver},e.native):fe("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}},Ss[bs].native={fn:(e,t)=>{if(e.mediaType===oi){let n;if(n="string"==typeof t.adm?JSON.parse(t.adm):t.adm,!_e(n)||!Array.isArray(n.assets))throw new Error("ORTB native response contained no assets");e.native={ortb:n}}}},Ss[hs].video={fn:(e,t,n)=>{if(n.mediaType&&n.mediaType!==ai)return;const r=b(t,"mediaTypes.video");if(!Oe(r)){const t=Object.fromEntries(Object.entries(r).filter((e=>{let[t]=e;return us.has(t)})));if(r.playerSize){const e=ls(r.playerSize);e.length>1&&fe("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(t,e[0])}const n=ps[r.context];null!=n&&(t.placement=n),e.video=gt(t,e.video)}}},Ss[bs].video={fn:(e,t,n)=>{e.mediaType===ai&&(b(n.imp,"video.w")&&b(n.imp,"video.h")&&([e.playerWidth,e.playerHeight]=[n.imp.video.w,n.imp.video.h]),t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl))}};const As=ft((()=>Ts(Ss,xs(vs)))),ks=!0,_s=function(){let{context:e={},processors:t=As,overrides:n={},imp:r,request:i,bidResponse:o,response:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=new WeakMap;function d(e,r,i,o){let a;return function(){return null==a&&(a=function(){let a=i.bind(this,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!cs.has(e)){const t=Object.entries(e);t.sort(((e,t)=>(e=e[1].priority||0)===(t=t[1].priority||0)?0:e>t?-1:1)),cs.set(e,t.map((e=>{let[t,n]=e;return[t,n.fn]})))}const n=cs.get(e).filter((e=>{let[n]=e;return!t.hasOwnProperty(n)||t[n]})).map((function(e){let[n,r]=e;return t.hasOwnProperty(n)?t[n].bind(this,r):r}));return function(){const e=Array.from(arguments);n.forEach((t=>{t.apply(this,e)}))}}(t()[e]||{},n[e]||{}));return r&&(a=r.bind(this,a)),function(){try{return a.apply(this,arguments)}catch(e){o.call(this,e,...arguments)}}}()),a.apply(this,arguments)}}const c=d(hs,r,((e,t,n)=>{const r={};return e(r,t,n),r}),((e,t,n)=>{he("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:n})})),l=d(fs,i,((e,t,n,r)=>{const i={imp:t};return e(i,n,r),i}),((e,t,n,r)=>{throw he("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:n,context:r}),e})),u=d(bs,o,((e,t,n)=>{const r={};return e(r,t,n),r}),((e,t,n)=>{he("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:n})})),p=d(ys,a,((e,t,n,r)=>{const i={bids:t};return e(i,n,r),i}),((e,t,n,r)=>{throw he("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:n,context:r}),e}));return{toORTB(t){let{bidderRequest:n,bidRequests:r,context:i={}}=t;r=r||n.bids;const o={req:Object.assign({bidRequests:r},e,i),imp:{}};o.req.impContext=o.imp;const a=r.map((t=>{const r=Object.assign({bidderRequest:n,reqContext:o.req},e,i),a=c(t,r);if(null!=a){if(a.hasOwnProperty("id"))return Object.assign(r,{bidRequest:t,imp:a}),o.imp[a.id]=r,a;he("Converted ORTB imp does not specify an id, ignoring bid request",t,a)}})).filter(Boolean),d=l(a,n,o.req);return o.req.bidderRequest=n,null!=d&&s.set(d,o),d},fromORTB(e){let{request:t,response:n}=e;const r=s.get(t);if(null==r)throw new Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function i(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},n,e)}const o=Object.fromEntries((t.imp||[]).map((e=>[e.id,e]))),a=(n.seatbid||[]).flatMap((e=>(e.bid||[]).map((t=>{if(o.hasOwnProperty(t.impid)&&r.imp.hasOwnProperty(t.impid))return u(t,i(r.imp[t.impid],{imp:o[t.impid],seatbid:e,ortbResponse:n}));he("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)})))).filter(Boolean);return p(a,n,i(r.req))}}}({context:{ttl:300,netRevenue:ks}}),Es={code:"cpmstar",gvlid:1317,supportedMediaTypes:[si,ai],pageID:Math.floor(1e7*Math.random()),getMediaType:e=>null==e?si:b(e,"mediaTypes.video")?ai:si,getPlayerSize:e=>{var t=b(e,"mediaTypes.video.playerSize");return null==t?[640,440]:(null!=t[0]&&(t=t[0]),null==t||null==t[0]||null==t[1]?[640,440]:t)},isBidRequestValid:e=>"string"==typeof e.params.placementId&&!!e.params.placementId.length||"number"==typeof e.params.placementId,buildRequests:(e,t)=>{for(var n=[],r=0;r<e.length;r++){var i=e[r];const c=t.refererInfo.page?t.refererInfo.page:t.refererInfo.domain,l=se("endpoint",i.params),u=new URL("dev"==l?"https://dev.server.cpmstar.com/view.aspx":"staging"==l?"https://staging.server.cpmstar.com/view.aspx":"https://server.cpmstar.com/view.aspx"),p={},g=Es.getMediaType(i),m=Es.getPlayerSize(i);if(u.searchParams.set("media",g),g==ai&&(u.searchParams.set("fv",0),m&&(u.searchParams.set("w",m?.[0]),u.searchParams.set("h",m?.[1]))),u.searchParams.set("json","c_b"),u.searchParams.set("mv",1),u.searchParams.set("poolid",se("placementId",i.params)),u.searchParams.set("reachedTop",t.refererInfo.reachedTop),u.searchParams.set("requestid",i.bidId),u.searchParams.set("referer",c),i.schain&&i.schain.nodes){var o=i.schain,a="";a+=o.ver+","+o.complete;for(var s=0;s<o.nodes.length;s++){var d=o.nodes[s];a+="!"+(d.asi||"")+","+(d.sid||"")+","+(d.hp||"")+","+(d.rid||"")+","+(d.name||"")+","+(d.domain||"")}u.searchParams.set("schain",a)}t.gdprConsent&&(null!=t.gdprConsent.consentString&&u.searchParams.set("gdpr_consent",t.gdprConsent.consentString),null!=t.gdprConsent.gdprApplies&&u.searchParams.set("gdpr",t.gdprConsent.gdprApplies?1:0)),null!=t.uspConsent&&u.searchParams.set("us_privacy",t.uspConsent),P.getConfig("coppa")&&u.searchParams.set("tfcd",P.getConfig("coppa")?1:0);let f=i.adUnitCode;f&&(p.adUnitCode=f),g==ai?p.video=b(i,"mediaTypes.video"):g==si&&(p.banner=b(i,"mediaTypes.banner"));const h=_s.toORTB({bidderRequest:t,bidRequests:[i]});Object.assign(p,h),n.push({method:"POST",url:u.toString(),bidRequest:i,data:p})}return n},interpretResponse:(e,t)=>{var n=t.bidRequest,r=Es.getMediaType(n),i=[];Array.isArray(e.body)||(e.body=[e.body]);for(var o=0;o<e.body.length;o++){var a=e.body[o].creatives[0];if(!a)return void fe("cpmstarBidAdapter: server response failed check");var s=parseFloat(a.cpm)||0;if(!s)return void fe("cpmstarBidAdapter: server response failed check. Missing cpm");var d={requestId:a.requestid,cpm:s,width:a.width||0,height:a.height||0,currency:a.currency?a.currency:"USD",netRevenue:a.netRevenue?a.netRevenue:ks,ttl:a.ttl?a.ttl:300,creativeId:a.creativeid||0,meta:{advertiserDomains:a.adomain?a.adomain:[]}};if(a.hasOwnProperty("dealId")&&(d.dealId=a.dealId),r==si&&a.code)d.ad=a.code+(a.px_cr?"\n<img width=0 height=0 src='"+a.px_cr+"' />":"");else{if(r!=ai||!a.creativemacros||!a.creativemacros.HTML5VID_VASTSTRING)return he("bad response",a);var c=Es.getPlayerSize(n);null!=c&&(d.width=c[0],d.height=c[1]),d.mediaType=ai,d.vastXml=a.creativemacros.HTML5VID_VASTSTRING}i.push(d)}return i},getUserSyncs:(e,t)=>{const n=[];if(0==t.length||!t[0].body)return n;var r=t[0].body[0].syncs;if(!r||r.length<0)return n;for(var i=0;i<r.length;i++){var o=r[i];("image"===o.type&&e.pixelEnabled||"iframe"==o.type&&e.iframeEnabled)&&n.push(o)}return n}};Zn(Es),a("cpmstarBidAdapter");const Os={code:"smilewanted",gvlid:639,aliases:["smile","sw"],supportedMediaTypes:[si,ai,oi],isBidRequestValid:e=>{if(!e.params||!e.params.zoneId)return!1;if(b(e,"mediaTypes.video")){const t={...b(e,"mediaTypes.video",{}),...b(e,"params.video",{})};if(!t.context||![jn,Bn].includes(t.context))return!1}return!0},buildRequests:(e,t)=>(e=so(e)).map((e=>{const n={zoneId:e.params.zoneId,currencyCode:P.getConfig("currency.adServerCurrency")||"EUR",tagId:e.adUnitCode,sizes:e.sizes.map((e=>({w:e[0],h:e[1]}))),transactionId:e.ortb2Imp?.ext?.tid,timeout:t?.timeout,bidId:e.bidId,positionType:e.params.positionType||"",prebidVersion:"8.47.0"},r=(e=>{if(Se(e.getFloor)){const t=e.getFloor({currency:"USD",mediaType:"banner",size:e.sizes.map((e=>({w:e[0],h:e[1]})))});if(_e(t)&&!isNaN(t.floor)&&"USD"===t.currency)return parseFloat(t.floor)}return null})(e);r&&(n.bidfloor=r),e.params.bidfloor&&(n.bidfloor=e.params.bidfloor),t?.refererInfo&&(n.pageDomain=t.refererInfo.page||""),t?.gdprConsent&&(n.gdpr_consent=t.gdprConsent.consentString,n.gdpr=t.gdprConsent.gdprApplies),n.eids=e?.userIdAsEids;const i=b(e,"mediaTypes.video"),o=b(e,"mediaTypes.video.context");("video"===e.mediaType||i&&o===jn||i&&o===Bn)&&(n.context=o,n.videoParams=Je(i));const a=b(e,"mediaTypes.native");if(a){n.context="native",n.nativeParams=a;let t=b(e,"mediaTypes.native.image.sizes",[]);if(t.length>0){const e=Array.isArray(t[0])?t[0]:t;n.width=e[0]||n.width,n.height=e[1]||n.height}}return{method:"POST",url:"https://prebid.smilewanted.com",data:JSON.stringify(n)}})),interpretResponse:(e,t)=>{if(!e.body)return[];const n=[];try{const r=e.body,i=JSON.parse(t.data);if(r){const e=r.dealId||"",t={requestId:i.bidId,cpm:r.cpm,width:r.width,height:r.height,creativeId:r.creativeId,dealId:r.dealId,currency:r.currency,netRevenue:r.isNetCpm,ttl:r.ttl,ad:r.ad};if("video_instream"!==r.formatTypeSw&&"video_outstream"!==r.formatTypeSw||(t.mediaType="video",t.vastUrl=r.ad,t.ad=null,"video_outstream"===r.formatTypeSw&&(t.renderer=((e,t)=>{const n=Ht.install({id:e.bidId,url:t.OustreamTemplateUrl,loaded:!1});try{n.setRender(Rs)}catch(e){fe("Prebid Error calling setRender on newRenderer",e)}return n})(i,r))),"native"===r.formatTypeSw){const e=JSON.parse(r.ad),n=io(i.nativeParams);t.mediaType="native",t.native=uo(e,n)}e.length>0&&(t.dealId=e),t.meta={},r.meta?.advertiserDomains&&Ae(r.meta.advertiserDomains)&&(t.meta.advertiserDomains=r.meta.advertiserDomains),n.push(t)}}catch(e){he("Error while parsing smilewanted response",e)}return n},getUserSyncs:(e,t,n,r)=>{let i="";n&&"string"==typeof n.consentString&&("boolean"==typeof n.gdprApplies?i+=`?gdpr=${Number(n.gdprApplies)}&gdpr_consent=${n.consentString}`:i+=`?gdpr_consent=${n.consentString}`),r&&(i+=`${i?"&":"?"}us_privacy=${encodeURIComponent(r)}`);const o=[];return e.iframeEnabled&&o.push({type:"iframe",url:"https://csync.smilewanted.com"+i}),o}};function Rs(e){e.renderer.push((()=>{window.SmileWantedOutStreamInit({width:e.width,height:e.height,vastUrl:e.vastUrl,elId:e.adUnitCode})}))}function Us(e){return!e?.gdprApplies||!0===b(e,"vendorData.purpose.consents.1")}Zn(Os),a("smilewantedBidAdapter");const Bs={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"},js=["user.keywords"].concat(ga.flatMap((e=>["keywords","content.keywords"].map((t=>`${e}.${t}`)))));const Ds={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid"},Ps=["user.data"].concat(ga.map((e=>`${e}.content.data`)));function $s(e,t,n){return null==t?n:Te(t)?t:ke(t)?t.toString():void fe("Unsuported type for param: "+e+" required type: String")}function zs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords";const n=[];return Ue(e,((e,r)=>{if(Ae(e)){let n=[];Ue(e,(e=>{((e=$s(t+"."+r,e))||""===e)&&n.push(e)})),e=n}else{if(!Te(e=$s(t+"."+r,e)))return;e=[e]}e=e.filter((e=>""!==e));const i={key:r};e.length>0&&(i.value=e),n.push(i)})),n}function Ns(e){const t={};return e.forEach((e=>{if(-1!==e.indexOf("=")){let n=e.split("="),r=n[0],i=n[1];t.hasOwnProperty(r)?t[r].push(i):t[r]=[i]}else t.hasOwnProperty(e)||(t[e]=[])})),t}function qs(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return zs(gt(...t.map((e=>Object.fromEntries(Object.entries(e||{}).map((e=>{let[t,n]=e;return[t,ke(n)||Te(n)?[n]:n]})))))))}function Ms(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qs((e=>Ns(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){const e=new Set;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.filter((e=>e)).flatMap((e=>Array.isArray(e)?e:e.split(","))).map((e=>e.replace(/^\s*/,"").replace(/\s*$/,""))).filter((e=>e)).forEach((t=>e.add(t))),Array.from(e.keys())}(...js.map((t=>b(e,t))),...n)}(e)))(e),(e=>{let t={};return Ps.forEach((n=>{(b(e,n)||[]).forEach((e=>{const n=Ds[b(e,"ext.segtax")];n&&e.segment.forEach((e=>{t[n]?t[n].push(e.id):t[n]=[e.id]}))}))})),t})(e),...n)}function Fs(e){return e.replace(/(?:^|\.?)([A-Z])/g,((e,t)=>"_"+t.toLowerCase())).replace(/^_/,"")}function Ls(e,t){return Object.keys(e).forEach((n=>{var r,i;t[n]&&(Se(e[n])?t[n]=e[n](t[n]):t[n]=(r=e[n],i=t[n],"string"===r?i&&i.toString():"number"===r?Number(i):i),isNaN(t[n])&&delete t.key)})),t}function Ws(e,t){let n=[];for(let r=0;r<Math.ceil(e.length/t);r++){let i=r*t,o=i+t;n.push(e.slice(i,o))}return n}const Vs="appnexus",Gs=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],Hs=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],Js=["age","externalUid","external_uid","segments","gender","dnt","language"],Ks=["geo","device_id"],Xs=["enabled","dongle","member_id","debug_timeout"],Ys={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},Qs={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},Zs={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},ed=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,td=ti({bidderCode:Vs}),nd={code:Vs,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"uol",gvlid:32},{code:"adzymic",gvlid:32}],supportedMediaTypes:[si,ai,oi],isBidRequestValid:e=>!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code)),buildRequests:(e,t)=>{const n=(e=so(e)).map(rd),r=d(e,od);let i={};!0===P.getConfig("coppa")&&(i={coppa:!0}),r&&Object.keys(r.params.user).filter((e=>s(Js,e))).forEach((e=>{let t=Fs(e);if("segments"===e&&Ae(r.params.user[e])){let n=[];r.params.user[e].forEach((e=>{ke(e)?n.push({id:e}):_e(e)&&n.push(e)})),i[t]=n}else"segments"!==e&&(i[t]=r.params.user[e])}));const o=d(e,sd);let a;o&&o.params&&o.params.app&&(a={},Object.keys(o.params.app).filter((e=>s(Ks,e))).forEach((e=>a[e]=o.params.app[e])));const c=d(e,dd);let l;c&&c.params&&o.params.app&&o.params.app.id&&(l={appid:c.params.app.id});let u={},p={};const g=td.getCookie("apn_prebid_debug")||null;if(g)try{u=JSON.parse(g)}catch(e){he("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(Ys).forEach((e=>{let t=Ce(e);Te(t)&&""!==t&&(u[Ys[e]]=t,u.enabled=!0)})),u=Ls({member_id:"number",debug_timeout:"number"},u);const t=d(e,cd);t&&t.debug&&(u=t.debug)}u&&u.enabled&&Object.keys(u).filter((e=>s(Xs,e))).forEach((e=>{p[e]=u[e]}));const m=d(e,ad),f=m?parseInt(m.params.member,10):0,h=e[0].schain,b=d(e,ud),y={tags:[...n],user:i,sdk:{source:"pbjs",version:"8.47.0"},schain:h};b&&(y.iab_support={omidpn:"Appnexus",omidpv:"8.47.0"}),f>0&&(y.member_id=f),o&&(y.device=a),c&&(y.app=l);let v=Ms(Je(t&&t.ortb2),Je(P.getConfig("appnexusAuctionKeywords"))||{});if(v.length>0&&(y.keywords=v),P.getConfig("adpod.brandCategoryExclusion")&&(y.brand_category_uniqueness=!0),p.enabled&&(y.debug=p,me("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(p,null,4))),t&&t.gdprConsent&&(y.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){let e=t.gdprConsent.addtlConsent,n=e.substring(e.indexOf("~")+1);y.gdpr_consent.addtl_consent=n.split(".").map((e=>parseInt(e,10)))}if(t&&t.uspConsent&&(y.us_privacy=t.uspConsent),t?.gppConsent?y.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:t?.ortb2?.regs?.gpp&&(y.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){let e={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((e=>encodeURIComponent(e))).join(",")},n=t.refererInfo.canonicalUrl;Te(n)&&""!==n&&(e.rd_can=n),y.referrer_detection=e}if(d(e,ld)&&e.filter(ld).forEach((e=>{const t=((e,t)=>{const{durationRangeSec:n,requireExactDuration:r}=t.mediaTypes.video,i=(e=>{const{adPodDurationSec:t,durationRangeSec:n,requireExactDuration:r}=e,i=Math.min(...n),o=Math.floor(t/i);return r?Math.max(o,n.length):o})(t.mediaTypes.video),o=Math.max(...n);let a=((e,t)=>{let n=[];for(let r=0;r<t;r++){let t=_e(e)?Je(e):e;n.push(t)}return n})(...e.filter((e=>e.uuid===t.bidId)),i);if(r){const e=Ws(a,Math.ceil(i/n.length));n.forEach(((t,n)=>{e[n].map((e=>{pd(e,"minduration",t),pd(e,"maxduration",t)}))}))}else a.map((e=>pd(e,"maxduration",o)));return a})(n,e),r=y.tags.filter((t=>t.uuid!==e.bidId));y.tags=[...r,...t]})),e[0].userId){let t=[];e[0].userIdAsEids.forEach((e=>{!e||!e.uids||e.uids.length<1||e.uids.forEach((n=>{let r={source:e.source,id:n.id};"adserver.org"==e.source?r.rti_partner="TDID":"uidapi.com"==e.source&&(r.rti_partner="UID2"),t.push(r)}))})),t.length&&(y.eids=t)}if(t?.ortb2?.regs?.ext?.dsa){const e=t.ortb2.regs.ext.dsa,n={};if(["dsarequired","pubrender","datatopub"].forEach((t=>{ke(e[t])&&(n[t]=e[t])})),Ae(e.transparency)&&e.transparency.every((e=>_e(e)))){const t=[];e.transparency.forEach((e=>{Te(e.domain)&&""!=e.domain&&Ae(e.dsaparams)&&e.dsaparams.every((e=>ke(e)))&&t.push(e)})),t.length>0&&(n.transparency=t)}Oe(n)||(y.dsa=n)}n[0].publisher_id&&(y.publisher_id=n[0].publisher_id);const w=((e,t)=>{let n=[],r={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if(Us(t?.gdprConsent)||(i="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==Ce("apn_test").toUpperCase()&&!0!==P.getConfig("apn_test")||(r.customHeaders={"X-Is-Test":1}),e.tags.length>15){const o=Je(e);Ws(e.tags,15).forEach((e=>{o.tags=e;const a=JSON.stringify(o);n.push({method:"POST",url:i,data:a,bidderRequest:t,options:r})}))}else{const o=JSON.stringify(e);n={method:"POST",url:i,data:o,bidderRequest:t,options:r}}return n})(y,t);return w},interpretResponse:function(e,t){let{bidderRequest:n}=t;e=e.body;const r=[];if(!e||e.error){let t=`in response for ${n.bidderCode} adapter`;return e&&e.error&&(t+=`: ${e.error}`),he(t),r}if(e.tags&&e.tags.forEach((e=>{const t=(i=e)&&i.ads&&i.ads.length&&d(i.ads,(e=>e.rtb));var i;if(t&&(!0===Jt.get(n.bidderCode,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0)&&s(this.supportedMediaTypes,t.ad_type)){const i=((e,t,n)=>{const r=We(e.uuid,[n]),i=oe(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:r.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa})),t.buyer_member_id&&(o.meta=Object.assign({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),b(r,"mediaTypes.video.context")){case di:const r=Bs[t.brand_category_id]?Bs[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:r});const i=t.deal_priority;o.video={context:di,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:i},o.vastUrl=t.rtb.video.asset_url;break;case Bn:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){const r=d(n.bids,(t=>t.bidId===e.uuid));let i=b(r,"mediaTypes.video.renderer.options");i||(i=b(r,"renderer.options")),o.renderer=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Ht.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{r.setRender(gd)}catch(e){fe("Prebid Error calling setRender on renderer",e)}return r.setEventHandlers({impression:()=>ge("AppNexus outstream video impression event"),loaded:()=>ge("AppNexus outstream video loaded event"),ended:()=>{ge("AppNexus outstream renderer video event"),document.querySelector(`#${e}`).style.display="none"}}),r}(o.adUnitCode,t,i)}break;case jn:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[oi]){const e=t.rtb[oi];let n;if((e=>{if(!e||""===e)return!1;let t=e.match(ed),n=null!=t&&t.length>=1,r=e.match("trk.js"),i=null!=r&&r.length>=1;return e.startsWith("<script")&&i&&n})(t.viewability.config)){let e="pbjs_adid="+i+";pbjs_auc="+r.adUnitCode;n=t.viewability.config.replace("dom_id=%native_dom_id%",e)}let a=e.javascript_trackers;null==a?a=n:Te(a)?a=[a,n]:a.push(n),o[oi]={title:e.title,body:e.desc,body2:e.desc2,cta:e.ctatext,rating:e.rating,sponsoredBy:e.sponsored,privacyLink:e.privacy_link,address:e.address,downloads:e.downloads,likes:e.likes,phone:e.phone,price:e.price,salePrice:e.saleprice,clickUrl:e.link.url,displayUrl:e.displayurl,clickTrackers:e.link.click_trackers,impressionTrackers:e.impression_trackers,video:e.video,javascriptTrackers:a},e.main_img&&(o.native.image={url:e.main_img.url,height:e.main_img.height,width:e.main_img.width}),e.icon&&(o.native.icon={url:e.icon.url,height:e.icon.height,width:e.icon.width})}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(let e=0;e<t.rtb.trackers[0].impression_urls.length;e++){const n=qe(t.rtb.trackers[0].impression_urls[e]);o.ad+=n}}catch(e){he("Error appending tracking pixel",e)}}return o})(e,t,n);i.mediaType=(e=>{const t=e.ad_type;return t===ai?ai:t===oi?oi:si})(t),r.push(i)}})),e.debug&&e.debug.debug_info){let t="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;t=t.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),ge("https://console.appnexus.com/docs/understanding-the-debug-auction"),ge(t)}return r},getUserSyncs:(e,t,n,r,i)=>{if(e.iframeEnabled&&Us(n))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:(e,t,n,r)=>{let i=zs;if(!0===t){let e=null,t=P.getConfig("s2sConfig");_e(t)?e=b(t,"endpoint.p1Consent"):Ae(t)&&t.forEach((t=>{s(t.bidders,n.bids[0].bidder)&&(e=b(t,"endpoint.p1Consent"))})),e&&e.match("/openrtb2/prebid")&&(i=fd)}return e=Ls({member:"string",invCode:"string",placementId:"number",keywords:i,publisherId:"number"},e),t&&(Object.keys(e).forEach((t=>{let n=Fs(t);n!==t&&(e[n]=e[t],delete e[t])})),e.use_pmt_rule="boolean"==typeof e.use_payment_rule&&e.use_payment_rule,e.use_payment_rule&&delete e.use_payment_rule),e}};function rd(e){const t={};Object.keys(e.params).forEach((t=>{let n=Fs(t);n!==t&&(e.params[n]=e.params[t],delete e.params[t])})),t.sizes=id(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placement_id?t.id=parseInt(e.params.placement_id,10):t.code=e.params.inv_code;const n=Ce("ast_override_div");if(Te(n)&&""!==n){const r=n.split(",").find((t=>t.startsWith(`${e.adUnitCode}:`)));if(r){const e=r.split(":")[1];e&&(t.force_creative_id=parseInt(e,10))}}t.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,t.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,t.prebid=!0,t.disable_psa=!0;let r=(e=>{if(!Se(e.getFloor))return e.params.reserve?e.params.reserve:null;let t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return _e(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null})(e);if(r&&(t.reserve=r),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{let n=b(e,"mediaTypes.banner.pos")||b(e,"mediaTypes.video.pos");0!==n&&1!==n&&3!==n||(t.position=3===n?2:n)}e.params.traffic_source_code&&(t.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(t.private_sizes=id(e.params.private_sizes)),e.params.supply_type&&(t.supply_type=e.params.supply_type),e.params.pub_click&&(t.pubclick=e.params.pub_click),e.params.ext_inv_code&&(t.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(t.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(t.external_imp_id=e.params.external_imp_id);const i=qs(Te(o=b(e,"ortb2Imp.ext.data.keywords"))&&""!==o?Ns(o.split(/\s*(?:,)\s*/)):{},e.params?.keywords);var o;i.length>0&&(t.keywords=i);let a=b(e,"ortb2Imp.ext.gpid")||b(e,"ortb2Imp.ext.data.pbadslot");if(a&&(t.gpid=a),(e.mediaType===oi||b(e,`mediaTypes.${oi}`))&&(t.ad_types.push(oi),0===t.sizes.length&&(t.sizes=id([1,1])),e.nativeParams)){const n=(e=>{const t={};return Object.keys(e).forEach((n=>{const r=Zs[n]&&Zs[n].serverName||Zs[n]||n,i=Zs[n]&&Zs[n].requiredParams;if(t[r]=Object.assign({},i,e[n]),(r===Zs.image.serverName||r===Zs.icon.serverName)&&t[r].sizes){let e=t[r].sizes;(st(e)||Ae(e)&&e.length>0&&e.every((e=>st(e))))&&(t[r].sizes=id(t[r].sizes))}r===Zs.privacyLink&&(t.privacy_supported=!0)})),t})(e.nativeParams);t[oi]={layouts:[n]}}{const n=b(e,`mediaTypes.${ai}`),r=b(e,"mediaTypes.video.context");t.hb_source=n&&"adpod"===r?7:1,(e.mediaType===ai||n)&&t.ad_types.push(ai),(e.mediaType===ai||n&&"outstream"!==r)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((e=>s(Gs,e))).forEach((n=>{switch(n){case"context":case"playback_method":let r=e.params.video[n];r=Ae(r)?r[0]:r,t.video[n]=Qs[n][r];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&Ae(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),n&&(t.video=t.video||{},Object.keys(n).filter((e=>s(Hs,e))).forEach((e=>{switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=n[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===n[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=n[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){let r=n[e];r=Ae(r)?r[0]:r,r>=1&&r<=4&&(t.video.playback_method=r)}break;case"api":if(!t.video_frameworks&&Ae(n[e])){let r=n[e].map((e=>{let t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((e=>e));t.video_frameworks=r}break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof t.video.context){const e=n.plcmt,r=n.placement,i=n.startdelay,o=((e,t)=>{if(e)if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";if(-2===t)return"accompanying_content_post_roll"}else{if(3===e)return"interstitial";if(4===e)return"outstream"}})(e,i)||(e=>{if(e)return 2===e?"in-banner":3===e?"outstream":4===e?"in-feed":5===e?"intersitial":void 0})(r)||(e=>{if(e)return 0===e?"pre_roll":-1===e?"mid_roll":-2===e?"post_roll":void 0})(i);t.video.context=Qs.context[o]}}}))),e.renderer&&(t.video=Object.assign({},t.video,{custom_renderer_present:!0}))}return e.params.frameworks&&Ae(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks),b(e,`mediaTypes.${si}`)&&t.ad_types.push(si),0===t.ad_types.length&&delete t.ad_types,t}function id(e){let t=[],n={};if(Ae(e)&&2===e.length&&!Ae(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"==typeof e)for(let r=0;r<e.length;r++){let i=e[r];n={},n.width=parseInt(i[0],10),n.height=parseInt(i[1],10),t.push(n)}return t}function od(e){return!!e.params.user}function ad(e){return!!parseInt(e.params.member,10)}function sd(e){if(e.params)return!!e.params.app}function dd(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function cd(e){return!!e.debug}function ld(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===di}function ud(e){let t=!1;const n=e.params,r=e.params.video;return n.frameworks&&Ae(n.frameworks)&&(t=s(e.params.frameworks,6)),!t&&r&&r.frameworks&&Ae(r.frameworks)&&(t=s(e.params.video.frameworks,6)),t}function pd(e,t,n){Oe(e.video)&&(e.video={}),e.video[t]=n}function gd(e,t){(e=>{try{const t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}})(e.adUnitCode),(e=>{try{const t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}})(e.adUnitCode),e.renderer.push((()=>{(t?.defaultView||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},md.bind(null,e))}))}function md(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function fd(e){let t="";return Object.keys(e).forEach((n=>{Te(e[n])?""!==e[n]?t+=`${n}=${e[n]},`:t+=`${n},`:Ae(e[n])&&(""===e[n][0]?t+=`${n},`:e[n].forEach((e=>{t+=`${n}=${e},`})))})),t=t.substring(0,t.length-1),t}function hd(e){return t=>it(t,e)}function bd(e){const t=(e=>{let t;return Ge()&&(t=d(window.googletag.pubads().getSlots(),hd(e))),t})(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}}Zn(nd),a("appnexusBidAdapter");const yd="medianet",vd="trustedstack";let wd=fr(),Id={};window.mnet=window.mnet||{},window.mnet.queue=window.mnet.queue||[],Id.urlData={domain:wd.domain,page:wd.page,isTop:wd.reachedTop};const Cd=[{code:vd,gvlid:1288}];function xd(){try{return window.top.document.referrer}catch(e){return document.referrer}}function Sd(e,t){const n=t.refererInfo;let r={domain:(e=e||{}).domain||n.domain,page:e.page||n.page,ref:e.ref||xd(),topMostLocation:n.topmostLocation,isTop:e.isTop||n.reachedTop};return Object.assign(r,(()=>{if(Id.pageMeta)return Id.pageMeta;let e=Td('link[rel="canonical"]',"href"),t=Td('meta[property="og:url"]',"content"),n=Td('meta[name="twitter:url"]',"content");return Id.pageMeta=Object.assign({},e&&{canonical_url:e},t&&{og_url:t},n&&{twitter_url:n}),Id.pageMeta})())}function Td(e,t){let n=((e,t)=>{try{let n=le().document.querySelector(e);if(null!==n&&n[t])return n[t]}catch(e){}})(e,t);return n&&(e=>{let t=le().document.createElement("a");return t.href=e,t.href})(n)}function Ad(e,t){return e.filter((e=>e.type===t))}function kd(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function _d(e,t){const n=b(e,"params"),r=b(t,"gdprConsent"),i=b(t,"uspConsent"),a=b(e,"userId"),s=b(e,"schain")||{},d=Pd.getWindowSize(),c=!(!r||!r.gdprApplies),l=!!i,u=!!P.getConfig("coppa");return Object.assign({},{customer_id:n.cid},{prebid_version:o().version},{gdpr_applies:c},c&&{gdpr_consent_string:r.consentString||""},{usp_applies:l},l&&{usp_consent_string:i||""},{coppa_applies:u},-1!==d.w&&-1!==d.h&&{screen:d},a&&{user_id:a},o().medianetGlobals.analyticsEnabled&&{analytics:!0},!Oe(s)&&{schain:s})}function Ed(e,t,n,r){let i=e.getFloor({currency:"USD",mediaType:t,size:n});n.length>1&&(i.size=n),i.mediaType=t,r.push(i)}function Od(e){return e.reduce(((e,t)=>t.h*t.w<e.h*e.w?t:e))}function Rd(e,t){let n=t.w*t.h,r=Pd.getWindowSize(),i={x:e.x+t.w,y:e.y+t.h};return 0===n||-1===r.w||-1===r.h?0:(o=e,a=i,s={x:0,y:0},d={x:r.w,y:r.h},(o.x>d.x||a.x<s.x||o.y>d.y||a.y<s.y?0:(Math.min(a.x,d.x)-Math.max(o.x,s.x))*(Math.min(a.y,d.y)-Math.max(o.y,s.y)))/n);var o,a,s,d}function Ud(e,t){return(e===vd?"https://prebid.trustedstack.com/rtb/trustedstack":"https://prebid.media.net/rtb/prebid")+"?cid="+encodeURIComponent(t)}function Bd(e,t){t=Ae(t)&&t||[];let n={logid:"kfk",evtid:"projectevents",project:"prebid"};return n.acid=b(t,"0.auctionId")||"",n.cid=o().medianetGlobals.cid||"",n.crid=t.map((e=>b(e,"params.0.crid")||e.adUnitCode)).join("|"),n.adunit_count=t.length||0,n.dn=Id.urlData.domain||"",n.requrl=Id.urlData.page||"",n.istop=Id.urlData.isTop||"",n.event=e.name||"",n.value=e.value||"",n.rd=e.related_data||"",n}function jd(e,t){$e(ut({protocol:"https",hostname:"qsearch-a.akamaihd.net/log",search:Bd(e,t)}))}function Dd(e){const t=b(e,"context")||"",n=b(e,"vto");"outstream"==t&&n&&(e.renderer=(()=>{const e=Ht.install({url:"https://prebid.media.net/video/bundle.js"});return e.setRender((e=>{window.mnet.queue.push((()=>{const t={width:e.width,height:e.height,vastTimeout:e.vto,maxAllowedVastTagRedirects:e.mavtr,allowVpaid:e.avp,autoPlay:e.ap,preload:e.pl,mute:e.mt},n=e.dfp_id,r=bd(n).divId||n;window.mnet.mediaNetoutstreamPlayer(e,r,t)}))})),e})())}o().medianetGlobals=o().medianetGlobals||{};const Pd={code:yd,gvlid:142,aliases:Cd,supportedMediaTypes:[si,oi,ai],isBidRequestValid:e=>e.params?e.params.cid&&Te(e.params.cid)&&!Re(e.params.cid)?(Object.assign(o().medianetGlobals,!o().medianetGlobals.cid&&{cid:e.params.cid}),!0):(he(`${yd} : cid should be a string`),!1):(he(`${yd} : Missing bid parameters`),!1),buildRequests:(e,t)=>{let n=((e,t)=>({site:Sd(e[0].params.site,t),ext:_d(e[0],t),id:e[0].auctionId,imp:e.map((e=>function(e){let t={id:e.bidId,transactionId:e.ortb2Imp?.ext?.tid,ext:{dfp_id:e.adUnitCode,display_count:e.bidRequestsCount},all:e.params};e.ortb2Imp&&(t.ortb2Imp=e.ortb2Imp);let n=b(e,"mediaTypes.banner.sizes")||[];const r=b(e,"mediaTypes.video")||{},i=b(e,"params.video")||{},o=Object.assign({},i,r);var a;if(Oe(o)||(t.video=o),n.length>0&&(t.banner=Ae(a=n)&&2===a.length&&!Ae(a[0])?[kd(a)]:a.map((e=>kd(e)))),e.nativeParams)try{t.native=JSON.stringify(e.nativeParams)}catch(e){he(`${yd} : Incorrect JSON : bidRequest.nativeParams`)}e.params.crid&&(t.tagid=e.params.crid.toString());let s=parseFloat(e.params.bidfloor||e.params.bidFloor);s&&(t.bidfloor=s);const d=(e=>{let t=document.getElementById(e);if(!t&&-1!==e.indexOf("/")){const{divId:n}=bd(e);Te(n)&&(t=document.getElementById(n))}if(t&&t.getBoundingClientRect){const e=t.getBoundingClientRect();let n={};return n.top_left={y:e.top,x:e.left},n.bottom_right={y:e.bottom,x:e.right},n}return null})(e.adUnitCode);if(d&&t.banner&&0!==t.banner.length){let e=(e=>({top_left:{x:e.top_left.x+window.pageXOffset,y:e.top_left.y+window.pageYOffset},bottom_right:{x:e.bottom_right.x+window.pageXOffset,y:e.bottom_right.y+window.pageYOffset}}))(d);t.ext.coordinates=e,t.ext.viewability=Rd(d.top_left,Od(t.banner)),Rd(e.top_left,Od(t.banner))>.5?t.ext.visibility=1:t.ext.visibility=2}else t.ext.visibility=0;const c=(e=>{let t=[];return"function"==typeof e.getFloor&&[si,ai,oi].forEach((n=>{e.mediaTypes.hasOwnProperty(n)&&(n==si?e.mediaTypes.banner.sizes.forEach((r=>{Ed(e,n,r,t)})):Ed(e,n,"*",t))})),t})(e);return c&&c.length>0&&(t.bidfloors=c),t}(e))),ortb2:t.ortb2,tmax:t.timeout}))(e=so(e),t);return{method:"POST",url:Ud(t.bidderCode,n.ext.customer_id),data:JSON.stringify(n)}},interpretResponse:(e,t)=>{let n=[];if(!e||!e.body)return me(`${yd} : response is empty`),n;let r=e.body.bidList;return Ae(r)&&0!==r.length?(n=r.filter((e=>(e=>!1===e.no_bid&&parseFloat(e.cpm)>0)(e))),n.forEach(Dd),n):(me(`${yd} : no bids`),n)},getUserSyncs:(e,t)=>{let n=!Oe(r=t)&&r[0].body&&r[0].body.ext&&Ae(r[0].body.ext.csUrl)?r[0].body.ext.csUrl:[];var r;return e.iframeEnabled?Ad(n,"iframe"):e.pixelEnabled?Ad(n,"image"):void 0},onTimeout:e=>{try{jd({name:"client_timeout",value:e.length,related_data:e[0].timeout||P.getConfig("bidderTimeout")},e)}catch(e){}},onBidWon:e=>{try{jd({name:"client_bid_won",value:e.cpm},[e])}catch(e){}},clearMnData:()=>{Id={}},getWindowSize:()=>({w:window.screen.width||-1,h:window.screen.height||-1})};Zn(Pd),a("medianetBidAdapter");const $d="gumgum",zd=ti({bidderCode:$d}),Nd={t:0,rq:8,pbv:"8.47.0"},qd=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"];let Md={},Fd=null;function Ld(e){const t=e=>new RegExp(`[?#&](${e}=(.*?))($|&)`,"i");let r,i,o,a,s,d,c={};try{r=n.g.top,i=r.screen,o=e||""}catch(e){return he(e),c}var l;return c={vw:r.innerWidth,vh:r.innerHeight,sw:i.width,sh:i.height,pu:(l=o,["ggad","ggdeal"].reduce(((e,n)=>{const r=l.match(t(n));return r?(r[1]&&(e=e.replace(r[1],"")),r[3]&&(e=e.replace(r[3],"")),e):e}),l)),ce:zd.cookiesAreEnabled(),dpr:r.devicePixelRatio||1,jcsi:JSON.stringify(Nd),ogu:(()=>{let e="";const t=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']");return e=t?t.content:null,e})()},d=(()=>{const e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection),t=e&&(e.downlink||e.bandwidth);return t?Math.round(1024*t):null})(),d&&(c.ns=d),a=(o.match(t("ggad"))||[0,0,0])[2],a&&(c[isNaN(a)?"eAdBuyId":"adBuyId"]=a),s=(o.match(t("ggdeal"))||[0,0,0])[2],s&&(c.ggdeal=s),c}function Wd(e,t){return e.replace("AD_JSON",window.btoa(JSON.stringify(t)))}function Vd(e){let t=0,n=0,r=0;return e.forEach((e=>{let[i,o]=e,a=i>o?i:o;(a>r||a===r&&i>=t&&o>=n)&&(r=a,t=i,n=o)})),[t,n]}function Gd(e,t){const n={};if(e.inScreenPubID&&(n.pubId=e.inScreenPubID,n.pi=2),e.inScreen&&(n.t=e.inScreen,n.pi=2),e.inSlot){const[r,i]=Vd(t);n.maxw=r,n.maxh=i,n.si=e.inSlot,n.pi=3,n.bf=t.reduce(((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`),"")}return e.ICV&&(n.ni=e.ICV,n.pi=5),e.videoPubID&&(n.pubId=e.videoPubID,n.pi=7),e.video&&(n.t=e.video,n.pi=7),e.inVideo&&(n.t=e.inVideo,n.pi=6),n}const Hd={code:$d,gvlid:61,aliases:["gg"],isBidRequestValid:e=>{const{params:t,adUnitCode:n}=e,r=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(Md[r])return fe(`[GumGum] Please check the implementation for ${r} for the placement ${n}`),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return fe(`[GumGum] No product selected for the placement ${n}, please check your implementation.`),!1}return!(t.bidfloor&&("number"!=typeof t.bidfloor||!isFinite(t.bidfloor))&&(fe("[GumGum] bidfloor must be a Number"),1))},buildRequests:(e,t)=>{const n=[],r=t&&t.gdprConsent,i=t&&t.uspConsent,o=t&&t.gppConsent,a=t&&t.timeout,s=!0===P.getConfig("coppa")?1:0,d=t&&t.refererInfo&&t.refererInfo.page;return Ue(e,(e=>{const{bidId:c,mediaTypes:l={},params:u={},schain:p,userId:g={},ortb2Imp:m,adUnitCode:f=""}=e,{currency:h,floor:y}=((e,t,n)=>{const r=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof n.getFloor){const{currency:e,floor:o}=n.getFloor({mediaType:r,size:"*"});o&&(i.floor=o),e&&(i.currency=e),t&&o&&"USD"===e&&(i.floor=Math.max(t,parseFloat(o)))}else t&&(i.floor=t);return i})(l,u.bidfloor,e),v=(e=>{const t=["uid","eid","lipbid","envelope"];return Object.keys(e).reduce(((n,r)=>{const i=e[r];switch(typeof i){case"string":n[r]=i;break;case"object":const e=t.filter((e=>i.hasOwnProperty(e)));e.length&&(n[r]=i[e[0]])}return n}),{})})(g),w=b(m,"ext.data.pbadslot")||b(m,"ext.data.adserver.adslot");let I=[1,1],C={displaymanager:"Prebid.js - gumgum",displaymanagerver:"8.47.0"};const x=new Date,S=x.getTime(),T=x.getTimezoneOffset();if(C.lt=S,C.to=T,g&&g.pubProvidedId){let e=(e=>{let t=JSON.stringify(e);if(t.length<=1800)return t;{const n=e.slice(0,Math.floor(e.length*(1800/t.length)));return t=JSON.stringify(n),t}})(g.pubProvidedId.filter((e=>qd.includes(e.source))));C.pubProvidedId=e}g&&g.id5id&&g.id5id.uid&&g.id5id.ext&&(C.id5Id=g.id5id.uid||null,C.id5IdLinkType=g.id5id.ext.linkType||null),f&&(C.aun=f);for(const e in v)C[e]=v[e];if(l.banner?I=l.banner.sizes:l.video&&(I=l.video.playerSize,C=(e=>{const{minduration:t,maxduration:n,linearity:r,startdelay:i,placement:o,plcmt:a,protocols:s=[],playerSize:d=[]}=e,c=de(d),[l,u]=c[0]&&c[0].split("x");let p="";s.length&&(p=s.join(","));const g={mind:t,maxd:n,li:r,sd:i,pt:o,pr:p,viw:l,vih:u};return null!=a&&(g.vplcmt=a),g})(l.video)),w&&(C.gpid=w),Fd&&(C.pv=Fd),y&&(C.fp=y,C.fpc=h),u.iriscat&&"string"==typeof u.iriscat&&(C.iriscat=u.iriscat),u.irisid&&"string"==typeof u.irisid&&(C.irisid=u.irisid),u.zone||u.pubId)if(u.zone?C.t=u.zone:C.pubId=u.pubId,C.pi=2,u.slot){const[e,t]=Vd(I);C.maxw=e,C.maxh=t,C.si=u.slot,C.pi=3,C.bf=I.reduce(((e,t)=>`${e}${e&&","}${t[0]}x${t[1]}`),"")}else u.native?(C.ni=u.native,C.pi=5):l.video?C.pi=2===l.video.linearity?6:7:u.product&&"skins"===u.product.toLowerCase()&&(C.pi=8);else C={...C,...Gd(u,I)};r&&(C.gdprApplies=r.gdprApplies?1:0),C.gdprApplies&&(C.gdprConsent=r.consentString),i&&(C.uspConsent=i),o?(C.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",C.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!o&&t?.ortb2?.regs?.gpp&&(C.gppString=t.ortb2.regs.gpp,C.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):"");const A=b(t,"ortb2.regs.ext.dsa");A&&(C.dsa=JSON.stringify(A)),s&&(C.coppa=s),p&&p.nodes&&(C.schain=(e=>{let t=`${e.ver},${e.complete}`;return e.nodes.map((e=>{t+=`!${encodeURIComponent(e.asi||"")},`,t+=`${encodeURIComponent(e.sid||"")},`,t+=`${encodeURIComponent(e.hp||"")},`,t+=`${encodeURIComponent(e.rid||"")},`,t+=`${encodeURIComponent(e.name||"")},`,t+=`${encodeURIComponent(e.domain||"")}`})),t})(p)),n.push({id:c,tmax:a,tId:m?.ext?.tid,pi:C.pi,selector:u.selector,sizes:I,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:Object.assign(C,Ld(d))})})),n},interpretResponse:(e,t)=>{const n=[],r=e.body;if(!r||r.err){const e=t.data||{},n=e.si||e.ni||e.t||e.pubId,i=r?r.err.drt:18e5;Md[n]={productId:e.pi,timestamp:(new Date).getTime()},setTimeout((()=>{Md[n]&&delete Md[n]}),i),fe(`[GumGum] Please check the implementation for ${n}`)}const{ad:{price:i,id:o,markup:a,cur:d,width:c,height:l,maxw:u,maxh:p},cw:g,pag:{pvid:m},jcsi:f,meta:{adomain:h,mediaType:b}}=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},r);let y=t.data||{},v=y.pi,w=6===v||7===v?ai:si,I=3===v&&9===y.si,C={advertiserDomains:h||[],mediaType:b||w},x=de(t.sizes);if(u&&p)x=[`${u}x${p}`];else if(5===v&&s(x,"1x1"))x=["1x1"];else if(2===v&&s(x,"1x1")||3===v){const e=t.sizes&&t.sizes.reduce(((e,t)=>{const[n,r]=t;return c===n&&l===r&&e.push(t.join("x")),e}),[])||[];x=e.length?e:de(t.sizes)}let[S,T]=x[0].split("x");return f&&(r.jcsi=Nd),Fd=m,o&&n.push({ad:g?Wd(g,Object.assign({},r,{bidRequest:t})):a,...w===ai&&{ad:a,vastXml:a},mediaType:w,cpm:I?.1:i,creativeId:o,currency:d||"USD",height:T,netRevenue:!0,requestId:t.id,ttl:60,width:S,meta:C}),n},getUserSyncs:(e,t)=>t.map((e=>e.body&&e.body.pxs&&e.body.pxs.scr||[])).reduce(((e,t)=>e.concat(t)),[]).map((e=>({type:"f"===e.t?"iframe":"image",url:e.u}))),supportedMediaTypes:[si,ai]};Zn(Hd),a("gumgumBidAdapter");const Jd=ti({bidderCode:"amx"}),Kd=/\.com?\.\w{2,4}$/,Xd=/^\s*<\??(?:vast|xml)/i,Yd="https://1x1.a-mo.net/",Qd=Yd+"hbx/",Zd=Yd+"e",ec="__amuidpb";function tc(e,t){return null==e?[]:e.map(t).reduce(((e,t)=>null!=t&&e.concat(t)),[])}const nc=(e,t)=>null==e||typeof e===t;function rc(e){const t=e.hostname.split("."),n=t.slice(t.length-(Kd.test(e.hostname)?3:2)).join(".");return btoa(n).replace(/=+$/,"")}const ic=encodeURIComponent;function oc(){try{return Jd.getDataFromLocalStorage(ec)}catch(e){return null}}function ac(e){const t=[];return Object.keys(e||{}).forEach((n=>{t.push(ic(n)+"="+ic(String(e[n])))})),ic(t.join("&"))}function sc(e){const t={};return Ue(e,(e=>{t[e.bidId]=(e=>{const t=(c=e.sizes,l=e.mediaTypes,c.concat(b(l,`${si}.sizes`,[])||[]).concat(b(l,`${ai}.sizes`,[])||[]).sort(((e,t)=>t[0]*t[1]-e[0]*e[1]))[0]||[0,0]),n=e.mediaType===ai||ai in e.mediaTypes,r=n||t[1]>100,i=b(e,"params.tagId"),o=null!=e.params&&"string"==typeof e.params.adUnitId&&""!==e.params.adUnitId?e.params.adUnitId:e.adUnitCode,a=[e.sizes,b(e,`mediaTypes.${si}.sizes`,[])||[],b(e,`mediaTypes.${ai}.sizes`,[])||[]],s={au:o,av:r,vd:b(e,`mediaTypes.${ai}`,{})||{},vr:n,ms:a,aw:t[0],ah:t[1],tf:0,sc:e.schain||{},f:(d=lc(e),"number"==typeof d&&isFinite(d)&&d>0?d:cc),rtb:e.ortb2Imp};var d,c,l;return"string"==typeof i&&i.length>0&&(s.i=i),s})(e)})),t}const dc=(e,t)=>$e(`${Qd}g_${e}?${ct({...t,ts:Date.now(),eid:oe()})}`),cc=0;function lc(e){if(!Se(e.getFloor))return b(e,"params.floor",cc);try{return e.getFloor({currency:"USD",mediaType:"*",size:"*",bidRequest:e}).floor}catch(e){return he("call to getFloor failed: ",e),cc}}function uc(e,t,n){return b(e,"refererInfo."+t,n)}function pc(e,t){if(null==e)return!1;const n=e[t];return null!=n&&!!("*"===n.bidders||Ae(n.bidders)&&-1!==n.bidders.indexOf("amx"))&&(null==n.filter||"include"===n.filter)}function gc(){const e=P.getConfig("userSync");if(null==e)return{d:0,l:0,t:0,e:!0};const t={d:e.syncDelay,l:e.syncsPerBidder,t:0,e:e.syncEnabled};return pc(e.filterSettings,"all")?(t.t=0,t):(pc(e.filterSettings,"iframe")&&(t.t|=2),pc(e.filterSettings,"image")&&(t.t|=1),t)}function mc(e){return null!=e?.gppConsent?e.gppConsent:e?.ortb2?.regs?.gpp??{gppString:"",applicableSections:""}}function fc(e){if(null==e.refererInfo)return{r:"",t:!1,c:"",l:0,s:[]};const t=e.refererInfo;return{r:t.topmostLocation,t:t.reachedTop,l:t.numIframes,s:t.stack,c:t.canonicalUrl}}const hc={code:"amx",gvlid:737,supportedMediaTypes:[si,ai],isBidRequestValid:e=>nc(b(e,"params.endpoint",null),"string")&&nc(b(e,"params.tagId",null),"string"),buildRequests(e,t){const n=(r=t,lt(r.refererInfo?.topmostLocation||window.location.href));var r;const i=b(e[0],"params.tagId",null),o=b(e[0],"params.testMode",0),a=null!=e[0]?e[0]:{bidderRequestsCount:0,bidderWinsCount:0,bidRequestsCount:0};var s,d;return{data:{a:ae(),B:0,b:n.host,brc:a.bidderRequestsCount||0,bwc:a.bidderWinsCount||0,trc:a.bidRequestsCount||0,tm:(d=o,!0===d||1===d||"true"===d),V:"8.47.0",vg:"pbjs",i:o&&null!=i?i:rc(n),l:{},f:.01,cv:"pba1.3.4",st:"prebid",h:screen.height,w:screen.width,gs:b(t,"gdprConsent.gdprApplies",""),gc:b(t,"gdprConsent.consentString",""),gpp:mc(t),u:uc(t,"page",n.href),do:uc(t,"site",n.hostname),re:uc(t,"ref"),am:oc(),usp:t.uspConsent||"1---",smt:1,d:"",m:sc(e),cpp:P.getConfig("coppa")?1:0,fpd2:t.ortb2,tmax:t.timeout,amp:uc(t,"isAmp",null),ri:fc(t),sync:gc(),eids:(s=e.reduce(((e,t)=>(null==t||null==t.userIdAsEids||Ue(t.userIdAsEids,(t=>{null!=t&&(e[t.source]=t)})),e)),{}),null!=Object.values?Object.values(s):Object.keys(s).map((e=>s[e])))},method:"POST",browsingTopics:!0,url:b(e[0],"params.endpoint","https://prebid.a-mo.net/a/c"),withCredentials:!0}},getUserSyncs(e,t,n,r,i){const o={url:`https://prebid.a-mo.net/isyn?${ct({gdpr_consent:ic(n?.consentString||""),gdpr:ic(n?.gdprApplies?1:0),us_privacy:ic(r||""),gpp:ic(i?.gppString||""),gpp_sid:ic(i?.applicableSections||"")})}`,type:"iframe"};if(null==t||0===t.length)return e.iframeEnabled?[o]:[];const a=[];let s=!1;return Ue(t,(t=>{let{body:n}=t;null!=n&&null!=n.p&&n.p.hreq&&Ue(n.p.hreq,(t=>{const n=-1!==t.indexOf("__st=iframe")?"iframe":"image";(e.iframeEnabled||"image"===n)&&(s=s||"iframe"===n||-1!==t.indexOf("cchain"),a.push({url:t,type:n}))}))})),!s&&a.length<2&&a.push(o),a},interpretResponse(e,t){const n=e.body;return null==n||"string"==typeof n?[]:(n.am&&"string"==typeof n.am&&(e=>{try{Jd.setDataInLocalStorage(ec,e)}catch(e){}})(n.am),tc(Object.keys(n.r),(e=>tc(n.r[e],(n=>n.b.map((n=>{const r=function(e){return null!=(t=e.adm)&&Xd.test(t)?ai:si;var t}(n),i=n.adm;if(null==i)return null;const o=((e,t,n)=>{if(null!=e.w&&e.w>1&&null!=e.h&&e.h>1)return[e.w,e.h];const r=t.m[n];return null==r?[0,0]:[r.aw,r.ah]})(n,t.data,e),a=r===si?240:300;return{requestId:e,cpm:n.price,width:o[0],height:o[1],creativeId:n.crid,currency:"USD",netRevenue:!0,[r===ai?"vastXml":"ad"]:i,meta:{advertiserDomains:n.adomain,mediaType:r},mediaType:r,ttl:"number"==typeof n.exp?n.exp:a}})))).filter((e=>null!=e)))))},onSetTargeting(e){null!=e&&dc("pbst",{A:e.bidder,w:e.width,h:e.height,bid:e.adId,c1:e.mediaType,np:e.cpm,aud:e.requestId,a:e.adUnitCode,c2:ac(e.adserverTargeting),cn3:e.timeToRespond})},onTimeout(e){if(null==e||!e.length)return;let t=null;const n=e.map((e=>{const n=e.params||{},r=(e=>null==e.sizes||0===e.sizes.length?[0,0]:e.sizes[0])(e),{domain:i,page:o,ref:a}=null!=e.ortb2&&null!=e.ortb2.site?e.ortb2.site:{};return null==t&&(t={do:i,u:o,U:oc(),re:a,V:"8.47.0",vg:"pbjs"}),{A:e.bidder,mid:n.tagId,a:n.adunitId||e.adUnitCode,bid:e.bidId,n:"g_pbto",aud:e.transactionId,w:r[0],h:r[1],cn:e.timeout,cn2:e.bidderRequestsCount,cn3:e.bidderWinsCount}})),r=JSON.stringify({c:t,e:n});Mt(Zd,{body:r,keepalive:!0,withCredentials:!0,method:"POST"}).catch((e=>{}))},onBidWon(e){null!=e&&dc("pbwin",{A:e.bidder,w:e.width,h:e.height,bid:e.adId,C:e.mediaType===si?0:1,np:e.cpm,a:e.adUnitCode})}};Zn(hc),a("amxBidAdapter");const bc="pubmatic",yc="PubMatic: ",vc="USD",wc=void 0,Ic="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),Cc={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},xc="number",Sc="array",Tc={mimes:Sc,minduration:xc,maxduration:xc,startdelay:xc,playbackmethod:Sc,api:Sc,protocols:Sc,w:xc,h:xc,battr:Sc,linearity:xc,placement:xc,plcmt:xc,minbitrate:xc,maxbitrate:xc,skip:xc},Ac={1:"PMP",5:"PREF",6:"PMPG"},kc={bootstrapPlayer:e=>{const t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),!e.vastXml&&!e.vastUrl)return void fe(`${yc}: No vastXml or vastUrl on bid, bailing...`);const n=kc.getRendererId("pubmatic",e.rendererCode),r=document.getElementById(e.adUnitCode);let i;for(let e=0;e<window.bluebillywig.renderers.length;e++)if(window.bluebillywig.renderers[e]._id===n){i=window.bluebillywig.renderers[e];break}i?i.bootstrap(t,r):fe(`${yc}: Couldn't find a renderer with ${n}`)},newRenderer:(e,t)=>{var n=Ic.replace("$RENDERER",e);const r=Ht.install({url:n,loaded:!1,adUnitCode:t});try{r.setRender(kc.outstreamRender)}catch(e){fe(`${yc}: Error tying to setRender on renderer`,e)}return r},outstreamRender:e=>{e.renderer.push((()=>{kc.bootstrapPlayer(e)}))},getRendererId:(e,t)=>`${e}-${t}`},_c=[si,ai,oi];let Ec=0,Oc=!1,Rc=["pubmatic"];const Uc=["all"];function Bc(e,t){if(!Te(t))return t&&fe(yc+"Ignoring param key: "+e+", expects string-value, found "+typeof t),wc;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((e=>e.trim())).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||wc;case"yob":return parseInt(t)||wc;default:return t}}function jc(){let e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);switch(e?.effectiveType){case"ethernet":return 1;case"wifi":return 2;case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;default:return 0}}function Dc(e,t,n){var r,i="Ignoring param key: "+e+", expects "+n+", found "+typeof t;switch(n){case"boolean":r=Ee;break;case xc:r=ke;break;case"string":r=Te;break;case Sc:r=Ae}return r(t)?t:(fe(yc+i),wc)}const Pc={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},$c=Object.values(Pc);function zc(e){var t;if(e.ortb){e=e.ortb,t={ver:"1.2",...e,assets:[]};const{assets:n}=e,r=e=>e.title||e.img||e.data||e.video;if(n.length<1||!n.some((e=>r(e))))return fe(`${yc}: Native assets object is empty or contains some invalid object`),Oc=!0,t;n.forEach((e=>{var n=e;n.img&&(3==n.img.type?(n.w=n.w||n.width||(n.sizes?n.sizes[0]:wc),n.h=n.h||n.height||(n.sizes?n.sizes[1]:wc),n.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:wc),n.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:wc)):1==n.img.type&&(n.w=n.w||n.width||(n.sizes?n.sizes[0]:wc),n.h=n.h||n.height||(n.sizes?n.sizes[1]:wc))),n&&void 0!==n.id&&r(n)&&t.assets.push(n)}))}else t=(e=>{if(!e&&!_e(e))return fe(`${yc}: Native assets object is empty or not an object: ${e}`),void(Oc=!0);const t={ver:"1.2",assets:[]};for(let n in e){if(E.includes(n))continue;if(!x.hasOwnProperty(n)&&!$c.includes(n)){fe(`${yc}: Unrecognized native asset code: ${n}. Asset will be ignored.`);continue}const r=e[n];let i=0;r.required&&Ee(r.required)&&(i=Number(r.required));const o={id:t.assets.length,required:i};if(n in Pc)o.data={type:_[Pc[n]]},(r.len||r.length)&&(o.data.len=r.len||r.length),r.ext&&(o.data.ext=r.ext);else if("icon"===n||"image"===n){if(o.img={type:"icon"===n?1:3},r.aspect_ratios)if(Ae(r.aspect_ratios))if(r.aspect_ratios.length){const{min_width:e,min_height:t}=r.aspect_ratios[0];ot(e)&&ot(t)?(o.img.wmin=e,o.img.hmin=t):fe(`${yc}: image.aspect_ratios min_width or min_height are invalid: ${e}, ${t}`);const n=r.aspect_ratios.filter((e=>e.ratio_width&&e.ratio_height)).map((e=>`${e.ratio_width}:${e.ratio_height}`));n.length>0&&(o.img.ext={aspectratios:n})}else fe(`${yc}: image.aspect_ratios was passed, but it's empty: ${r.aspect_ratios}`);else fe(`${yc}: image.aspect_ratios was passed, but it's not a an array: ${r.aspect_ratios}`);o.img.w=r.w||r.width,o.img.h=r.h||r.height,o.img.wmin=r.wmin||r.minimumWidth||(r.minsizes?r.minsizes[0]:wc),o.img.hmin=r.hmin||r.minimumHeight||(r.minsizes?r.minsizes[1]:wc),r.sizes&&(2===r.sizes.length&&ot(r.sizes[0])&&ot(r.sizes[1])?(me(`${yc}: if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin`),o.img.w=r.sizes[0],o.img.h=r.sizes[1],delete o.img.hmin,delete o.img.wmin):fe(`${yc}: image.sizes was passed, but its value is not an array of integers: ${r.sizes}`)),r.ext&&(o.img.ext=r.ext),r.mimes&&(o.img.mimes=r.mimes)}else"title"===n?(o.title={len:r.len||r.length||140},r.ext&&(o.title.ext=r.ext)):"ext"===n&&(o.ext=r,delete o.required);t.assets.push(o)}return t.assets.length<1?(fe(`${yc}: Could not find any valid asset`),void(Oc=!0)):t})(e);return t}function Nc(e){var t,n=e.mediaTypes.banner.sizes,r=[];if(n!==wc&&Ae(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=wc,fe(yc+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(r=[],n.forEach((e=>{e.length>1&&r.push({w:e[0],h:e[1]})})),r.length>0&&(t.format=r)),t.pos=0,t.topframe=Ke()?0:1}else fe(yc+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=wc;return t}function qc(e){var t,n=gt(b(e.mediaTypes,"video"),e.params.video);if(n!==wc){for(var r in t={},((e,t)=>{b(e,"placement")||fe("Video.Placement param missing for "+t)})(n,e.adUnitCode),Tc)n.hasOwnProperty(r)&&(t[r]=Dc(r,n[r],Tc[r]));Ae(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):ke(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=wc,fe(yc+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function Mc(e,t){(t=t.filter((e=>"string"==typeof e||(fe(yc+"acat: Each category should be a string, ignoring category: "+e),!1))).map((e=>e.trim())).filter(((e,t,n)=>n.indexOf(e)===t))).length>0&&(fe(yc+"acat: Selected: ",t),e.ext.acat=t)}function Fc(e){return!0===Ae(e)&&e.length>0}const Lc={code:bc,gvlid:76,supportedMediaTypes:[si,ai,oi],isBidRequestValid:e=>{if(e&&e.params){if(!Te(e.params.publisherId))return fe(yc+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(ai)){let t=b(e.mediaTypes,"video.mimes"),n=b(e,"params.video.mimes");if(!1===Fc(t)&&!1===Fc(n))return fe(yc+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[ai].hasOwnProperty("context"))return he(`${yc}: no context specified in bid. Rejecting bid: `,e),!1;if("outstream"===e.mediaTypes[ai].context&&!Te(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[ai].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(si)||e.mediaTypes.hasOwnProperty(oi)?(delete e.mediaTypes[ai],fe(`${yc}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: `,e),!0):(he(`${yc}: for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: `,e),!1)}return!0}return!1},buildRequests:(e,t)=>{var n;t&&t.refererInfo&&(n=t.refererInfo);var r,i=(e=>({pageURL:e?.page||window.location.href,refURL:e?.ref||window.document.referrer}))(n),o=(e=>({id:""+(new Date).getTime(),at:1,cur:[vc],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language,connectiontype:jc()},user:{},ext:{}}))(i),a="",s=[],d=[],c=[],l=ae();if(e.forEach((e=>{if(e.params.wiid=e.params.wiid||t.auctionId||l,(r=Je(e)).params.adSlot=r.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=Te(t=e.params.adSlot)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&fe(bc+": adSlot must be a string. Ignoring adSlot"),"");var n=e.params.adSlot,r=n.split(":");if(n=r[0],2==r.length&&(e.params.adUnitIndex=r[1]),r=n.split("@"),e.params.adUnit=r[0],r.length>1){if(2!=(r=r[1].split("x")).length)return void fe(yc+"AdSlot Error: adSlot not in required format");e.params.width=parseInt(r[0],10),e.params.height=parseInt(r[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(si)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(r),r.mediaTypes&&r.mediaTypes.hasOwnProperty("video")||r.params.hasOwnProperty("video"));else if(!(r.hasOwnProperty("mediaTypes")&&r.mediaTypes.hasOwnProperty(oi)||0!==r.params.width||0!==r.params.height))return void fe(yc+"Skipping the non-standard adslot: ",r.params.adSlot,JSON.stringify(r));i.pubId=i.pubId||r.params.publisherId,(i=((e,t)=>{var n,r,i;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),Cc)Cc.hasOwnProperty(n)&&(r=e[n])&&("object"==typeof(i=Cc[n])&&(r=i.f(r,t)),Te(r)?t[n]=r:fe(yc+"Ignoring param : "+n+" with value : "+Cc[n]+", expects string-value, found "+typeof r));return t})(r.params,i)).transactionId=r.ortb2Imp?.ext?.tid,""===a?a=r.params.currency||wc:r.params.hasOwnProperty("currency")&&a!==r.params.currency&&fe(yc+"Currency specifier ignored. Only one currency permitted."),r.params.currency=a,r.params.hasOwnProperty("dctr")&&Te(r.params.dctr)&&s.push(r.params.dctr),r.params.hasOwnProperty("bcat")&&Ae(r.params.bcat)&&(d=d.concat(r.params.bcat)),r.params.hasOwnProperty("acat")&&Ae(r.params.acat)&&(c=c.concat(r.params.acat));var n=function(e,t){var n,r,i={},o={},a=e.hasOwnProperty("sizes")?e.sizes:[],s="",d=[],c=t?.fledgeEnabled;if(((e,t)=>{t.params.deals&&(Ae(t.params.deals)?t.params.deals.forEach((t=>{Te(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):fe(yc+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):fe(yc+"Error: bid.params.deals should be an array of strings."))})(i={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:Bc("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:Bc("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?Bc("currency",e.params.currency):vc},e),((e,t)=>{var n,r="";if(t.params.dctr)if(Te(r=t.params.dctr)&&r.length>0){var i=r.split("|");r="",i.forEach((e=>{r+=e.length>0?e.trim()+"|":""})),n=r.length,"|"===r.substring(n,n-1)&&(r=r.substring(0,n-1)),e.ext.key_val=r.trim()}else fe(yc+"Ignoring param : dctr with value : "+r+", expects string-value, found empty or non-string value")})(i,e),((e,t)=>{var n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var i,o=n.segments.length;r+="jw-id="+n.content.id;for(var a=0;a<o;a++)r+="|jw-"+n.segments[a]+"=1";(i=e.ext)&&void 0===i.key_val?i.key_val=r:i.key_val+="|"+r}})(i,e),e.hasOwnProperty("mediaTypes"))for(s in e.mediaTypes)switch(s){case si:(n=Nc(e))!==wc&&(i.banner=n);break;case oi:o.request=JSON.stringify(zc(e.nativeParams)),Oc?(fe(yc+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),Oc=!1):i.native=o;break;case ai:(r=qc(e))!==wc&&(i.video=r)}else n={pos:0,w:e.params.width,h:e.params.height,topframe:Ke()?0:1},Ae(a)&&a.length>1&&((a=a.splice(1,a.length-1)).forEach((e=>{d.push({w:e[0],h:e[1]})})),n.format=d),i.banner=n;return((e,t)=>{const n={...b(t,"ortb2Imp.ext.data")};Object.keys(n).forEach((t=>{"pbadslot"===t?"string"==typeof n[t]&&n[t]&&ht(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((t=>{const r=b(n,`adserver.${t}`);"string"==typeof r&&r&&(ht(e,`ext.data.adserver.${t.toLowerCase()}`,r),"adslot"===t&&ht(e,"ext.dfp_ad_unit_code",r))})):ht(e,`ext.data.${t}`,n[t])}));const r=b(t,"ortb2Imp.ext.gpid");r&&ht(e,"ext.gpid",r)})(i,e),((e,t)=>{let n=-1;"function"!=typeof t.getFloor||P.getConfig("pubmatic.disableFloors")||[si,ai,oi].forEach((r=>{if(e.hasOwnProperty(r)){let i=[];"banner"===r&&(e[r].w&&e[r].h&&i.push([e[r].w,e[r].h]),Ae(e[r].format)&&e[r].format.forEach((e=>i.push([e.w,e.h])))),0===i.length&&i.push("*"),i.forEach((i=>{let o=t.getFloor({currency:e.bidfloorcur,mediaType:r,size:i});if(me(yc,"floor from floor module returned for mediatype:",r," and size:",i," is: currency",o.currency,"floor",o.floor),"object"==typeof o&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){let e=parseFloat(o.floor);me(yc,"floor from floor module:",e,"previous floor value",n,"Min:",Math.min(e,n)),n=-1===n?e:Math.min(e,n),me(yc,"new floor value:",n)}}))}})),e.bidfloor&&(me(yc,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:wc,me(yc,"new impObj.bidfloor value:",e.bidfloor)})(i,e),((e,t,n)=>{n?(e.ext=e.ext||{},void 0!==t?.ortb2Imp?.ext?.ae&&(e.ext.ae=t.ortb2Imp.ext.ae)):e.ext?.ae&&delete e.ext.ae})(i,e,c),i.hasOwnProperty(si)||i.hasOwnProperty(oi)||i.hasOwnProperty(ai)?i:wc}(r,t);n&&o.imp.push(n)})),0==o.imp.length)return;o.site.publisher.id=i.pubId.trim(),Ec=i.pubId.trim(),o.ext.wrapper={},o.ext.wrapper.profile=parseInt(i.profId)||wc,o.ext.wrapper.version=parseInt(i.verId)||wc,o.ext.wrapper.wiid=i.wiid||t.auctionId,o.ext.wrapper.wv="prebid_prebid_8.47.0",o.ext.wrapper.transactionId=i.transactionId,o.ext.wrapper.wp="pbjs";const u=t?Jt.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==u){if(o.ext.marketplace={},t&&1==u){let e=Jt.get(t.bidderCode,"allowedAlternateBidderCodes");Ae(e)?(e=e.map((e=>e.trim().toLowerCase())).filter((e=>!!e)).filter(Fe),Rc=e.includes("*")?Uc:[...Rc,...e]):Rc=Uc}o.ext.marketplace.allowedbidders=Rc.filter(Fe)}o.user.gender=i.gender?i.gender.trim():wc,o.user.geo={},o.user.yob=Bc("yob",i.yob),o.site.page=i.kadpageurl.trim()||o.site.page.trim(),o.site.domain=(e=>{let t=document.createElement("a");return t.href=e,t.hostname})(o.site.page),"object"==typeof P.getConfig("content")&&(o.site.content=P.getConfig("content")),"object"==typeof P.getConfig("device")&&(o.device=Object.assign(o.device,P.getConfig("device"))),o.device.language=o.device.language&&o.device.language.split("-")[0],ht(o,"source.tid",t?.ortb2?.source?.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(o.test=1),e[0].schain&&ht(o,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(ht(o,"user.ext.consent",t.gdprConsent.consentString),ht(o,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&ht(o,"regs.ext.us_privacy",t.uspConsent),t?.gppConsent?.gppString?(ht(o,"regs.gpp",t.gppConsent.gppString),ht(o,"regs.gpp_sid",t.gppConsent.applicableSections)):t?.ortb2?.regs?.gpp&&(ht(o,"regs.gpp",t.ortb2.regs.gpp),ht(o,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===P.getConfig("coppa")&&ht(o,"regs.coppa",1),t?.ortb2?.regs?.ext?.dsa&&ht(o,"regs.ext.dsa",t.ortb2.regs.ext.dsa),((e,t)=>{let n=b(t,"0.userIdAsEids");Ae(n)&&n.length>0&&ht(e,"user.eids",n)})(o,e);const p=t&&t.ortb2||{},{user:g,device:m,site:f,bcat:h,badv:y}=p;if(f){const{page:e,domain:t,ref:n}=o.site;gt(o,{site:f}),o.site.page=e,o.site.domain=t,o.site.ref=n}if(g&&gt(o,{user:g}),y&&gt(o,{badv:y}),h&&(d=d.concat(h)),m?.sua&&(o.device.sua=m?.sua),m?.ext?.cdep&&ht(o,"device.ext.cdep",m.ext.cdep),g?.geo&&m?.geo?(o.device.geo={...o.device.geo,...m.geo},o.user.geo={...o.user.geo,...g.geo}):(g?.geo||m?.geo)&&(o.user.geo=o.device.geo=g?.geo?{...o.user.geo,...g.geo}:{...o.user.geo,...m.geo}),p.ext?.prebid?.bidderparams?.[t.bidderCode]?.acat){const e=p.ext.prebid.bidderparams[t.bidderCode].acat;Mc(o,e)}else c.length&&Mc(o,c);return((e,t)=>{(t=t.filter((e=>"string"==typeof e||(fe(yc+"bcat: Each category should be a string, ignoring category: "+e),!1))).map((e=>e.trim())).filter(((e,t,n)=>{if(e.length>3)return n.indexOf(e)===t;fe(yc+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&(fe(yc+"bcat: Selected: ",t),e.bcat=t)})(o,d),o.tmax=t?.timeout?t.timeout:window?.PWT?.versionDetails?.timeout,o.ext.epoch=(new Date).getTime(),"object"==typeof P.getConfig("app")&&(o.app=P.getConfig("app"),o.app.publisher=o.site.publisher,o.app.ext=o.site.ext||wc,"object"!=typeof o.app.content&&(o.app.content=o.site.content||wc),delete o.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(o),bidderRequest:t}},interpretResponse:(e,t)=>{const n=[];var r=vc;let i=JSON.parse(t.data),o=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&Ae(e.body.seatbid)&&(r=e.body.cur||r,e.body.seatbid.forEach((e=>{e.bid&&Ae(e.bid)&&e.bid.forEach((a=>{let s={requestId:a.impid,cpm:parseFloat((a.price||0).toFixed(2)),width:a.w,height:a.h,creativeId:a.crid||a.id,dealId:a.dealid,currency:r,netRevenue:!0,ttl:300,referrer:o,ad:a.adm,pm_seat:e.seat||null,pm_dspid:a.ext&&a.ext.dspid?a.ext.dspid:null,partnerImpId:a.id||""};i.imp&&i.imp.length>0&&i.imp.forEach((e=>{if(a.impid===e.id)switch(((e,t)=>{if(e.ext&&null!=e.ext.bidtype)t.mediaType=_c[e.ext.bidtype];else{me(yc+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,r="",i=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=si;else if(i.test(n))t.mediaType=ai;else try{(r=JSON.parse(n.replace(/\\/g,"")))&&r.native&&(t.mediaType=oi)}catch(e){fe(yc+"Error: Cannot parse native reponse for ad response: "+n)}}})(a,s),s.mediaType){case si:break;case ai:s.width=a.hasOwnProperty("w")?a.w:e.video.w,s.height=a.hasOwnProperty("h")?a.h:e.video.h,s.vastXml=a.adm,((e,t)=>{let n,r,i;if(t.bidderRequest&&t.bidderRequest.bids){for(let o=0;o<t.bidderRequest.bids.length;o++)t.bidderRequest.bids[o].bidId===e.requestId&&(n=t.bidderRequest.bids[o].params,r=t.bidderRequest.bids[o].mediaTypes[ai].context,i=t.bidderRequest.bids[o].adUnitCode);r&&"outstream"===r&&n&&n.outstreamAU&&i&&(e.rendererCode=n.outstreamAU,e.renderer=kc.newRenderer(e.rendererCode,i))}})(s,t),((e,t,n)=>{if(!t?.ext?.prebiddealpriority)return;const r=b(We(e.requestId,[n.bidderRequest]),"mediaTypes.video");if(r?.context!=di)return;const i=t?.ext?.video?.duration||r?.maxduration;e.video={context:di,durationSeconds:i,dealTier:t.ext.prebiddealpriority}})(s,a,t);break;case oi:((e,t)=>{if(e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void fe(yc+"Error: Cannot parse native reponse for ad response: "+t.adm)}t.native={ortb:{...n.native}},t.mediaType=oi,t.width||(t.width=0),t.height||(t.height=0)}})(a,s)}})),a.ext&&a.ext.deal_channel&&(s.dealChannel=Ac[a.ext.deal_channel]||null),((e,t,n)=>{e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);const r=n||t.ext&&t.ext.advid;r&&(e.meta.advertiserId=r,e.meta.agencyId=r,e.meta.buyerId=r),t.adomain&&Fc(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&Fc(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0]),t.ext&&t.ext.dsa&&Object.keys(t.ext.dsa).length&&(e.meta.dsa=t.ext.dsa)})(s,a,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),a.ext&&a.ext.marketplace&&(s.bidderCode=a.ext.marketplace),n.push(s)}))})));let a=b(e.body,"ext.fledge_auction_configs");if(a)return a=Object.entries(a).map((e=>{let[t,n]=e;return{bidId:t,config:Object.assign({auctionSignals:{}},n)}})),{bids:n,fledgeAuctionConfigs:a}}catch(e){he(e)}return n},getUserSyncs:(e,t,n,r,i)=>{let o=""+Ec;return n&&(o+="&gdpr="+(n.gdprApplies?1:0),o+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),r&&(o+="&us_privacy="+encodeURIComponent(r)),i?.gppString&&i?.applicableSections?.length&&(o+="&gpp="+encodeURIComponent(i.gppString),o+="&gpp_sid="+encodeURIComponent(i?.applicableSections?.join(","))),!0===P.getConfig("coppa")&&(o+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+o}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+o}]}};Zn(Lc),a("pubmaticBidAdapter");const Wc="sharethrough",Vc=()=>window.location.protocol;function Gc(e){let{api:t}=e;return t&&Array.isArray(t)&&t.length>0?t:[2]}function Hc(e){let{protocols:t}=e;return t&&Array.isArray(t)&&t.length>0?t:[2,3,5,6,7,8]}function Jc(e){let t=null;if("function"==typeof e.getFloor){const n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((e=>({w:e[0],h:e[1]})))});"object"!=typeof n||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function Kc(e,t){return e??t}Zn({code:Wc,supportedMediaTypes:[ai,si],gvlid:80,isBidRequestValid:e=>!!e.params.pkey&&e.bidder===Wc,buildRequests:(e,t)=>{const n=t.timeout,r=t.ortb2||{},i=Vc().indexOf("http")<0||Vc().indexOf("https")>-1,o={id:ae(),at:1,cur:["USD"],tmax:n,site:{domain:b(t,"refererInfo.domain",window.location.hostname),page:b(t,"refererInfo.page",window.location.href),ref:b(t,"refererInfo.ref"),...r.site},device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:!0===P.getConfig("coppa")?1:0,ext:{}},source:{tid:t.ortb2?.source?.tid,ext:{version:"8.47.0",str:"4.3.0",schain:e[0].schain}},bcat:b(t.ortb2,"bcat")||e[0].params.bcat||[],badv:b(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(t.ortb2?.device?.ext?.cdep&&(o.device.ext.cdep=t.ortb2.device.ext.cdep),o.user=Kc(r.user,{}),o.user.ext||(o.user.ext={}),o.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){const e=!0===t.gdprConsent.gdprApplies;o.regs.ext.gdpr=e?1:0,e&&(o.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(o.regs.ext.us_privacy=t.uspConsent),t?.gppConsent?.gppString?(o.regs.gpp=t.gppConsent.gppString,o.regs.gpp_sid=t.gppConsent.applicableSections):t?.ortb2?.regs?.gpp&&(o.regs.ext.gpp=t.ortb2.regs.gpp,o.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),t?.ortb2?.regs?.ext?.dsa&&(o.regs.ext.dsa=t.ortb2.regs.ext.dsa),e.map((e=>{const n={ext:{}},r=b(e,"ortb2Imp.ext.tid");r&&(n.ext.tid=r);const o=b(e,"ortb2Imp.ext.gpid",b(e,"ortb2Imp.ext.data.pbadslot"));o&&(n.ext.gpid=o);const a=b(e,"mediaTypes.video");if(t.fledgeEnabled&&e.mediaTypes.banner&&gt(n,{ext:{ae:1}}),a){let[e,t]=[640,360];a.playerSize&&a.playerSize[0]&&a.playerSize[0][0]&&a.playerSize[0][1]&&([e,t]=a.playerSize[0]);const r=e=>e.plcmt?e.placement:"instream"===e.context?1:+b(e,"placement",4);n.video={pos:Kc(a.pos,0),topframe:Ke()?0:1,skip:Kc(a.skip,0),linearity:Kc(a.linearity,1),minduration:Kc(a.minduration,5),maxduration:Kc(a.maxduration,60),playbackmethod:a.playbackmethod||[2],api:Gc(a),mimes:a.mimes||["video/mp4"],protocols:Hc(a),w:e,h:t,startdelay:Kc(a.startdelay,0),skipmin:Kc(a.skipmin,0),skipafter:Kc(a.skipafter,0),placement:r(a),plcmt:a.plcmt?a.plcmt:null},a.delivery&&(n.video.delivery=a.delivery),a.companiontype&&(n.video.companiontype=a.companiontype),a.companionad&&(n.video.companionad=a.companionad)}else n.banner={pos:b(e,"mediaTypes.banner.pos",0),topframe:Ke()?0:1,format:e.sizes.map((e=>({w:+e[0],h:+e[1]})))};return{id:e.bidId,tagid:String(e.params.pkey),secure:i?1:0,bidfloor:Jc(e),...n}})).filter((e=>!!e)).map((e=>({method:"POST",url:"https://btlr.sharethrough.com/universal/v1?supply_id=WYu2BXv1",data:{...o,imp:[e]}})))},interpretResponse:(e,t)=>{let{body:n}=e;if(!n||!n.seatbid||0===n.seatbid.length||!n.seatbid[0].bid||0===n.seatbid[0].bid.length)return[];const r=n.ext?.auctionConfigs,i=n.seatbid[0].bid.map((e=>{const r={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?ai:si,currency:n.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:e.ext?.networkId||null,networkName:e.ext?.networkName||null,agencyId:e.ext?.agencyId||null,agencyName:e.ext?.agencyName||null,advertiserId:e.ext?.advertiserId||null,advertiserName:e.ext?.advertiserName||null,brandId:e.ext?.brandId||null,brandName:e.ext?.brandName||null,demandSource:e.ext?.demandSource||null,dchain:e.ext?.dchain||null,primaryCatId:e.ext?.primaryCatId||null,secondaryCatIds:e.ext?.secondaryCatIds||null,mediaType:e.ext?.mediaType||null}};return r.mediaType===ai&&(r.ttl=3600,r.vastXml=e.adm),r}));return r?{bids:i,fledgeAuctionConfigs:n.ext?.auctionConfigs||{}}:i},getUserSyncs:(e,t)=>e.pixelEnabled&&void 0!==b(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map((e=>({type:"image",url:e}))):[],onTimeout:e=>{},onBidWon:e=>{},onSetTargeting:e=>{}}),a("sharethroughBidAdapter");const Xc="6.0.0",Yc="USD",Qc={code:"rise",aliases:[{code:"risexchange",gvlid:1043},{code:"openwebxchange",gvlid:280}],gvlid:1043,version:Xc,supportedMediaTypes:[si,ai],isBidRequestValid:e=>e.params?!!e.params.org||(fe("org is a mandatory param for Rise adapter"),!1):(fe("no params have been set to Rise adapter"),!1),buildRequests:(e,t)=>{const n={},r=e[0],i=r.params.testMode,o=r.params.rtbDomain;return n.params=((e,t)=>{const n=window.location.hostname,{syncEnabled:r,filterSettings:i}=P.getConfig("userSync")||{},{bidderCode:o}=t,a=e.params,s=t.timeout,d={wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:"8.47.0",adapter_version:Xc,auction_start:Ye(),publisher_id:a.org,publisher_name:n,site_domain:n,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,device_type:(l=navigator.userAgent,/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(l.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(l.toLowerCase())?"4":/smart[-_\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b/i.test(l.toLowerCase())?"3":"1"),ua:navigator.userAgent,is_wrapper:!!a.isWrapper,session_id:a.sessionId||se("bidderRequestId",e),tmax:s},c=se("userId",e);var l;c&&(d.userIds=JSON.stringify(c));const u=t.ortb2||{};if(u.site&&(d.site_metadata=JSON.stringify(u.site)),u.user&&(d.user_metadata=JSON.stringify(u.user)),r){const e=((e,t)=>{const n="image";return e&&["all","iframe"].some((n=>tl(e[n],t)))?"iframe":e&&e[n]&&!tl(e[n],t)?void 0:"pixel"})(i,o);e&&(d.cs_method=e)}return t.uspConsent&&(d.us_privacy=t.uspConsent),t&&t.gdprConsent&&t.gdprConsent.gdprApplies&&(d.gdpr=t.gdprConsent.gdprApplies,d.gdpr_consent=t.gdprConsent.consentString),t&&t.gppConsent?(d.gpp=t.gppConsent.gppString,d.gpp_sid=t.gppConsent.applicableSections):t.ortb2?.regs?.gpp&&(d.gpp=t.ortb2.regs.gpp,d.gpp_sid=t.ortb2.regs.gpp_sid),a.ifa&&(d.ifa=a.ifa),e.schain&&(d.schain=(e=>{if(Oe(e))return"";let t=`${e.ver},${e.complete}`;return e.nodes.forEach((e=>{t+="!",t+=`${el(e.asi)},`,t+=`${el(e.sid)},`,t+=`${e.hp?encodeURIComponent(e.hp):""},`,t+=`${el(e.rid)},`,t+=`${el(e.name)},`,t+=`${el(e.domain)}`})),t})(e.schain)),t&&t.refererInfo&&(d.referrer=b(t,"refererInfo.ref"),d.page_url=b(t,"refererInfo.page")||b(window,"location.href")),d})(r,t),n.bids=(e=>{const t=[];return e.length&&e.forEach((e=>{t.push((e=>{const{params:t}=e,n=(e=>e.mediaTypes&&e.mediaTypes.banner)(e)?si:ai,r=((e,t)=>{let n=[];return b(e,`mediaTypes.${t}.sizes`)?n=e.mediaTypes[t].sizes:Array.isArray(e.sizes)&&e.sizes.length>0&&(n=e.sizes),n})(e,n);isNaN(t.floorPrice)&&(t.floorPrice=0);const i={mediaType:n,adUnitCode:se("adUnitCode",e),sizes:r,floorPrice:Math.max(Zc(e,n),t.floorPrice),bidId:se("bidId",e),bidderRequestId:se("bidderRequestId",e),loop:se("bidderRequestsCount",e),transactionId:e.ortb2Imp?.ext?.tid,coppa:0},o=b(e,`mediaTypes.${n}.pos`);o&&(i.pos=o);const a=b(e,"ortb2Imp.ext.gpid");a&&(i.gpid=a);const s=t.placementId||b(e,`mediaTypes.${n}.name`);s&&(i.placementId=s);const d=b(e,`mediaTypes.${n}.mimes`);d&&(i.mimes=d);const c=b(e,`mediaTypes.${n}.api`);c&&(i.api=c);const l=b(e,"ortb2.device.sua");l&&(i.sua=l);if(b(e,"ortb2.regs.coppa")&&(i.coppa=1),n===ai){const t=b(e,"mediaTypes.video.playbackmethod");let n;Array.isArray(t)&&ot(t[0])?n=t[0]:ot(t)&&(n=t),n&&(i.playbackMethod=n);const r=b(e,"mediaTypes.video.placement");r&&(i.placement=r);const o=b(e,"mediaTypes.video.minduration");o&&(i.minDuration=o);const a=b(e,"mediaTypes.video.maxduration");a&&(i.maxDuration=a);const s=b(e,"mediaTypes.video.skip");s&&(i.skip=s);const d=b(e,"mediaTypes.video.linearity");d&&(i.linearity=d);const c=b(e,"mediaTypes.video.protocols");c&&(i.protocols=c);const l=b(e,"mediaTypes.video.plcmt");l&&(i.plcmt=l)}return i})(e))})),t})(e),{method:"POST",url:nl(i,o),data:n}},interpretResponse:e=>{let{body:t}=e;const n=[];return t.bids&&t.bids.forEach((e=>{const t={requestId:e.requestId,cpm:e.cpm,currency:e.currency||Yc,width:e.width,height:e.height,ttl:e.ttl||360,creativeId:e.requestId,netRevenue:e.netRevenue||!0,nurl:e.nurl,mediaType:e.mediaType,meta:{mediaType:e.mediaType}};e.mediaType===ai?t.vastXml=e.vastXml:e.mediaType===si&&(t.ad=e.ad),e.adomain&&e.adomain.length&&(t.meta.advertiserDomains=e.adomain),n.push(t)})),n},getUserSyncs:(e,t)=>{const n=[];for(const r of t)if(e.iframeEnabled&&r.body.params.userSyncURL&&n.push({type:"iframe",url:r.body.params.userSyncURL}),e.pixelEnabled&&Ae(r.body.params.userSyncPixels)){const e=r.body.params.userSyncPixels.map((e=>({type:"image",url:e})));n.push(...e)}return n},onBidWon:e=>{null!=e&&(me("onBidWon:",e),e.hasOwnProperty("nurl")&&e.nurl.length>0&&$e(e.nurl))}};function Zc(e,t){if(!Se(e.getFloor))return 0;let n=e.getFloor({currency:Yc,mediaType:t,size:"*"});return n.currency===Yc&&n.floor?n.floor:0}function el(e){return Oe(e)?"":encodeURIComponent(e)}function tl(e,t){if(!e)return!1;const n="include"===e.filter,r=Ae(e.bidders)?e.bidders:[t];return n&&Be(r,t)}function nl(e,t){const n=t?`https://${t}/`:"https://hb.yellowblue.io/";return e?n+"hb-multi-test":n+"hb-multi"}Zn(Qc),a("riseBidAdapter");const rl="ix",il="roundel",ol=[si,ai,oi],al=[144,144],sl={JPY:1},dl={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},cl={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","utiq.com":"","criteo.com":"","euid.eu":"","intimatemerger.com":"","33across.com":"","liveintent.indexexchange.com":"","google.com":""},ll=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],ul=["mimes","minduration","maxduration"],pl=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],gl="ixdiag",ml=`${rl}_features`;let fl=!1;const hl=ti({bidderCode:rl}),bl={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return b(this.featureToggles,`features.${e}.activated`,!1)},getFeatureToggles:function(){if(hl.localStorageIsEnabled()){const e=(e=>{try{return JSON.parse(e)}catch(e){}})(hl.getDataFromLocalStorage(ml));b(e,"expiry")&&e.expiry>=(new Date).getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){const t=e.body,n=new Date,r=b(t,"ext.features");r&&(this.featureToggles={expiry:n.setHours(n.getHours()+1),features:r},hl.localStorageIsEnabled()&&hl.setDataInLocalStorage(ml,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},hl.localStorageIsEnabled()&&hl.removeDataFromLocalStorage(ml)}};let yl=0,vl="",wl="",Il=!1;function Cl(e){const t=xl(e,ai),n=b(e,"mediaTypes.video"),r=b(e,"params.video");if(_l(n,r).length)return{};t.video=r?Je(e.params.video):{};let i=b(e,"ortb2Imp.ext.tid");i&&ht(t,"ext.tid",i),((e,t)=>{if(b(t,"mediaTypes.video.context")===Bn){let n=b(t,"mediaTypes.video.renderer");if(n||(n=b(t,"renderer")),b(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(n&&"object"==typeof n){if(void 0!==n.url){let t="";try{t=new URL(n.url).hostname}catch{return}t.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=n.url}}else e.displaymanager="ix"}})(t,e),Dl(t,e);for(const e in n)-1===pl.indexOf(e)||t.video.hasOwnProperty(e)||(t.video[e]=n[e]);if(t.video.minduration>t.video.maxduration)return he(`IX Bid Adapter: video minduration [${t.video.minduration}] cannot be greater than video maxduration [${t.video.maxduration}]`,{bidder:rl,code:9}),{};const o=r&&r.context||n&&n.context;if((e=>{e.video.hasOwnProperty("plcmt")&&(!ot(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&(fe(`IX Bid Adapter: video.plcmt [${e.video.plcmt}] must be an integer between 1-4 inclusive`),delete e.video.plcmt)})(t),o&&!t.video.hasOwnProperty("placement")&&(o===jn?t.video.placement=1:o===Bn?b(r,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,Il=!0):fe(`IX Bid Adapter: Video context '${o}' is not supported`)),!t.video.w||!t.video.h){const n=El(b(t,"video.playerSize"))||El(b(e,"params.size"));if(!n)return fe("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=n[0],t.video.h=n[1]}return Sl(e,t,ai),t}function xl(e,t){const n={};if(n.id=e.bidId,Hl()&&b(e,"params.externalId")&&ht(n,"ext.externalID",e.params.externalId),b(e,`params.${t}.siteId`)&&!isNaN(Number(e.params[t].siteId)))switch(t){case si:ht(n,"ext.siteID",e.params.banner.siteId.toString());break;case ai:ht(n,"ext.siteID",e.params.video.siteId.toString());break;case oi:ht(n,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&ht(n,"ext.siteID",e.params.siteId.toString());return!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||ht(n,"ext.sid",String(e.params.id)),n}function Sl(e,t,n){let r=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(r={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),Se(e.getFloor)){let r="*",o="*";if(n&&Be(ol,n)){const{w:e,h:i}=t[n];r=n,o=[e,i]}try{i=e.getFloor({mediaType:r,size:o})}catch(e){fe("priceFloors module call getFloor failed, error : ",e)}}let o=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,ht(t,"ext.fl","p"),o=!0):r&&(t.bidfloor=r.floor,t.bidfloorcur=r.currency,ht(t,"ext.fl","x"),o=!0),o&&(n==si?(ht(t,"banner.ext.bidfloor",t.bidfloor),ht(t,"banner.ext.fl",t.ext.fl)):n==ai?(ht(t,"video.ext.bidfloor",t.bidfloor),ht(t,"video.ext.fl",t.ext.fl)):(ht(t,"native.ext.bidfloor",t.bidfloor),ht(t,"native.ext.fl",t.ext.fl)))}function Tl(e,t,n){const r={},i=!(!b(e,"exp")||!ot(e.exp)),o=b(e,"dealid")||b(e,"ext.dealid");sl.hasOwnProperty(t)?r.cpm=e.price/sl[t]:r.cpm=e.price/100,r.requestId=e.impid,o&&(r.dealId=o),r.netRevenue=!0,r.currency=t,r.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2!=e.mtype||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(r.vastUrl=e.ext.vasturl):r.vastXml=e.adm;let a=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{a=JSON.parse(e.adm)}catch(e){fe("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||2==e.mtype?(r.width=n.video.w,r.height=n.video.h,r.mediaType=ai,r.mediaTypes=n.mediaTypes,r.ttl=i?e.exp:3600):a&&a.native?(r.native={ortb:a.native},r.width=e.w?e.w:1,r.height=e.h?e.h:1,r.mediaType=oi,r.ttl=i?e.exp:3600):(r.ad=e.adm,r.width=e.w,r.height=e.h,r.mediaType=si,r.ttl=i?e.exp:300),r.meta={},r.meta.networkId=b(e,"ext.dspid"),r.meta.brandId=b(e,"ext.advbrandid"),r.meta.brandName=b(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(r.meta.advertiserDomains=e.adomain),e.ext?.dsa&&(r.meta.dsa=e.ext.dsa),r}function Al(e){return Array.isArray(e)&&2===e.length&&ot(e[0])&&ot(e[1])}function kl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Al(e))return e[0]===t[0]&&e[1]===t[1];for(let n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function _l(e,t){const n=[];e||fe("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");for(let r of ul){const i=e&&e.hasOwnProperty(r),o=t&&t.hasOwnProperty(r);i||o||n.push(`IX Bid Adapter: ${r} is not included in either the adunit or params level`)}const r=e&&e.hasOwnProperty("protocol"),i=e&&e.hasOwnProperty("protocols"),o=t&&t.hasOwnProperty("protocol"),a=t&&t.hasOwnProperty("protocols");return r||i||o||a||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function El(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Al(e)?e:!!Al(e[0])&&e[0]}function Ol(e,t,n){if(e)return{...d(n,(t=>t.bidId===e)),...d(t,(t=>t.id===e))}}function Rl(e,t,n,r){let i="https://htlb.casalemedia.com/openrtb/pbjs",o=(e=>{let t=[],n={};if(Ae(e))for(const r of e){const e=cl.hasOwnProperty(r.source),i=bl.isFeatureEnabled("pbjs_allow_all_eids"),o=b(r,"uids.0");if((e||i)&&o&&(n[r.source]=!0,e&&""!==cl[r.source]&&(r.uids[0].ext={rtiPartner:cl[r.source]}),delete r.uids[0].atype,t.push(r),t.length>=50))break}return{toSend:t,seenSources:n}})(b(e,"0.userIdAsEids")),a=o.toSend;if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&((e,t)=>{let n=window.headertag.getIdentityInfo();if(n&&"object"==typeof n)for(const r in n){if(e.length>=50)return;if(n.hasOwnProperty(r)){let i=n[r];!i.responsePending&&i.data&&"object"==typeof i.data&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}})(a,o),t&&t.bidderCode===il&&!o.seenSources["liveramp.com"])return[];const s=[];let d=(e=>{const t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=hl.localStorageIsEnabled(),t.imp=[],t.at=1,t})(e);d=((e,t)=>(t.length>0&&(e.ext.features={},t.forEach((t=>{e.ext.features[t]={activated:bl.isFeatureEnabled(t)}}))),e))(d,bl.REQUESTED_FEATURE_TOGGLES);let c=((e,t)=>{var n=e.map((e=>e.adUnitCode)).filter(((e,t,n)=>n.indexOf(e)===t));let r=b(e,"0.userIdAsEids",[]),i={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"8.47.0",userIds:$l(e[0]),url:window.location.href.split("?")[0],vpd:Il,ae:t,eidLength:r.length};for(let t of n){let n=e.filter((e=>e.adUnitCode===t))[0];b(n,"mediaTypes")&&(Object.keys(n.mediaTypes).length>1&&i.mfu++,b(n,"mediaTypes.native")&&i.nu++,b(n,"mediaTypes.banner")&&i.bu++,"outstream"===b(n,"mediaTypes.video.context")&&(i.ou++,Gl(n)&&(i.ren=!0)),"instream"===b(n,"mediaTypes.video.context")&&i.iu++,i.allu++)}return i})(e,b(t,"fledgeEnabled"));for(let e in c)d.ext.ixdiag[e]=c[e];d=((e,t,n,r,i)=>{const o=b(t,"timeout");o&&(e.ext.ixdiag.tmax=o),P.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=P.getConfig("userSync").syncsPerBidder);const a=(()=>{if(!hl.localStorageIsEnabled())return;const e={};let t;try{t=JSON.parse(hl.getDataFromLocalStorage(gl)||"{}")}catch(e){return he("ix can not read ixdiag from localStorage."),null}return Object.keys(t).forEach((n=>{Object.keys(t[n]).forEach((r=>{"number"==typeof t[n][r]&&(e[r]=e[r]?e[r]+t[n][r]:t[n][r])}))})),e})();return Oe(a)||(e.ext.ixdiag.err=a),e.ext.ixdiag.imps=Object.keys(n).length,e.source={tid:t?.ortb2?.source?.tid},r[0].schain&&(e.source.ext={},e.source.ext.schain=r[0].schain),i.length>0&&(e.user={},e.user.eids=i),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e})(d,t,n,e,a),d=((e,t)=>{if(t){t.gdprConsent&&(vl=t.gdprConsent,vl.hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:vl.gdprApplies?1:0}}),vl.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:vl.consentString||""},vl.hasOwnProperty("addtlConsent")&&vl.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:vl.addtlConsent}))),t.uspConsent&&(ht(e,"regs.ext.us_privacy",t.uspConsent),wl=t.uspConsent);const n=b(t,"refererInfo.page");n&&(e.site.page=n),t.gppConsent&&(ht(e,"regs.gpp",t.gppConsent.gppString),ht(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return P.getConfig("coppa")&&ht(e,"regs.coppa",1),e})(d,t);let l={};e[0].params.siteId&&(yl=e[0].params.siteId,l.s=yl);const u=Object.keys(n);let p=!1;for(let r=0;r<u.length&&!(s.length>=4);r++){d=Ul(n,u,d,r);const o=b(t,"ortb2")||{},a={...o.site||o.context};a.page=Bl(t);const c={...o.user};Oe(o)||p||(d=jl(t,d,o,a,c),d.site=gt({},d.site,a),d.user=gt({},d.user,c),p=!0),d=Pl(n,d,u,r);const l=r===u.length-1;if(d=Ql(d),d=Kl(d),d=Xl(d),l){let t=`${i}?`;0!==yl&&(t+=`s=${yl}`),Hl()&&(t+=0!==yl?"&":"",t+=`p=${P.getConfig("exchangeId")}`),s.push({method:"POST",url:t,data:Je(d),option:{contentType:"text/plain"},validBidRequests:e}),d.imp=[],p=!1}}return s}function Ul(e,t,n,r){const i=e[t[r]],{missingImps:o=[],ixImps:a=[]}=i,s={ixImps:a,missingBannerImpressions:o},d=Object.keys(s).map((e=>s[e])).filter((e=>Array.isArray(e))).reduce(((e,t)=>e.concat(...t)),[]),c=e[t[r]].gpid,l=e[t[r]].dfp_ad_unit_code,u=e[t[r]].tid,p=e[t[r]].sid,g=e[t[r]].ae,m=d.filter((e=>si in e)),f=d.filter((e=>!(si in e)));if(m.length>0){const i=m.reduce(((e,t)=>(e[t.adunitCode]||(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e)),{});for(const o in i){const a=i[o],{id:s,banner:{topframe:d}}=a[0];let m=b(a[0],"ext.externalID");const f={id:s,banner:{topframe:d,format:a.map((e=>{let{banner:{w:t,h:n},ext:r}=e;return{w:t,h:n,ext:r}}))}};for(let e=0;e<f.banner.format.length;e++)null!=f.banner.format[e].ext&&(null!=f.banner.format[e].ext.sid&&delete f.banner.format[e].ext.sid,null!=f.banner.format[e].ext.externalID&&delete f.banner.format[e].ext.externalID),"bidfloor"in a[e]&&(f.banner.format[e].ext.bidfloor=a[e].bidfloor),"{}"===JSON.stringify(f.banner.format[e].ext)&&delete f.banner.format[e].ext;const h=e[t[r]].pos;ot(h)&&(f.banner.pos=h),(l||c||u||p||g||m)&&(f.ext={},f.ext.dfp_ad_unit_code=l,f.ext.gpid=c,f.ext.tid=u,f.ext.sid=p,f.ext.externalID=m,1==g&&(f.ext.ae=1)),"bidfloor"in a[0]&&(f.bidfloor=a[0].bidfloor),"bidfloorcur"in a[0]&&(f.bidfloorcur=a[0].bidfloorcur);const y=e[t[r]].adUnitFPD;y&&ht(f,"ext.data",y),n.imp.push(f)}}return f.length>0&&f.forEach((e=>{if(c&&ht(e,"ext.gpid",c),n.imp.length>0){let t=!1;n.imp.forEach(((r,i)=>{e.id===r.id&&ai in e?(r.video=e.video,r.video.ext=Object.assign({},e.video.ext,e.ext),b(r,"video.ext.bidfloor",!1)&&b(r,"bidfloor",!1)&&r.video.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.video.ext.bidfloor),!b(r,"ext.siteID",!1)&&b(e,"video.ext.siteID")&&(ht(r,"ext.siteID",e.video.ext.siteID),ht(n,"ext.ixdiag.usid",!0)),t=!0):e.id===r.id&&oi in e&&(r.native=e.native,r.native.ext=Object.assign({},e.native.ext,e.ext),b(r,"native.ext.bidfloor",!1)&&b(r,"bidfloor",!1)&&r.native.ext.bidfloor<r.bidfloor&&(r.bidfloor=r.native.ext.bidfloor),!b(r,"ext.siteID",!1)&&b(e,"native.ext.siteID",!1)&&(ht(r,"ext.siteID",e.native.ext.siteID),ht(n,"ext.ixdiag.usid",!0)),t=!0)})),t||n.imp.push(e)}else n.imp.push(e)})),n}function Bl(e){const t=e&&e.bidderCode||"ix",n=P.getConfig(t);let r="";return r=b(e,"ortb2.site.page")?e.ortb2.site.page:b(e,"refererInfo.page"),n&&"object"==typeof n.firstPartyData?((e,t,n)=>{let r;try{r=new URL(t)}catch(n){fe(`IX Bid Adapter: Invalid URL set in ortb2.site.page: ${t}. Using referer URL instead.`),r=new URL(b(e,"refererInfo.page"))}const i=new URLSearchParams(r.search);for(const[e,t]of Object.entries(n))i.has(e)||i.append(e,t);return r.search=i.toString(),r.toString()})(e,r,n.firstPartyData):r}function jl(e,t,n,r,i){if(t.ext.ixdiag.fpd=!0,Object.keys(r).forEach((e=>{-1===dl.SITE.indexOf(e)&&delete r[e]})),Object.keys(i).forEach((e=>{-1===dl.USER.indexOf(e)&&delete i[e]})),n.device){const e={...n.device.sua};Oe(e)||ht(t,"device.sua",e)}if(n.hasOwnProperty("regs")&&!e.gppConsent&&(n.regs.hasOwnProperty("gpp")&&"string"==typeof n.regs.gpp&&ht(t,"regs.gpp",n.regs.gpp),n.regs.hasOwnProperty("gpp_sid")&&Array.isArray(n.regs.gpp_sid)&&ht(t,"regs.gpp_sid",n.regs.gpp_sid),n.regs.ext?.dsa)){const e=n.regs.ext.dsa,r={};if(["dsarequired","pubrender","datatopub"].forEach((t=>{ke(e[t])&&(r[t]=e[t])})),Ae(e.transparency)){const t=[];e.transparency.forEach((e=>{_e(e)&&Te(e.domain)&&""!=e.domain&&Ae(e.dsaparams)&&e.dsaparams.every((e=>ke(e)))&&t.push(e)})),t.length>0&&(r.transparency=t)}Oe(r)||ht(t,"regs.ext.dsa",r)}return t}function Dl(e,t){const n=b(t,"ortb2Imp.ext.data");n&&ht(e,"ext.data",n)}function Pl(e,t,n,r,i,o){const a=e[n[r]].pbadslot,s=e[n[r]].tagId,d=e[n[r]].adUnitCode,c=e[n[r]].divId;return(a||s||d||c)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}function $l(e){const t=e.userId||{};return ll.filter((e=>t[e]))}function zl(e,t){if(t)for(let n=0;n<e.length;n++){const r=e[n];if(t[0]===r[0]&&t[1]===r[1]){e.splice(n,1);break}}}function Nl(e,t){const n=(e=>{const t=xl(e,oi),n=e.nativeOrtbRequest;n.eventtrackers=[{event:1,methods:[1,2]}],n.privacy=1,t.native={request:JSON.stringify(n),ver:"1.2"};let r=b(e,"ortb2Imp.ext.tid");return r&&ht(t,"ext.tid",r),Dl(t,e),Sl(e,t,oi),t})(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=b(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=b(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=b(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=b(e,"params.tagId");const r=e.adUnitCode,i=document.getElementById(r)?r:bd(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function ql(e,t){const n=Cl(e);if(0!=Object.keys(n).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(n),t[e.adUnitCode].gpid=b(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=b(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=b(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=b(e,"params.tagId");const r=e.adUnitCode,i=document.getElementById(r)?r:bd(r).divId;t[e.adUnitCode].adUnitCode=r,t[e.adUnitCode].divId=i}}function Ml(e,t,n,r){let i=(e=>{const t=xl(e,si);t.banner={},t.adunitCode=e.adUnitCode;const n=b(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1]),t.banner.topframe=Ke()?0:1,Sl(e,t,si),t})(e);const o=kl(b(e,"mediaTypes.banner.sizes"),b(e,"params.size"));if(n.hasOwnProperty(e.adUnitCode)||(n[e.adUnitCode]={}),n[e.adUnitCode].gpid=b(e,"ortb2Imp.ext.gpid"),n[e.adUnitCode].dfp_ad_unit_code=b(e,"ortb2Imp.ext.data.adserver.adslot"),n[e.adUnitCode].tid=b(e,"ortb2Imp.ext.tid"),n[e.adUnitCode].pbadslot=b(e,"ortb2Imp.ext.data.pbadslot"),n[e.adUnitCode].tagId=b(e,"params.tagId"),n[e.adUnitCode].pos=b(e,"mediaTypes.banner.pos"),b(r,"fledgeEnabled")){const t=b(e,"ortb2Imp.ext.ae");t?ot(t)?n[e.adUnitCode].ae=t:fe("error setting auction environment flag - must be an integer"):1==b(r,"defaultForSlots")&&(n[e.adUnitCode].ae=1)}const a=b(e,"ortb2Imp.ext.data");a&&(n[e.adUnitCode].adUnitFPD=a);const s=b(e,"params.id");!s||"string"!=typeof s&&"number"!=typeof s||(n[e.adUnitCode].sid=String(s));const d=e.adUnitCode,c=document.getElementById(d)?d:bd(d).divId;n[e.adUnitCode].adUnitCode=d,n[e.adUnitCode].divId=c,o&&(n[e.adUnitCode].hasOwnProperty("ixImps")||(n[e.adUnitCode].ixImps=[]),n[e.adUnitCode].ixImps.push(i)),((e,t,n)=>{if(t.hasOwnProperty(e.adUnitCode)){let n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),zl(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if(b(e,"mediaTypes.banner.sizes")){let r=Je(e.mediaTypes.banner.sizes);zl(r,e.params.size);let i={missingSizes:r,impression:n};t[e.adUnitCode]=i}})(e,t,i)}function Fl(e,t,n){const r=Je(t);return r.banner.w=n[0],r.banner.h=n[1],Sl(e,r,si),r}function Ll(e){"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===rl&&(e=>{if(!hl.localStorageIsEnabled())return;let t;try{t=JSON.parse(hl.getDataFromLocalStorage(gl)||"{}")}catch(e){fe("ix can not read ixdiag from localStorage.")}const n=new Date;if(Object.keys(t).map((e=>{const r=new Date(e);r.setDate(r.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===rl){const r=n.toISOString().slice(0,10),i=e.arguments[1].code;i&&(t[r]=t[r]||{},Number(t[r][i])||(t[r][i]=0),t[r][i]++)}hl.setDataInLocalStorage(gl,JSON.stringify(t))})(e)}function Wl(e){e.renderer.push((()=>{const t=e.adUnitCode,n=document.getElementById(t)?t:bd(t).divId;n?window.createIXPlayer(n,e):fe(`IX Bid Adapter: adUnitCode: ${n} not found on page.`)}))}function Vl(e,t){const n=Ht.install({id:e,url:t,loaded:!1});try{n.setRender(Wl)}catch(e){return fe("Prebid Error calling setRender on renderer",e),null}return t?n:(fe("Outstream renderer URL not found"),null)}function Gl(e){if("outstream"!==b(e,"mediaTypes.video.context"))return!1;let t=b(e,"mediaTypes.video.renderer");return t||(t=b(e,"renderer")),!("object"==typeof t&&t.url&&t.render)||t.backupOnly}function Hl(){let e=P.getConfig("exchangeId");return!("number"!=typeof e||!isFinite(e))||!("string"!=typeof e||""===e.trim()||!isFinite(Number(e)))}function Jl(e,t){let n="",r="0";return vl&&vl.hasOwnProperty("gdprApplies")&&(r=vl.gdprApplies?"1":"0"),vl&&vl.hasOwnProperty("consentString")&&(n=vl.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==yl?"&site_id="+yl.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+r+"&gdpr_consent="+n+"&us_privacy="+(wl||"")}function Kl(e){return e.imp.forEach(((t,n)=>{const r=t.ext;if(null==r)return e;Yl(t)<2||Object.keys(r).forEach((i=>{if(si in t){const o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].banner.ext[i],void 0!==t.banner.format)for(let o=0;o<t.banner.format.length;o++)null!=t.banner.format[o].ext&&null!=t.banner.format[o].ext[i]&&t.banner.format[o].ext[i]==r[i]&&delete e.imp[n].banner.format[o].ext[i]}if(ai in t){const o=t.video.ext;void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].video.ext[i]}if(oi in t){const o=t.native.ext;void 0!==o&&void 0!==o[i]&&o[i]==r[i]&&delete e.imp[n].native.ext[i]}}))})),e}function Xl(e){return e.imp.forEach(((t,n)=>{if(null==t.ext)return e;if(!(Yl(t)<2)){if(si in t){const r=t.banner.ext;if(void 0!==r&&void 0!==r.siteID&&delete e.imp[n].banner.ext.siteID,void 0!==t.banner.format)for(let r=0;r<t.banner.format.length;r++)void 0!==t.banner.format[r].ext&&void 0!==t.banner.format[r].ext.siteID&&(ht(e.imp[n],"ext.siteID",t.banner.format[r].ext.siteID),ht(e,"ext.ixdiag.usid",!0),delete e.imp[n].banner.format[r].ext.siteID)}if(ai in t){const r=t.video.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[n].video.ext.siteID}if(oi in t){const r=t.native.ext;void 0!==r&&void 0!==r.siteID&&delete e.imp[n].native.ext.siteID}}})),e}function Yl(e){let t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function Ql(e){return null==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}Zn({code:rl,gvlid:10,aliases:[{code:il,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:ol,isBidRequestValid:e=>{fl||(kt(v.AUCTION_DEBUG,Ll),kt(v.AD_RENDER_FAILED,Ll),fl=!0);const t=b(e,"params.video"),n=b(e,"params.size"),r=b(e,"mediaTypes.banner.sizes"),i=b(e,"mediaTypes.video"),o=b(e,"mediaTypes.video.playerSize"),a=e.params.hasOwnProperty("bidFloor"),s=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!Be(ol,e.mediaType))return fe("IX Bid Adapter: media type is not supported."),!1;if(b(e,"mediaTypes.banner")&&!r)return!1;if(n){const t=El(n);if(!t)return he("IX Bid Adapter: size has invalid format.",{bidder:rl,code:1}),!1;if(!kl(e.sizes,t)&&!kl(o,t)&&!kl(r,t))return he("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:rl,code:2}),!1}if(!Hl()&&null==e.params.siteId)return he("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return he("IX Bid Adapter: siteId must be string or number type.",{bidder:rl,code:4}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return he("IX Bid Adapter: siteId must valid value",{bidder:rl,code:4}),!1}if((a||s)&&!(a&&s&&(d=e.params.bidFloor,c=e.params.bidFloorCur,Boolean("number"==typeof d&&"string"==typeof c&&c.match(/^[A-Z]{3}$/)))))return he("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:rl,code:5}),!1;var d,c;if(i&&t){const n=Cl(e).video,r=_l(i,t);if(b(e,"mediaTypes.video.context")===Bn&&Gl(e)&&n){const e=[b(n,"w"),b(n,"h")];if(!(e[0]>=al[0]&&e[1]>=al[1]))return he(`IX Bid Adapter: ${e} is an invalid size for IX outstream renderer`),!1}if(r.length)return r.forEach((e=>{he(e,{bidder:rl,code:3})})),!1}return(e=>void 0===b(e,"mediaTypes.native")||e.nativeOrtbRequest&&Array.isArray(e.nativeOrtbRequest.assets)&&e.nativeOrtbRequest.assets.length>0)(e)},resetSiteID:()=>{yl=0},buildRequests:(e,t)=>{const n=[],r={},i={},o={},a={};bl.getFeatureToggles(),e.forEach((e=>{const n=Object.keys(b(e,"mediaTypes",{}));for(const s in n)switch(n[s]){case si:Ml(e,a,r,t);break;case ai:ql(e,i);break;case oi:Nl(e,o);break;default:fe(`IX Bid Adapter: ad unit mediaTypes ${s} is not supported`)}}));for(let t in a)if(a.hasOwnProperty(t)){let n=a[t].missingSizes;r.hasOwnProperty(t)||(r[t]={}),r[t].hasOwnProperty("missingImps")||(r[t].missingImps=[],r[t].missingCount=0);let i=a[t].impression;for(let o=0;o<n.length;o++){let a=Fl(e[0],i,n[o]);r[t].missingImps.push(a),r[t].missingCount++}}let s=[];return Object.keys(r).length>0&&s.push(r),Object.keys(i).length>0&&s.push(i),Object.keys(o).length>0&&s.push(o),bl.isFeatureEnabled("pbjs_enable_multiformat")?n.push(...Rl(e,t,(e=>{const t={};return e.forEach((e=>{Object.keys(e).forEach((n=>{Object.keys(t).includes(n)?t[n].hasOwnProperty("ixImps")&&e[n].hasOwnProperty("ixImps")?t[n].ixImps=[...t[n].ixImps,...e[n].ixImps]:t[n].hasOwnProperty("missingImps")&&e[n].hasOwnProperty("missingImps")?t[n].missingImps=[...t[n].missingImps,...e[n].missingImps]:e[n].hasOwnProperty("ixImps")?t[n].ixImps=e[n].ixImps:e[n].hasOwnProperty("missingImps")&&(t[n].missingImps=e[n].missingImps):t[n]=e[n]}))})),t})(s))):(Object.keys(r).length>0&&n.push(...Rl(e,t,r)),Object.keys(i).length>0&&n.push(...Rl(e,t,i)),Object.keys(o).length>0&&n.push(...Rl(e,t,o))),n},interpretResponse:(e,t)=>{const n=[];let r=null,i=b(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(bl.setFeatureToggles(e),!e.hasOwnProperty("body"))return n;const o=e.body,a=o.seatbid||[];for(let e=0;e<a.length;e++){if(!a[e].hasOwnProperty("bid"))continue;const i=a[e].bid,s=t.data;for(let e=0;e<i.length;e++){const a=Ol(i[e].impid,s.imp,t.validBidRequests);if(r=Tl(i[e],o.cur,a),r.mediaType===ai&&Gl(a)){const t=b(o,"ext.videoplayerurl");if(r.renderer=Vl(i[e].bidId,t),!r.renderer)continue}n.push(r)}if(b(s,"ext.ixdiag.err")&&hl.localStorageIsEnabled())try{hl.removeDataFromLocalStorage(gl)}catch(e){he("ix can not clear ixdiag from localStorage.")}}if(!(Array.isArray(i)&&i.length>0))return n;i=i.filter((e=>!!(e=>"object"==typeof e&&null!==e)(e)||(fe("Malformed auction config detected:",e),!1)));try{return{bids:n,fledgeAuctionConfigs:i}}catch(e){return fe("Error attaching AuctionConfigs",e),n}},transformBidParams:(e,t)=>Ls({siteID:"number"},e),getUserSyncs:(e,t)=>{const n=[];let r=null;if(t.length>0&&(r=b(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==r&&0==r)return[];if(e.iframeEnabled)n.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{let e=null;P.getConfig("userSync")&&(e=P.getConfig("userSync").syncsPerBidder),0===e&&(e=r),e=r&&(0===e||e)?r>e?e:r:1;for(let t=0;t<e;t++)n.push({type:"image",url:Jl(e,t)})}return n}}),a("ixBidAdapter");const Zl="33across",eu=["33across_mgni"],tu=/^[a-zA-Z0-9_-]{22}$/,nu="instream",ru=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],iu={uniqueSiteIds:[]};function ou(e){return`${e.params.siteId}:${e.params.productId}`}function au(e){return`${e.bidId}`}function su(e){let{bidRequests:t,gdprConsent:n={},uspConsent:r,gppConsent:i={},pageUrl:o,referer:a,ttxSettings:s,bidderRequest:d}=e;const c={},l=t[0],{siteId:u,test:p}=l.params,g=P.getConfig("coppa");return c.imp=[],t.forEach((e=>{c.imp.push((e=>{const t=b(e,"ortb2Imp.ext.gpid"),n={id:e.bidId,ext:{ttx:{prod:b(e,"params.productId")},...t?{gpid:t}:{}}};return b(e,"mediaTypes.banner")&&(n.banner={...pu(e)}),b(e,"mediaTypes.video")&&(n.video=(e=>{const t={...b(e,"mediaTypes.video",{}),...b(e,"params.video",{})},n={},{w:r,h:i}=cu(t.playerSize[0]);n.w=r,n.h=i,ru.forEach((e=>{t.hasOwnProperty(e)&&(n[e]=t[e])}));const o=uu(e);if(n.placement=n.placement||2,o===nu&&(n.startdelay=n.startdelay||0,n.placement=1),"function"==typeof e.getFloor){const t=gu(e,{w:n.w,h:n.h},ai);t&&Object.assign(n,{ext:{ttx:{bidfloors:[t]}}})}return n})(e)),n})(e))})),c.site={id:u},c.device=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=ue(),n={ext:{ttx:{...fu(),pxr:t.devicePixelRatio,vp:mu(),ah:t.screen.availHeight,mtp:t.navigator.maxTouchPoints}}};return e.sua&&(n.sua=at(e.sua,["browsers","platform","model","mobile"])),n}(l.ortb2?.device),o&&(c.site.page=o),a&&(c.site.ref=a),c.id=d?.bidderRequestId,n.consentString&&(c.user=du(c.user,{consent:n.consentString})),Array.isArray(l.userIdAsEids)&&l.userIdAsEids.length>0&&(c.user=du(c.user,{eids:l.userIdAsEids})),c.regs=du(c.regs,{gdpr:Number(n.gdprApplies)}),r&&(c.regs=du(c.regs,{us_privacy:r})),i.gppString&&Object.assign(c.regs,{gpp:i.gppString,gpp_sid:i.applicableSections}),void 0!==g&&(c.regs.coppa=Number(!!g)),c.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"8.47.0"}]}},l.schain&&(c.source=du(c.source,{schain:l.schain})),1===p&&(c.test=1),{method:"POST",url:s&&s.url||`https://ssc.33across.com/api/v1/hb?guid=${u}`,data:JSON.stringify(c),options:{contentType:"text/plain",withCredentials:!0}}}function du(){return gt({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{ext:arguments.length>1?arguments[1]:void 0})}function cu(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function lu(e){return gt({},e,{params:{productId:uu(e)}})}function uu(e){const{params:t,mediaTypes:n}=e,{banner:r,video:i}=n;return i&&!r&&"instream"===i.context?nu:"inview"===t.productId?t.productId:"siab"}function pu(e){const t=b(e,"mediaTypes.banner",{}),n=(r=e.adUnitCode,document.getElementById(r)||document.getElementById((e=>{if(Ge()){const t=googletag.pubads().getSlots(),n=hd(e);for(let r=0;r<t.length;r++)if(n(t[r])){const n=t[r].getSlotElementId();return me(`[33Across Adapter] Map ad unit path to HTML element id: '${e}' -> ${n}`),n}}return fe(`[33Across Adapter] Unable to locate element for ad unit code: '${e}'`),null})(r)));var r;const i=(e=>Ae(e)&&2===e.length&&!Ae(e[0])?[cu(e)]:e.map(cu))(t.sizes);let o;o="function"==typeof e.getFloor?i.map((t=>{const n=gu(e,t,si);let r;return n&&(r={ext:{ttx:{bidfloors:[n]}}}),Object.assign({},t,r)})):i;const a=(e=>e.reduce(((e,t)=>t.h*t.w<e.h*e.w?t:e)))(i),s=(e=>!(()=>{try{return ue()!==le()}catch(e){return!0}})()&&null!==e)(n)?function(e,t){let{w:n,h:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"visible"===t.document.visibilityState?function(e,t){let{w:n,h:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(e){let{w:t,h:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:r,height:i,left:o,top:a,right:s,bottom:d}=e.getBoundingClientRect();return(0===r||0===i)&&t&&n&&(r=t,i=n,s=o+t,d=a+n),{width:r,height:i,left:o,top:a,right:s,bottom:d}}(e,{w:n,h:r}),o=(e=>{const t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom};for(let n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t})([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},i]);let a,s;return null!==o?(a=o.width*o.height,s=i.width*i.height,a/s*100):0}(e,t,{w:n,h:r}):0}(n,le(),a):"nm",d=(e=>({ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}))(s);return{format:o,ext:d}}function gu(e,t,n){const r=e.getFloor({currency:"USD",mediaType:n,size:[t.w,t.h]});if(!isNaN(r.floor)&&"USD"===r.currency)return r.floor}function mu(){const e=(()=>{let e=ue();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e})().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}function fu(){const{innerWidth:e,innerHeight:t,screen:n}=ue(),[r,i]=[Math.max(n.width,n.height),Math.min(n.width,n.height)];return t>e?{w:i,h:r}:{w:r,h:i}}const hu={NON_MEASURABLE:"nm",code:Zl,aliases:eu,supportedMediaTypes:[si,ai],gvlid:58,isBidRequestValid:e=>(e=>!(e.bidder!==Zl&&!eu.includes(e.bidder)||!e.params)&&!!(e=>null!==(b(e,"params.siteId","")||"").trim().match(tu))(e))(e)&&(e=>{const t=b(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)})(e)&&(e=>{const t=b(e,"mediaTypes.video"),n=b(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;const r={...t,...n};return!(!Array.isArray(r.mimes)||0===r.mimes.length)&&(!(!Array.isArray(r.protocols)||0===r.protocols.length)&&((void 0===r.placement||"number"==typeof r.placement)&&("instream"!==t.context||void 0===r.startdelay||"number"==typeof r.startdelay)))})(e),buildRequests:(e,t)=>{const{ttxSettings:n,gdprConsent:r,uspConsent:i,gppConsent:o,pageUrl:a,referer:s}=((e,t)=>{const n=Object.assign({},P.getConfig("ttxSettings")),r=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent);return iu.uniqueSiteIds=e.map((e=>e.params.siteId)).filter(Fe),{ttxSettings:n,gdprConsent:r,uspConsent:t?.uspConsent,gppConsent:t?.gppConsent,pageUrl:t?.refererInfo?.page,referer:t?.refererInfo?.ref}})(e,t),d=((e,t)=>((e,t)=>{const n={};return e.forEach((e=>{const r=t(e);n[r]=n[r]||[],n[r].push(e)})),n})(t.map(lu),!0===(e&&e.enableSRAMode)?ou:au))(n,e),c=[];for(const e in d)c.push(su({bidRequests:d[e],gdprConsent:r,uspConsent:i,gppConsent:o,pageUrl:a,referer:s,ttxSettings:n,bidderRequest:t}));return c},interpretResponse:(e,t)=>{const{seatbid:n,cur:r="USD"}=e.body;return Ae(n)?n.filter((e=>Ae(e.bid)&&e.bid.length>0)).reduce(((e,t)=>e.concat(t.bid.map((e=>((e,t)=>{const n=e.adomain&&e.adomain.length,r={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:b(e,"ext.ttx.mediaType",si),currency:t,netRevenue:!0};return n&&(r.meta={advertiserDomains:e.adomain}),r.mediaType===ai&&("xml"===b(e,"ext.ttx.vastType","xml")?r.vastXml=r.ad:r.vastUrl=r.ad),r})(e,r))))),[]):[]},getUserSyncs:(e,t,n,r,i)=>{const o=e.iframeEnabled?iu.uniqueSiteIds.map((e=>(e=>{let{siteId:t="zzz000000000003zzz",gdprConsent:n={},uspConsent:r,gppConsent:i={}}=e;const o=P.getConfig("ttxSettings"),a=o&&o.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",{consentString:s,gdprApplies:d}=n,{gppString:c="",applicableSections:l=[]}=i,u={type:"iframe",url:`${a}&id=${t}&gdpr_consent=${encodeURIComponent(s)}&us_privacy=${encodeURIComponent(r)}&gpp=${encodeURIComponent(c)}&gpp_sid=${encodeURIComponent(l.join(","))}`};return"boolean"==typeof d&&(u.url+=`&gdpr=${Number(d)}`),u})({gdprConsent:n,uspConsent:r,gppConsent:i,siteId:e}))):[];return iu.uniqueSiteIds=[],o}};Zn(hu),a("33acrossBidAdapter");const bu="Invalid schain object found: ",yu=" should be a string",vu=" should be an Integer",wu=" should be an object",Iu={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},Cu=[];Ue(Iu,(e=>Cu.push(e))),Xr.makeBidRequests.after((function(e,t){const n=P.getConfig("schain"),r=P.getBidderConfig();t.forEach((e=>{let t=e.bidderCode,i=(e=>r[e]&&r[e].schain||n)(t);e.bids.forEach((e=>{let n=function(e,t){let n=Iu.STRICT;if((e=>!(void 0===e||!_e(e)&&(he(bu+"the following schain config will not be used as schain is not an object.",e),1)))(e)){if(Te(e.validation)&&-1!=Cu.indexOf(e.validation)&&(n=e.validation),n===Iu.OFF)return e.config;if(((e,t)=>{let n="Detected something wrong within an schain config:",r="";function i(e){r+="\n"+e}function o(){!0===t?he(n,e,r):fe(n,e,r)}if(!_e(e)&&(i("schain.config"+wu),o(),t))return!1;if(ke(e.complete)&&ot(e.complete)||i("schain.config.complete"+vu),Te(e.ver)||i("schain.config.ver"+yu),e.hasOwnProperty("ext")&&(_e(e.ext)||i("schain.config.ext"+wu)),Ae(e.nodes))e.nodes.forEach(((e,t)=>{Te(e.asi)||i(`schain.config.nodes[${t}].asi`+yu),Te(e.sid)||i(`schain.config.nodes[${t}].sid`+yu),ke(e.hp)&&ot(e.hp)||i(`schain.config.nodes[${t}].hp`+vu),e.hasOwnProperty("rid")&&(Te(e.rid)||i(`schain.config.nodes[${t}].rid`+yu)),e.hasOwnProperty("name")&&(Te(e.name)||i(`schain.config.nodes[${t}].name`+yu)),e.hasOwnProperty("domain")&&(Te(e.domain)||i(`schain.config.nodes[${t}].domain`+yu)),e.hasOwnProperty("ext")&&(_e(e.ext)||i(`schain.config.nodes[${t}].ext`+wu))}));else if(i("schain.config.nodes should be an Array"),o(),t)return!1;return!(r.length>0&&(o(),t))})(e.config,!(n!==Iu.STRICT)))return e.config;he(bu+`due to the 'strict' validation setting, this schain config will not be passed to bidder '${t}'.  See above error for details.`)}return null}(i,t);n&&(e.schain=Je(n))}))})),e(t)})),Cs({type:fs,name:"sourceExtSchain",fn:(e,t,n)=>{if(!b(e,"source.ext.schain")){const t=b(n,"bidRequests.0.schain");t&&ht(e,"source.ext.schain",t)}}}),a("schain");const xu="criteo",Su=ti({moduleType:Yt,moduleName:xu}),Tu="cto_bidid",Au="cto_bundle",ku="html5",_u="cookie",Eu=new Date(0).toString(),Ou=new Date(Ye()+33696e6).toString();function Ru(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=lt(e,{noDecodeWholeURL:!0});return t?`${n.hostname}`:`${n.protocol}://${n.hostname}${n.port?":"+n.port:""}/`}function Uu(e,t){return e?.storage?.type===ku?Su.getDataFromLocalStorage(t):e?.storage?.type===_u?Su.getCookie(t):Su.getCookie(t)||Su.getDataFromLocalStorage(t)}function Bu(e,t,n,r){t&&n&&(e?.storage?.type===ku?Su.setDataInLocalStorage(t,n):(e?.storage?.type===_u||Su.setDataInLocalStorage(t,n),ju(t,n,Ou,r,!0)))}function ju(e,t,n,r,i){const o=r.split(".");for(let r=0;r<o.length;++r){const a=o.slice(o.length-r-1,o.length).join(".");try{if(Su.setCookie(e,t,n,null,"."+a),i){const n=Su.getCookie(e);if(n&&n===t)break}}catch(e){}}}sn("userId",{name:xu,gvlid:91,decode:e=>e,getId(e){let t=(e=>({bundle:Uu(e,Au),dnaBundle:Uu(e,"cto_dna_bundle"),bidId:Uu(e,Tu)}))(e);return{id:t.bidId?{criteoId:t.bidId}:void 0,callback:n=>function(e,t,n){const r=(void 0===e?.storage?.type||e?.storage?.type===_u)&&Su.cookiesAreEnabled(),i=(void 0===e?.storage?.type||e?.storage?.type===ku)&&Su.localStorageIsEnabled(),o=Ru(fr().page),a=Ru(document.location.href,!0),s="undefined"!=typeof criteo_pubtag,d=((e,t,n,r,i,o,a)=>{let s="https://gum.criteo.com/sid/json?origin=prebid"+(e?"&topUrl="+encodeURIComponent(e):"")+(t?"&domain="+encodeURIComponent(t):"")+(n?"&bundle="+encodeURIComponent(n):"")+(r?"&info="+encodeURIComponent(r):"")+(i?"&cw=1":"")+(a?"&pbt=1":"")+(o?"&lsw=1":"");const d=wr.getConsentData();d&&(s+=`&us_privacy=${encodeURIComponent(d)}`);const c=vr.getConsentData();c&&(s=s+""+(c.consentString?"&gdprString="+encodeURIComponent(c.consentString):""),s=s+"&gdpr="+(!0===c.gdprApplies?1:0));const l=Ir.getConsentData();return l&&(s=s+""+(l.gppString?"&gpp="+encodeURIComponent(l.gppString):""),s=s+""+(l.applicableSections?"&gpp_sid="+encodeURIComponent(l.applicableSections):"")),s})(o,a,t.bundle,t.dnaBundle,r,i,s),c={success:t=>{const r=JSON.parse(t);if(r.pixels&&r.pixels.forEach((t=>((e,t,n)=>{n.writeBundleInStorage&&n.bundlePropertyName&&n.storageKeyName?qt(n.pixelUrl,{success:r=>{if(r){const i=JSON.parse(r);i&&i[n.bundlePropertyName]&&Bu(e,n.storageKeyName,i[n.bundlePropertyName],t)}},error:e=>{he("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):$e(n.pixelUrl)})(e,a,t))),r.acwsUrl?("string"==typeof r.acwsUrl?[r.acwsUrl]:r.acwsUrl).forEach((e=>$e(e))):r.bundle&&Bu(e,Au,r.bundle,a),r.bidId){Bu(e,Tu,r.bidId,a);const t={criteoId:r.bidId};n(t)}else ju(i=Tu,"",Eu,a,!0),Su.removeDataFromLocalStorage(i),n();var i},error:e=>{he("criteoIdSystem: unable to sync user id",e),n()}};qt(d,c,void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}(e,t,n)}},eids:{criteoId:{source:"criteo.com",atype:1}}}),a("criteoIdSystem");const Du=ti({moduleType:Yt,moduleName:"sharedId"}),Pu="cookie",$u="html5",zu="_pubcid_optout",Nu="PublisherCommonId";function qu(e,t){if(t===Pu)return Du.getCookie(e);if(t===$u&&Du.hasLocalStorage()){const t=Du.getDataFromLocalStorage(`${e}_exp`);if(!t)return Du.getDataFromLocalStorage(e);if(new Date(t).getTime()-Date.now()>0)return Du.getDataFromLocalStorage(e)}}function Mu(e,t){return(n,r)=>{t?Fu(t,e,(()=>{n(r()||e)}))():n(e)}}function Fu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;if(!e)return;const r=lt(e);r.search.id=encodeURIComponent("pubcid:"+t);const i=ut(r);return()=>{$e(i,n)}}function Lu(){return!!(Du.cookiesAreEnabled()&&qu(zu,Pu)||Du.hasLocalStorage()&&qu(zu,$u))}const Wu={name:"sharedId",aliasName:"pubCommonId",gvlid:br,decode(e,t){if(!Lu())return me(" Decoded value PubCommonId "+e),{pubcid:e};me("PubCommonId decode: Has opted-out")},getId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(Lu())return void me("PubCommonId: Has opted-out");if(Cr.getCoppa())return void me("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");const{params:{create:n=!0,pixelUrl:r}={}}=e;let i=t;if(!i){try{"object"==typeof window[Nu]&&(i=window[Nu].getId())}catch(e){}i||(i=n&&Qe()?ae():void 0)}return{id:i,callback:Mu(i,r)}},extendId:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(Lu())return me("PubCommonId: Has opted-out"),{id:void 0};if(Cr.getCoppa())return void me("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");const{params:{extend:n=!1,pixelUrl:r}={}}=e;return n?r?{callback:Fu(r,t)}:{id:t}:void 0},domainOverride:(e=>()=>{const t=document.domain.split("."),n=`_gd${Date.now()}_sharedId`;for(let r,i,o=0;o<t.length;o++){const a=t.slice(o).join(".");if(e.setCookie(n,"1",void 0,void 0,a),i=e.getCookie(n),e.setCookie(n,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==i)return r;r=a}})(Du),eids:{pubcid:{source:"pubcid.org",atype:1}}};function Vu(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t===n)return e;let i=e;try{i=o().convertCurrency(e,t,n)}catch(e){if(!r)throw e}return i}sn("userId",Wu),a("sharedIdSystem");const Gu="Price Floors",Hu=Nt(1e4),Ju=Symbol();let Ku=[Ju,"gptSlot","adUnitCode","size","domain","mediaType"],Xu=!1,Yu=!1,Qu={},Zu=[],ep={};const tp=(()=>{let e;return()=>(null==e&&(e=lt(fr().topmostLocation,{noDecodeWholeURL:!0}).hostname),e)})();function np(e,t){let{index:n=Fi.index}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e?.adUnitCode||n.getAdUnit(t).code}let rp={[Ju]:()=>"*",size:(e,t)=>ce(t.size)||"*",mediaType:(e,t)=>t.mediaType||"banner",gptSlot:(e,t)=>function(e){let{index:t=Fi.index}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.getAdUnit({adUnitId:e});return"gam"===b(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).adUnitId)||bd(np(e,t)).gptSlot,domain:tp,adUnitCode:(e,t)=>np(e,t)};function ip(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=((e,t,n)=>e.length?e.reduce(((e,r)=>{let i=rp[r](t,n)||"*";return e.push("*"===i?["*"]:[i.toLowerCase(),"*"]),e}),[]):[])(b(e,"schema.fields")||[],t,n);if(!r.length)return{matchingFloor:void 0};let i=r.map((e=>e[0])).join("-"),o=b(e,`matchingInputs.${i}`);if(o)return{...o};let a=(s=r,c=b(e,"schema.delimiter")||"|",s.reduce(((e,t)=>{let n=[];return e.map((e=>{t.map((t=>{n.push(e+c+t)}))})),n})).sort(((e,t)=>e.split("*").length-t.split("*").length)));var s,c;let l=d(a,(t=>e.values.hasOwnProperty(t))),u={floorMin:e.floorMin||0,floorRuleValue:e.values[l],matchingData:a[0],matchingRule:l===e.meta?.defaultRule?void 0:l};const p=b(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof p&&(u.floorMin=p),u.matchingFloor=Math.max(u.floorMin,u.floorRuleValue),ht(e,`matchingInputs.${i}`,{...u}),u}function op(e,t,n){return parseFloat(ci(e,{...t,cpm:e},n))}const ap={banner:e=>b(e,"mediaTypes.banner.sizes")||[],video:e=>b(e,"mediaTypes.video.playerSize")||[],native:e=>b(e,"mediaTypes.native.image.sizes")?[b(e,"mediaTypes.native.image.sizes")]:[]};function sp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},t=this,n=ep[t.auctionId];if(!n||n.skipped)return{};e=((e,t)=>{let n=Object.keys(e.mediaTypes||{});return"*"===t.mediaType&&1===n.length&&(t.mediaType=n[0]),"*"===t.size&&-1!==n.indexOf(t.mediaType)&&ap[t.mediaType]&&1===ap[t.mediaType](e).length&&(t.size=ap[t.mediaType](e)[0]),t})(t,e);let r=ip(n.data,{...t},{mediaType:e.mediaType,size:e.size}),i=e.currency||n.data.currency;if(r.matchingFloor&&i!==n.data.currency)try{r.matchingFloor=o().convertCurrency(r.matchingFloor,n.data.currency,i)}catch(e){fe(`${Gu}: Unable to get currency conversion for getFloor for bidder ${t.bidder}. You must have currency module enabled with defaultRates in your currency config`),i=n.data.currency}if(n.enforcement.bidAdjustment&&r.matchingFloor){const e=Jt.get(t.bidder,"inverseBidAdjustment");if(e)r.matchingFloor=e(r.matchingFloor,t);else{let e=op(r.matchingFloor,null,t);r.matchingFloor=e?((e,t)=>{const n=Math.pow(10,10);return e*n/(t*n)*(e*n)/n})(r.matchingFloor,e):r.matchingFloor}}return r.matchingFloor?{floor:(a=r.matchingFloor,Math.ceil((parseFloat(a)*Math.pow(10,4)).toFixed(1))/Math.pow(10,4)),currency:i}:{};var a}function dp(e,t){let n=Je(e);return n.schema.delimiter=e.schema.delimiter||"|",n.values=((e,t)=>{let n=e.schema.fields,r=e.schema.delimiter,i=t&&-1===n.indexOf("adUnitCode")&&n.unshift("adUnitCode");return Object.keys(e.values).reduce(((n,o)=>(n[(i?`${t}${r}${o}`:o).toLowerCase()]=e.values[o],n)),{})})(n,t),n.currency=n.currency||"USD",n}function cp(e){e.hasExited||(Zu=Zu.filter((t=>t.timer!==e.timer)),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||ae(),ep[e.reqBidsConfigObj.auctionId]=function(e,t){let n=Je(Qu);if(2===b(n,"data.floorsSchemaVersion")){let{modelGroups:e,...t}=n.data;n.data=Object.assign(t,((e,t)=>{let n=Math.floor(Math.random()*t+1);for(let t=0;t<e.length;t++)if(n-=e[t].modelWeight,n<=0)return e[t]})(e,t.modelWeightSum))}let r=0===Object.keys(b(n,"data.values")||{}).length;if(n.data=r?(e=>{const t=e.find((e=>null!=e.floors?.schema));return e.reduce(((e,n)=>{if(null!=n.floors?.schema&&!pt(n.floors.schema,t?.floors?.schema))return he(`${Gu}: adUnit '${n.code}' declares a different schema from one previously declared by adUnit '${t.code}'. Floor config for '${n.code}' will be ignored.`),e;const r=Object.assign({},t?.floors,{values:void 0},n.floors);if(pp(r))if(e.values){let t=dp(r,n.code).values;Object.assign(e.values,t)}else(e=dp(r,n.code)).location="adUnit";else null!=n.floors&&fe(`adUnit '${n.code}' provides an invalid \`floor\` definition, it will be ignored for floor calculations`,n);return e}),{})})(e):dp(n.data),0===Object.keys(b(n,"data.values")||{}).length)n.skipped=!0,n.skippedReason="not_found";else{const e=Ce("pbjs_skipRate")||(b(n,"data.skipRate")??n.skipRate),t=100*Math.random()<parseFloat(e);n.skipped=t,t&&(n.skippedReason="random")}return n.hasOwnProperty("floorMin")&&(n.data.floorMin=n.floorMin),((e,t,n)=>{const r=(e=>{const{data:t,enforcement:n}=e;return t?.noFloorSignalBidders?.length>0?t.noFloorSignalBidders:n?.noFloorSignalBidders?.length>0?n.noFloorSignalBidders:[]})(t);e.forEach((e=>{e.bids.forEach((e=>{const i=r.some((t=>t===e.bidder));t.skipped||i?(i&&me(`noFloorSignal to ${e.bidder}`),delete e.getFloor):e.getFloor=sp,e.auctionId=n,e.floorData={noFloorSignaled:i,skipped:t.skipped,skipRate:b(t,"data.skipRate")??t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:b(t,"data.modelVersion"),modelWeight:b(t,"data.modelWeight"),modelTimestamp:b(t,"data.modelTimestamp"),location:b(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:Qu.fetchStatus}}))}))})(e,n,t),n}(e.reqBidsConfigObj.adUnits||o().adUnits,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0)}function lp(e){return e=(e=>{if(ke(e.default)){let t="*";const n=(e.schema?.fields||[]).length;n?t=Array(n).fill("*").join(e.schema?.delimiter||"|"):ht(e,"schema.fields",[Ju]),e.values=e.values||{},null==e.values[t]&&(e.values[t]=e.default,e.meta={defaultRule:t})}return e})(e),!!(e=>{if(Array.isArray(e)&&e.length>0){if(e.every((e=>Ku.includes(e))))return!0;he(`${Gu}: Fields received do not match allowed fields`)}return!1})(b(e,"schema.fields"))&&(t=e,n=e.schema.fields.length,r=e.schema.delimiter||"|","object"==typeof t.values&&(t.values=Object.keys(t.values).reduce(((e,i)=>(((e,t,n,r)=>"string"==typeof e&&e.split(r).length===n&&"number"==typeof t)(i,t.values[i],n,r)&&(e[i]=t.values[i]),e)),{}),Object.keys(t.values).length>0));var t,n,r}const up={1:e=>lp(e),2:e=>!(!Array.isArray(e.modelGroups)||0===e.modelGroups.length)&&(e.modelWeightSum=0,e.modelGroups.every((t=>!("number"!=typeof t.modelWeight||!lp(t)||(e.modelWeightSum+=t.modelWeight,0)))))};function pp(e){return"object"==typeof e&&(e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof up[e.floorsSchemaVersion]?(he(`${Gu}: Unknown floorsSchemaVersion: `,e.floorsSchemaVersion),!1):up[e.floorsSchemaVersion](e))}function gp(e,t){if(e&&"object"==typeof e&&pp(e))return me(`${Gu}: A ${t} set the auction floor data set to `,e),{...e,location:t};he(`${Gu}: The floors data did not contain correct values`,e)}const mp=Jn("priceFloors",(function(e,t){const n={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};Qu.auctionDelay>0&&Xu?(n.timer=setTimeout((()=>{fe(`${Gu}: Fetch attempt did not return in time for auction`),Qu.fetchStatus="timeout",cp(n)}),Qu.auctionDelay),Zu.push(n)):cp(n)}));function fp(){Zu.forEach((e=>{clearTimeout(e.timer),cp(e)})),Zu=[]}function hp(e){let t;Xu=!1,Qu.fetchStatus="success";try{t=JSON.parse(e)}catch(n){t=e}const n=gp(t,"fetch");n&&(Qu.data=n,Qu.skipRate=ke(n.skipRate)?n.skipRate:Qu.skipRate,Qu.floorProvider=n.floorProvider||Qu.floorProvider),fp()}function bp(e){Xu=!1,Qu.fetchStatus="error",he(`${Gu}: Fetch errored with: `,e),fp()}const yp=Kn("priceFloors",(function(e,t,n,r){let i=ep[n.auctionId];if(!i||!n||i.skipped)return e.call(this,t,n,r);const a=Fi.index.getBidRequest(n);let s,d=ip(i.data,a,{...n,size:[n.width,n.height]});if(!d.matchingFloor)return 0!==d.matchingFloor&&fe(`${Gu}: unable to determine a matching price floor for bidResponse`,n),e.call(this,t,n,r);let c=i.data.currency.toUpperCase(),l=n.currency||"USD";if(c===l.toUpperCase())s=n.cpm;else if(n.originalCurrency&&c===n.originalCurrency.toUpperCase())s=n.originalCpm;else try{s=o().convertCurrency(n.cpm,l.toUpperCase(),c)}catch(i){return he(`${Gu}: Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ${n}`),e.call(this,t,n,r)}return s=op(s,n,a),((e,t,n,r)=>{n.floorData={floorValue:t.matchingFloor,floorRule:t.matchingRule,floorRuleValue:t.floorRuleValue,floorCurrency:e.data.currency,cpmAfterAdjustments:r,enforcements:{...e.enforcement},matchedFields:{}},e.data.schema.fields.forEach(((r,i)=>{let o=t.matchingData.split(e.data.schema.delimiter)[i];n.floorData.matchedFields[r]=o}))})(i,d,n,s),((e,t,n)=>{let r=!1!==b(e,"enforcement.enforceJS"),i=!0===b(e,"enforcement.floorDeals")||!n.dealId,o=n.floorData.cpmAfterAdjustments<t.matchingFloor;return r&&o&&i})(i,d,n)?(r("Bid does not meet price floor"),void fe(`${Gu}: ${n.bidderCode}'s Bid Response for ${t} was rejected due to floor not met (adjusted cpm: ${n?.floorData?.cpmAfterAdjustments}, floor: ${d?.matchingFloor})`,n)):e.call(this,t,n,r)}));P.getConfig("floors",(e=>function(e){var t;Qu=at(e,["floorMin","enabled",e=>!1!==e,"auctionDelay",e=>e||0,"floorProvider",t=>b(e,"data.floorProvider",t),"endpoint",e=>e||{},"skipRate",()=>isNaN(b(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate,"enforcement",e=>at(e||{},["enforceJS",e=>!1!==e,"enforcePBS",e=>!0===e,"floorDeals",e=>!0===e,"bidAdjustment",e=>!1!==e,"noFloorSignalBidders",e=>e||[]]),"additionalSchemaFields",e=>{return"object"==typeof e&&Object.keys(e).length>0?(t=e,void Object.keys(t).forEach((e=>{-1===Ku.indexOf(e)&&"function"==typeof t[e]&&(Ku.push(e),rp[e]=t[e])}))):void 0;var t},"data",e=>e&&gp(e,"setConfig")||void 0]),Qu.enabled?((t=Qu.endpoint).url&&!Xu?"GET"!==(t.method||"GET")?he(`${Gu}: 'GET' is the only request method supported at this time!`):(Hu(t.url,{success:hp,error:bp},null,{method:"GET"}),Xu=!0):Xu&&fe(`${Gu}: A fetch is already occuring. Skipping.`),Yu||(kt(v.AUCTION_END,(e=>{setTimeout((()=>delete ep[e.auctionId]),3e3)})),o().requestBids.before(mp,50),on("addBidResponse").before(yp,ve()?4:50),Yu=!0)):(me(`${Gu}: Turning off module`),Qu={},ep={},on("addBidResponse").getHooks({hook:yp}).remove(),o().requestBids.getHooks({hook:mp}).remove(),Yu=!1)}(e.floors))),Cs({type:hs,name:"bidfloor",fn:(e,t,n)=>{if("function"==typeof t.getFloor){let r,i;try{({currency:r,floor:i}=t.getFloor({currency:n.currency||P.getConfig("currency.adServerCurrency")||"USD",mediaType:n.mediaType||"*",size:"*"}))}catch(e){return void fe("Cannot compute floor for bid",t)}i=parseFloat(i),null==r||null==i||isNaN(i)||Object.assign(e,{bidfloor:i,bidfloorcur:r})}}}),Cs({type:hs,name:"extPrebidFloors",fn:(e,t,n)=>{if(null!=e.bidfloor){let{floorMinCur:t,floorMin:r}=n.reqContext.floorMin||{};null==t&&(t=e.bidfloorcur);const i=e.ext?.prebid?.floors?.floorMinCur||e.ext?.prebid?.floorMinCur||t,o=e.ext?.prebid?.floors?.floorMin||e.ext?.prebid?.floorMin,a=Vu(e.bidfloor,e.bidfloorcur,t),s=!(!o||!i)&&Vu(o,i,t),d=s&&s<a?s:a;ht(e,"ext.prebid.floors.floorMin",d),(null==r||r>d)&&(r=d),n.reqContext.floorMin={floorMin:r,floorMinCur:t}}},dialects:[ws],priority:-1}),Cs({type:fs,name:"extPrebidFloors",fn:(e,t,n)=>{Yu&&ht(e,"ext.prebid.floors.enabled",e.ext?.prebid?.floors?.enabled||!1),n?.floorMin&&gt(e,{ext:{prebid:{floors:n.floorMin}}})},dialects:[ws]}),a("priceFloors");const vp=new Map;function wp(e){const t={};function n(e){const n=JSON.stringify([e.source?.toLowerCase(),e.ext]);t.hasOwnProperty(n)?t[n].uids.push(...e.uids):t[n]=e}return Object.entries(e).forEach((e=>{let[t,r]=e;r=Array.isArray(r)?r:[r],("pubProvidedId"===t?Je(r):r.map((e=>((e,t)=>{const n=vp.get(t);if(n&&e){let t={};t.source=Se(n.getSource)?n.getSource(e):n.source;const r=Se(n.getValue)?n.getValue(e):e;if(Te(r)){const i={id:r,atype:n.atype};if(Se(n.getUidExt)){const t=n.getUidExt(e);t&&(i.ext=t)}if(t.uids=[i],Se(n.getEidExt)){const r=n.getEidExt(e);r&&(t.ext=r)}return t}}return null})(e,t)))).filter((e=>null!=e)).forEach(n)})),Object.values(t)}const Ip=tn("sync",(()=>{})),Cp="User ID",xp=Qr,Sp=Yr,Tp="_pbjs_id_optout",Ap=ni("userId"),kp={isAllowed:wn};let _p,Ep,Op,Rp,Up,Bp=!1,jp=[],Dp=[],Pp={},$p=[];const zp=(()=>{let e;return()=>(null==e&&(e=Gn()),e)})();function Np(e){return zp().fork().renameWith((t=>[`userId.mod.${t}`,`userId.mods.${e}.${t}`]))}function qp(e,t){t=t||e.storageMgr;const n="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,r=e.config.storage.name;return(e,i,o)=>{t.setCookie(r+(e||""),i,o,"Lax",n)}}function Mp(e,t){const n=e.config.storage,r=e.storageMgr;try{const i=new Date(Date.now()+864e5*n.expires).toUTCString(),o=_e(t)?JSON.stringify(t):t;if(n.type===xp){const t=qp(e);t(null,o,i),t("_cst",og(),i),"number"==typeof n.refreshInSeconds&&t("_last",(new Date).toUTCString(),i)}else n.type===Sp&&(r.setDataInLocalStorage(`${n.name}_exp`,i),r.setDataInLocalStorage(`${n.name}_cst`,og()),r.setDataInLocalStorage(n.name,encodeURIComponent(o)),"number"==typeof n.refreshInSeconds&&r.setDataInLocalStorage(`${n.name}_last`,(new Date).toUTCString()))}catch(e){he(e)}}function Fp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const n=e.storageMgr,r=e.config.storage,i=t?`${r.name}_${t}`:r.name;let o;try{if(r.type===xp)o=n.getCookie(i);else if(r.type===Sp){const e=n.getDataFromLocalStorage(`${r.name}_exp`);""===e?o=n.getDataFromLocalStorage(i):e&&new Date(e).getTime()-Date.now()>0&&(o=decodeURIComponent(n.getDataFromLocalStorage(i)))}"string"==typeof o&&"{"===o.trim().charAt(0)&&(o=JSON.parse(o))}catch(e){he(e)}return o}function Lp(e,t,n){t=zp().fork().startTiming("userId.callbacks.total").stopBefore(t);const r=et((()=>{clearTimeout(void 0),t()}),e.length);e.forEach((e=>{const t=Np(e.submodule.name).startTiming("callback").stopBefore(r);try{e.callback((r=>{r?(e.config.storage&&Mp(e,r),e.idObj=e.submodule.decode(r,e.config),ag(Wp(n))):me(`${Cp}: ${e.submodule.name} - request id responded with an empty value`),t()}),Fp.bind(null,e))}catch(n){he(`Error in userID module '${e.submodule.name}':`,n),t()}e.callback=void 0}))}function Wp(e){return Array.isArray(e)&&e.length?Gp(e):{}}function Vp(e,t,n){return Object.fromEntries(Object.entries(e.reduce(((e,r)=>{const i=t(r);return i&&Object.keys(i).forEach((t=>{const o=Pp[t]?.indexOf(n(r)),a={priority:ke(o)?o:-1,value:i[t]};if(e[t]){const n=a.priority>e[t].priority?a:e[t];e[t]=n}else e[t]=a})),e}),{})).map((e=>{let[t,n]=e;return[t,n.value]})))}function Gp(e){return Vp(e.filter((e=>_e(e.idObj)&&Object.keys(e.idObj).length)),(e=>e.idObj),(e=>e.submodule.name))}const Hp={};let Jp;function Kp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qp()||[];const t=Rp&&e.find((e=>e.source===Rp));if(t&&"string"==typeof b(t,"uids.0.id")){const e=t.uids[0].id.replace(/[\W_]/g,"");if(e.length>=32&&e.length<=150)return e;fe(`User ID - Googletag Publisher Provided ID for ${Rp} is not between 32 and 150 characters - ${e}`)}}const Xp=Jn("userId",(function(e,t){let{delay:n=M.timeout,getIds:r=ig}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};M.race([r().catch((()=>null)),n(Op)]).then((()=>{(function(e,t){[e].some((e=>!Array.isArray(e)||!e.length))||e.forEach((e=>{e.bids&&Ae(e.bids)&&e.bids.forEach((e=>{const n=((e,t)=>Array.isArray(e)&&e.length&&t?Gp(e.filter((e=>!e.config.bidders||!Ae(e.config.bidders)||s(e.config.bidders,t)))):{})(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=wp(n))}))}))})(t.adUnits||o().adUnits,_p),zp().join(Vn(t.metrics),{propagate:!1,includeGroups:!0}),e.call(this,t)}))}));function Yp(){return Wp(_p)}function Qp(){return wp(Yp())}function Zp(e){return wp(((e,t)=>{if(!Array.isArray(e)||!e.length)return{};const n=Gp(e),r=Object.keys(n).find((e=>{const n=vp.get(e);return n?.source===t||Se(n?.getSource)&&n.getSource()===t}));return r?{[r]:n[r]}:[]})(_p,e))[0]}function eg(e,t,n){return Jp().then((()=>{let r={};if(Se(n)){me(`${Cp} - Getting encrypted signal from custom function : ${n.name} & source : ${e} `);const t=n(e);r[e]=t?tg(t):null}else{const n=Zp(e);me(`${Cp} - Getting encrypted signal for eids :${JSON.stringify(n)}`),Oe(n)||(r[n.source]=!0===t?tg(n):n.uids[0].id)}return me(`${Cp} - Fetching encrypted eids: ${r[e]}`),r[e]}))}function tg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";return 1===t&&(n="object"==typeof e?window.btoa(JSON.stringify(e)):window.btoa(e)),`${t}||${n}`}function ng(){if(!Ge())return;window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];const e=P.getConfig("userSync.encryptedSignalSources");if(e){const t=e.registerDelay||0;setTimeout((()=>{e.sources&&e.sources.forEach((e=>{let{source:t,encrypt:n,customFunc:r}=e;t.forEach((e=>{window.googletag.secureSignalProviders.push({id:e,collectorFunction:()=>eg(e,n,r)})}))}))}),t)}else fe(`${Cp} - ESP : encryptedSignalSources config not defined under userSync Object`)}function rg(){let{submoduleNames:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Jp({refresh:!0,submoduleNames:e}).then((()=>(t&&Se(t)&&t(),Yp())))}function ig(){return Jp().then((()=>Yp()),(e=>e===Hp?Promise.resolve().then(ig):(he("Error initializing userId",e),M.reject(e))))}function og(){let e=Number(Tr.hash);const t=[];for(;e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function ag(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yp();if(e&&Rp){const t=Kp(wp(e));t&&(Ge()?window.googletag.pubads().setPublisherProvidedId(t):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>{window.googletag.pubads().setPublisherProvidedId(t)}))))}}function sg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return zp().fork().measureTime("userId.init.modules",(()=>{if(!t.length)return[];if(t=t.filter((e=>(!e.config.storage||(e=>{switch(e.config?.storage?.type){case Sp:if(e.storageMgr.localStorageIsEnabled())return!Ap.getDataFromLocalStorage(Tp)||(me(`${Cp} - opt-out localStorage found, storage disabled`),!1);break;case xp:if(e.storageMgr.cookiesAreEnabled())return!Ap.getCookie(Tp)||(me(`${Cp} - opt-out cookie found, storage disabled`),!1)}return!1})(e))&&kp.isAllowed(Sn,Xn(Yt,e.config.name)))),!t.length)return fe(`${Cp} - no ID module configured`),[];const r=t.reduce(((e,r)=>Np(r.submodule.name).measureTime("init",(()=>{try{(function(e,t,n){const r=vr.getConsentData();if(e.config.storage){let n,i=Fp(e),o=!1;if("number"==typeof e.config.storage.refreshInSeconds){const t=new Date(Fp(e,"last"));o=t&&Date.now()-t.getTime()>1e3*e.config.storage.refreshInSeconds}!i||o||t||(e=>{const t=Fp(e,"cst");return!t||t!==og()})(e)?n=e.submodule.getId(e.config,r,i):"function"==typeof e.submodule.extendId&&(n=e.submodule.extendId(e.config,r,i)),_e(n)&&(n.id&&(Mp(e,n.id),i=n.id),"function"==typeof n.callback&&(e.callback=n.callback)),i&&(e.idObj=e.submodule.decode(i,e.config))}else if(e.config.value)e.idObj=e.config.value;else{const t=e.submodule.getId(e.config,r,void 0);_e(t)&&("function"==typeof t.callback&&(e.callback=t.callback),t.id&&(e.idObj=e.submodule.decode(t.id,e.config)))}ag(Wp(n))})(r,n,t),e.push(r)}catch(e){he(`Error in userID module '${r.submodule.name}':`,e)}return e}))),[]);return r.length&&function(e){let t=ne.setEidPermissions;"function"==typeof t&&Ae(e)&&t((e=>{let t=[];return e.filter((e=>_e(e.idObj)&&Object.keys(e.idObj).length)).forEach((e=>{Object.keys(e.idObj).forEach((n=>{const r=vp.get(n)||{};b(e,"config.bidders")&&Array.isArray(e.config.bidders)&&r.source&&t.push({source:r.source,bidders:e.config.bidders})}))})),t})(e))}(r),r.forEach(dg.bind(null,e)),r}))}function dg(e,t){let n=!1;for(let r=0;r<e.length;r++)if(t.config.name.toLowerCase()===e[r].config.name.toLowerCase()){n=!0,e[r]=t;break}n||e.push(t)}const cg=new Set([Sp,xp]);function lg(){!function(e){vp.clear(),Object.entries(Vp(e,(e=>e.eids),(e=>e.name))).forEach((e=>{let[t,n]=e;return vp.set(t,n)}))}($p);const e=(e=>Array.isArray(e)?e.reduce(((e,t)=>(!t||Re(t.name)||(t.storage&&!Re(t.storage.type)&&!Re(t.storage.name)&&cg.has(t.storage.type)||_e(t.value)?e.push(t):t.storage||t.value||e.push(t)),e)),[]):[])(Dp);if(!e.length)return;const t=$p.filter((e=>!d(jp,(t=>t.name===e.name))));jp.splice(0,jp.length),t.map((t=>{const n=d(e,(e=>e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())));return n&&t.name!==n.name&&(n.name=t.name),t.findRootDomain=sa,n?{submodule:t,config:n,callback:void 0,idObj:void 0,storageMgr:ti({moduleType:Yt,moduleName:n.name})}:null})).filter((e=>null!==e)).forEach((e=>jp.push(e))),!Bp&&jp.length&&(o().requestBids.before(Xp,40),Xr.callDataDeletionRequest.before(ug),Ip.after((e=>e(Kp()))),me(`${Cp} - usersync config updated for ${jp.length} submodules: `,jp.map((e=>e.submodule.name))),Bp=!0)}function ug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];me("UserID: received data deletion request; deleting all stored IDs..."),jp.forEach((e=>{if("function"==typeof e.submodule.onDataDeletionRequest)try{e.submodule.onDataDeletionRequest(e.config,e.idObj,...n)}catch(t){he(`Error calling onDataDeletionRequest for ID submodule ${e.submodule.name}`,t)}(e=>{let t,n;switch(e.config?.storage?.type){case xp:const r=qp(e,Ap),i=new Date(Date.now()-864e5).toUTCString();t=e=>r(e,"",i),n=["","_last","_cst"];break;case Sp:t=t=>Ap.removeDataFromLocalStorage(e.config.storage.name+t),n=["","_last","_exp","_cst"]}t&&n.forEach((e=>{try{t(e)}catch(e){he(e)}}))})(e)})),e.apply(this,n)}function pg(e){return function(){return Promise.resolve(e.apply(this,arguments))}}!function(e){let{delay:t=M.timeout}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Rp=void 0,jp=[],Dp=[],Bp=!1,_p=[],Jp=function(){let{delay:e=M.timeout}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=F(),n=F();let r,i,o=!1;function a(e){return i=zp().fork(),null!=r&&r.reject(Hp),r=F(),M.race([e,r.promise]).finally(i.startTiming("userId.total"))}let s=_p,d=jp;function c(e){return function(){if(s===_p&&d===jp)return e(...arguments)}}function l(){return Tr.promise.finally(i.startTiming("userId.init.consent"))}let u=a(M.all([rn,t.promise]).then(l).then(c((()=>{sg(s,d)}))).then((()=>n.promise.finally(i.startTiming("userId.callbacks.pending")))).then(c((()=>{const e=s.filter((e=>Se(e.callback)));if(e.length)return new M((t=>Lp(e,t,s)))}))));return function(){let{refresh:r=!1,submoduleNames:i=null,ready:p=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p&&!o&&(o=!0,t.resolve(),Op>0?n.resolve():kt(v.AUCTION_END,(function t(){_t(v.AUCTION_END,t),e(Ep).then(n.resolve)}))),r&&o&&(u=a(u.catch((()=>null)).then(l).then(c((()=>{const e=sg(s,d.filter((e=>null==i||i.includes(e.submodule.name))),!0).filter((e=>null!=e.callback));if(e.length)return new M((t=>Lp(e,t,s)))}))))),u}}({delay:t}),null!=Up&&Up(),$p=[],Up=e.getConfig("userSync",(e=>{const t=e.userSync;t&&(Rp=t.ppid,t.userIds&&(Dp=t.userIds,Ep=ke(t.syncDelay)?t.syncDelay:500,Op=ke(t.auctionDelay)?t.auctionDelay:0,lg(),((e,t)=>{if(e){const n={},r=new Map(t.map((e=>e.submodule.aliasName?[e.submodule.aliasName,e.submodule.name]:[])));Object.keys(e).forEach((t=>{const i=Ae(e[t])?[...e[t]].reverse():[];n[t]=i.map((e=>r.has(e)?r.get(e):e))})),Pp=n}else Pp={}})(t.idPriority,jp),Jp({ready:!0})))})),o().getUserIds=Yp,o().getUserIdsAsEids=Qp,o().getEncryptedEidsForSource=pg(eg),o().registerSignalSources=ng,o().refreshUserIds=pg(rg),o().getUserIdsAsync=pg(ig),o().getUserIdsAsEidBySource=Zp}(P),function(e,t){let{postInstallAllowed:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};tn("async",(r=>{r.forEach((e=>t(...e))),n&&(an[e]=t)}),e)([])}("userId",(e=>{d($p,(t=>t.name===e.name))||($p.push(e),xr.register(Yt,e.name,e.gvlid),lg(),Jp({refresh:!0,submoduleNames:[e.name]}))}),{postInstallAllowed:!0}),Cs({type:fs,name:"userExtEids",fn:(e,t,n)=>{const r=b(n,"bidRequests.0.userIdAsEids");r&&Object.keys(r).length>0&&ht(e,"user.ext.eids",r)}}),a("userId");const gg=0;function mg(e){let{apiName:t,apiVersion:n,apiArgs:r=["command","callback","parameter","version"],callbackArgs:i=["returnValue","success"],mode:o=gg}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;const s={},d=`${t}Call`,c=`${t}Return`;function l(e){const t="string"==typeof e.data&&e.data.includes(c)?JSON.parse(e.data):e.data;if(t?.[c]?.callId){const e=t[c];s.hasOwnProperty(e.callId)&&s[e.callId](...i.map((t=>e[t])))}}const[u,p]=(()=>{let e,n=a,r=!1;for(;null!=n;){try{if("function"==typeof n[t]){e=n,r=!0;break}}catch(e){}try{if(n.frames[`${t}Locator`]){e=n;break}}catch(e){}if(n===a.top)break;n=n.parent}return[e,r]})();if(!u)return;function g(e){return e=Object.assign({version:n},e),r.map((t=>[t,e[t]]))}function m(e,t,n,r){const i="function"==typeof e;return function(a,s){r&&r(),1!==o&&(null==s||s?t:n)(i?void 0:a),i&&e.apply(this,arguments)}}let f;return p?f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new M(((n,r)=>{const i=u[t](...g({...e,callback:e.callback||2===o?m(e.callback,n,r):void 0}).map((e=>{let[t,n]=e;return n})));(1===o||null==e.callback&&o===gg)&&n(i)}))}:(a.addEventListener("message",l,!1),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new M(((n,r)=>{const i=Math.random().toString(),a={[d]:{...Object.fromEntries(g(e).filter((e=>{let[t]=e;return"callback"!==t}))),callId:i}};s[i]=m(e?.callback,n,r,(t||null==e?.callback)&&(()=>{delete s[i]})),u.postMessage(a,"*"),1===o&&n()}))}),Object.assign(f,{isDirect:p,close(){!p&&a.removeEventListener("message",l)}})}let fg,hg,bg,yg,vg,wg,Ig=!1;const Cg={iab:e=>{let{onSuccess:t,onError:n,onEvent:r}=e;const i=mg({apiName:"__tcfapi",apiVersion:2,apiArgs:["command","version","callback","parameter"]});if(!i)return n("TCF2 CMP not found.");i.isDirect?me("Detected CMP API is directly accessible, calling it now..."):me("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),i({command:"addEventListener",callback:(e,i)=>{me("Received a response from CMP",e),i?(r(e),!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||Tg(e,{onSuccess:t,onError:n})):n("CMP unable to register callback function.  Please check CMP setup.")}})},static:e=>{let{onSuccess:t,onError:n}=e;Tg(yg,{onSuccess:t,onError:n})}};function xg(e){let t,n,r=!1,i=null,o=!1;function a(e){null!=i&&clearTimeout(i),r||null==e||(0===e?t():i=setTimeout(t,e))}function d(t,n,i){if(a(null),r=!0,vr.setConsentData(t),"function"==typeof e){for(var o=arguments.length,s=new Array(o>3?o-3:0),d=3;d<o;d++)s[d-3]=arguments[d];e(n,i,...s)}}if(!s(Object.keys(Cg),fg))return void d(null,!1,`CMP framework (${fg}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);const c={onSuccess:e=>d(e,!1),onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];d(null,!0,e,...n)},onEvent:e=>{n=e,o||(o=!0,null!=vg&&a(vg))}};t=()=>{const e=e=>{d(e,!1,(o?"Timeout waiting for user action on CMP":"CMP did not load")+", continuing auction...")};Tg(n,{onSuccess:e,onError:()=>e(Ag(void 0))})},Cg[fg](c),null!=vg&&o||a(hg)}const Sg=Jn("gdpr",(function(e,t){var n;n=function(n,r){if(r){let e=fe;n&&(e=he,r=`${r} Canceling auction as per consentManagement config.`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];e(r,...o)}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():he("Error executing bidsBackHandler")):e.call(this,t)},wg?(me("User consent information already known.  Pulling internally stored information..."),n(!1)):xg(n)}));function Tg(e,t){let{onSuccess:n,onError:r}=t;(()=>{const t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:bg,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||n&&Te(n)))})()?r("CMP returned unexpected value during lookup process.",e):n(Ag(e))}function Ag(e){return wg={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:bg},e&&e.addtlConsent&&Te(e.addtlConsent)&&(wg.addtlConsent=e.addtlConsent),wg.apiVersion=2,wg}P.getConfig("consentManagement",(e=>(e=>{(e=e&&(e.gdpr||e.usp||e.gpp?e.gdpr:e))&&"object"==typeof e?(Te(e.cmpApi)?fg=e.cmpApi:(fg="iab",me("consentManagement config did not specify cmp.  Using system default setting (iab).")),ke(e.timeout)?hg=e.timeout:(hg=1e4,me("consentManagement config did not specify timeout.  Using system default setting (10000).")),vg=ke(e.actionTimeout)?e.actionTimeout:null,bg=!0===e.defaultGdprScope,me("consentManagement module has been activated..."),"static"===fg&&(_e(e.consentData)?(yg=e.consentData,null!=yg?.getTCData&&(yg=yg.getTCData),hg=0):he("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Ig||o().requestBids.before(Sg,50),Ig=!0,vr.enable(),xg()):fe("consentManagement (gdpr) config not defined, exiting consent manager")})(e.consentManagement))),ya.before(((e,t)=>e(t.then((e=>{const t=vr.getConsentData();return t&&("boolean"==typeof t.gdprApplies&&ht(e,"regs.ext.gdpr",t.gdprApplies?1:0),ht(e,"user.ext.consent",t.consentString)),e}))))),Cs({type:fs,name:"gdprAddtlConsent",fn:(e,t)=>{const n=t.gdprConsent?.addtlConsent;n&&"string"==typeof n&&ht(e,"user.ext.ConsentedProvidersSettings.consented_providers",n)}}),a("consentManagement");let kg,_g,Eg,Og,Rg=!1;function Ug(e,t){let{onSuccess:n,onError:r}=t;new M((t=>t(e()))).then(n,(e=>{e instanceof Bg?r(e.message,...e.args):r("GPP error:",e)}))}class Bg{constructor(e,t){this.message=e,this.args=null==t?[]:[t]}}class jg{static CLIENTS={};static register(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.apiVersion=e,this.CLIENTS[e]=this,t&&(this.CLIENTS.default=this)}static INST;static init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mg,t=this.INST;if(!t){let n;const r=()=>n&&(this.INST=null);t=this.INST=this.ping(e).catch((e=>{throw n=!0,r(),e})),r()}return t.then((e=>{let[t,n]=e;return[t,t.initialized?t.refresh():t.init(n)]}))}static ping(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mg;const t={apiName:"__gpp",apiArgs:["command","callback","parameter"]},n=e({...t,mode:1});return new M(((r,i)=>{if(null==n)return void i(new Bg("GPP CMP not found"));let o=!1;const a=(n,a)=>{if(o)return;if(null!=a&&!a)return void i(n);if(null==n)return;o=!0;const s=n?.gppVersion,d=this.getClient(s);s!==d.apiVersion?fe(`Unrecognized GPP CMP version: ${s}. Continuing using GPP API version ${d}...`):me(`Using GPP version ${s}`);const c="1.0"===d.apiVersion?gg:2,l=new d(s,e({...t,mode:c}));r([l,n])};n({command:"ping",callback:a}).then((e=>a(e,!0)),i)})).finally((()=>{n&&n.close()}))}static getClient(e){return this.CLIENTS.hasOwnProperty(e)?this.CLIENTS[e]:this.CLIENTS.default}#l;#u;#p=[];initialized=!1;constructor(e,t){this.apiVersion=this.constructor.apiVersion,this.cmpVersion=t,this.cmp=t,[this.#l,this.#u]=[0,1].map((e=>t=>{for(;this.#p.length;)this.#p.pop()[e](t)}))}init(e){const t=this.updateWhenReady(e);return this.initialized||(this.initialized=!0,this.cmp({command:"addEventListener",callback:(e,t)=>{null==t||t?"error"===e?.pingData?.cmpStatus?this.#u(new Bg('CMP status is "error"; please check CMP setup',e)):this.isCMPReady(e?.pingData||{})&&this.events.includes(e?.eventName)&&this.#l(this.updateConsent(e.pingData)):this.#u(new Bg("Received error response from CMP",e))}})),t}refresh(){return this.cmp({command:"ping"}).then(this.updateWhenReady.bind(this))}updateConsent(e){return this.getGPPData(e).then((e=>{if(null==e||Oe(e))throw new Bg("Received empty response from CMP",e);return qg(e)})).then((e=>(me("Retrieved GPP consent from CMP:",e),e)))}nextUpdate(){return new M(((e,t)=>{this.#p.push([e,t])}))}updateWhenReady(e){return this.isCMPReady(e)?this.updateConsent(e):this.nextUpdate()}}class Dg extends jg{static#g=(()=>super.register("1.0"))();events=["sectionChange","cmpStatus"];isCMPReady(e){return"loaded"===e.cmpStatus}getGPPData(e){const t=M.all((e.supportedAPIs||e.apiSupport||[]).map((e=>this.cmp({command:"getSection",parameter:e}).catch((t=>{fe(`Could not retrieve GPP section '${e}'`,t)})).then((t=>[e,t]))))).then((e=>Object.fromEntries(e.filter((e=>{let[t,n]=e;return null!=n})).map((e=>{let[t,n]=e;const r=[Object.fromEntries(Object.entries(n).filter((e=>{let[t]=e;return"Gpc"!==t})))];return null!=n.Gpc&&r.push({SubsectionType:1,Gpc:n.Gpc}),[t,r]})))));return M.all([this.cmp({command:"getGPPData"}),t]).then((e=>{let[t,n]=e;return Object.assign({},t,{parsedSections:n})}))}}class Pg extends jg{static#g=(()=>super.register("1.1",!0))();events=["sectionChange","signalStatus"];isCMPReady(e){return"ready"===e.signalStatus}getGPPData(e){return M.resolve(e)}}const $g={iab:function(e){let{onSuccess:t,onError:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mg;Ug((()=>jg.init(r).then((e=>{let[t,n]=e;return n}))),{onSuccess:t,onError:n})},static:e=>Ug((()=>qg(Eg)),e)};function zg(e){let t=!1,n=null;function r(r,i,o){if(null!=n&&clearTimeout(n),t=!0,Ir.setConsentData(r),"function"==typeof e){for(var a=arguments.length,s=new Array(a>3?a-3:0),d=3;d<a;d++)s[d-3]=arguments[d];e(i,o,...s)}}if(!$g.hasOwnProperty(kg))return void r(null,!1,`GPP CMP framework (${kg}) is not a supported framework.  Aborting consentManagement module and resuming auction.`);const i={onSuccess:e=>r(e,!1),onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(null,!0,e,...n)}};if($g[kg](i),!t){const e=()=>{const e=e=>{r(e,!1,"GPP CMP did not load, continuing auction...")};Ug((()=>qg(Og)),{onSuccess:e,onError:()=>e(Mg())})};0===_g?e():n=setTimeout(e,_g)}}const Ng=Jn("gpp",(function(e,t){var n;n=function(n,r){if(r){let e=fe;n&&(e=he,r=`${r} Canceling auction as per consentManagement config.`);for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];e(r,...o)}n?(e.stopTiming(),"function"==typeof t.bidsBackHandler?t.bidsBackHandler():he("Error executing bidsBackHandler")):e.call(this,t)},Og?(me("User consent information already known.  Pulling internally stored information..."),n(!1)):zg(n)}));function qg(e){if(null!=e?.applicableSections&&!Array.isArray(e.applicableSections)||null!=e?.gppString&&!Te(e.gppString)||null!=e?.parsedSections&&!_e(e.parsedSections))throw new Bg("CMP returned unexpected value during lookup process.",e);return["usnatv1","uscav1"].forEach((t=>{e?.parsedSections?.[t]&&fe(`Received invalid section from cmp: '${t}'. Some functionality may not work as expected`,e)})),Mg(e)}function Mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Og={gppString:e?.gppString,applicableSections:e?.applicableSections||[],parsedSections:e?.parsedSections||{},gppData:e},Ir.setConsentData(e),Og}P.getConfig("consentManagement",(e=>(e=>{(e=e&&e.gpp)&&"object"==typeof e?(Te(e.cmpApi)?kg=e.cmpApi:(kg="iab",me("consentManagement.gpp config did not specify cmp.  Using system default setting (iab).")),ke(e.timeout)?_g=e.timeout:(_g=1e4,me("consentManagement.gpp config did not specify timeout.  Using system default setting (10000).")),"static"===kg&&(_e(e.consentData)?(Eg=e.consentData,_g=0):he("consentManagement.gpp config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),me("consentManagement.gpp module has been activated..."),Rg||(o().requestBids.before(Ng,50),yn.before(((e,t)=>e(Object.assign({gppConsent:Ir.getConsentData()},t))))),Rg=!0,Ir.enable(),zg()):fe("consentManagement.gpp config not defined, exiting consent manager module")})(e.consentManagement))),ya.before(((e,t)=>e(t.then((e=>{const t=Ir.getConsentData();return t&&(Array.isArray(t.applicableSections)&&ht(e,"regs.gpp_sid",t.applicableSections),ht(e,"regs.gpp",t.gppString)),e}))))),a("consentManagementGpp");const Fg="iab";let Lg,Wg,Vg=Fg,Gg=50,Hg=!1;const Jg={iab:e=>{let{onSuccess:t,onError:n}=e,r=(()=>{const e={};return{consentDataCallback:(r,i)=>{i&&r.uspString&&(e.usPrivacy=r.uspString),e.usPrivacy?Yg(e,{onSuccess:t,onError:n}):n("Unable to get USP consent string.")}}})();const i=mg({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!i)return n("USP CMP not found.");i.isDirect?me("Detected USP CMP is directly accessible, calling it now..."):me("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),i({command:"getUSPData",callback:r.consentDataCallback}),i({command:"registerDeletion",callback:(e,t)=>(null==t||t)&&Xr.callDataDeletionRequest(e)}).catch((e=>{he("Error invoking CMP `registerDeletion`:",e)}))},static:e=>{let{onSuccess:t,onError:n}=e;Yg(Lg,{onSuccess:t,onError:n})}};function Kg(e){let t=null,n=!1;function r(r,i){if(null!=t&&clearTimeout(t),n=!0,wr.setConsentData(r),null!=e){for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e(i,...a)}}if(!Jg[Vg])return void r(null,`USP framework (${Vg}) is not a supported framework. Aborting consentManagement module and resuming auction.`);const i={onSuccess:r,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r(null,`${e} Resuming auction without consent data as per consentManagement config.`,...n)}};Jg[Vg](i),n||(0===Gg?Yg(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),Gg))}const Xg=Jn("usp",(function(e,t){var n=this;Hg||Qg(),Kg((function(r){if(null!=r){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];fe(r,...o)}e.call(n,t)}))}));function Yg(e,t){let{onSuccess:n,onError:r}=t;e&&e.usPrivacy?((e=>{e&&e.usPrivacy&&(Wg=e.usPrivacy)})(e),n(Wg)):r("USPAPI returned unexpected value during lookup process.",e)}function Qg(){Hg||(me("USPAPI consentManagement module has been activated"+(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?"":` using default values (api: '${Vg}', timeout: ${Gg}ms)`)),Hg=!0,wr.enable()),Kg()}function Zg(e){return null!=e&&0!==e}function em(e){return["MspaServiceProviderMode","Gpc"].some((t=>1===e[t]))||2===e.PersonalDataConsents||1===e.KnownChildSensitiveDataConsents[0]||Zg(e.KnownChildSensitiveDataConsents[1])||0===e.MspaCoveredTransaction}function tm(e,t){return["SensitiveDataProcessingOptOutNotice","SensitiveDataLimitUseNotice"].some((n=>e[n]===t))}function nm(e){return em(e)||["Sale","Sharing","TargetedAdvertising"].some((t=>{const n=e[`${t}OptOut`],r=e[`${t}OptOutNotice`];return 1===n||2===r||2===n&&0===r}))||2===e.SharingNotice||2===e.SharingOptOut&&0===e.SharingNotice}P.getConfig("consentManagement",(e=>(e=>{(e=e&&e.usp)&&"object"==typeof e||fe("consentManagement.usp config not defined, using defaults"),e&&Te(e.cmpApi)?Vg=e.cmpApi:(Vg=Fg,me(`consentManagement.usp config did not specify cmpApi. Using system default setting (${Fg}).`)),e&&ke(e.timeout)?Gg=e.timeout:(Gg=50,me("consentManagement.usp config did not specify timeout. Using system default setting (50).")),"static"===Vg&&(_e(e.consentData)&&_e(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(Lg={usPrivacy:e.consentData.getUSPData.uspString}),Gg=0):he("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Qg(!0)})(e.consentManagement))),on("requestBids").before(Xg,50),ya.before(((e,t)=>e(t.then((e=>{const t=wr.getConsentData();return t&&ht(e,"regs.ext.us_privacy",t),e}))))),a("consentManagementUsp");const rm=(()=>{const e=[6,7,9,10,12].map((e=>--e)),t=Array.from(Array(12).keys()).filter((e=>7!==e)),n=t.filter((t=>!e.includes(t)));return r=>nm(r)||tm(r,2)||e.some((e=>Zg(r.SensitiveDataProcessing[e])))||n.some((e=>1===r.SensitiveDataProcessing[e]))||tm(r,0)&&t.some((e=>2===r.SensitiveDataProcessing[e]))})(),im={[Cn]:nm,[Sn]:nm,[xn]:rm,[_n]:e=>{const t=e.SensitiveDataProcessing[7];return 1===t||em(e)||tm(e,2)||tm(e,0)&&2===t}};let om=!1;P.getConfig("consentManagement",(e=>{null==e?.consentManagement?.gpp||om||(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:im,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vn,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>Ir.getConsentData();const a=[],s=`MSPA (GPP '${e}' for section${t.length>1?"s":""} ${t.join(", ")})`;me(`Enabling activity controls for ${s}`),Object.entries(r).forEach((r=>{let[d,c]=r;a.push(i(d,s,function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>Ir.getConsentData()?.applicableSections;return()=>{if(r().some((t=>e.includes(t)))){const e=t();if(null==e)return{allow:!1,reason:"consent data not available"};if(n(e))return{allow:!1}}}}(t,(()=>{return n((t=o()?.parsedSections?.[e],null==t?t:t.reduceRight(((e,t)=>Object.assign(t,e)),{})));var t}),c,(()=>o()?.applicableSections||[]))))}))}("usnat",[7]),om=!0)})),a("gppControl_usnat"),Wa.processQueue();const am=Wa},412:(e,t,n)=>{n.d(t,{C:()=>o,a:()=>i});var r=n(194);function i(e,t,n){for(const[i,o]of Object.entries(n))t[i]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.Rm.info("API",i,"is called",n.length?"with":"",...n),o(e,...n)}}function o(e,t){const n=e.core.slots.get(t)||t&&[...e.core.slots.values()].find((e=>{let{elemId:n,elem:r}=e;return n===t||r?.dataset.refId===t}));return n||r.Rm.warn("Cannot find slot by ID",t),n}},194:(e,t,n)=>{n.d(t,{sV:()=>i,L5:()=>m,YW:()=>c,L1:()=>u,Tz:()=>l,Ts:()=>d,s3:()=>p,Rm:()=>r.Rm,hj:()=>g});var r=n(633);class i{state={};handlers={};on(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;const r=this.handlers[e]||=[];let i=0;for(;i<r.length;++i){const[e,o]=r[i];if(e===n)return o.push(t),this;if(e>n)break}return r.splice(i,0,[n,[t]]),this}emit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{state:r}=this,i=this.handlers[e]||[],{firstStage:d=0}=n;let c=s(r,e,t,-1);if(n.sync){for(const[n,o]of i)if(n>=d&&(c=s(r,e,t,n),a(o,c),c.stopped))break;return c}const l=i.findIndex((e=>{let[t]=e;return t>=d}));return l<0?Promise.resolve(c):o(r,e,t,i,l)}}function o(e,t,n,r,i){const[d,c]=r[i],l=s(e,t,n,d);let u;const p=new Promise((e=>{u=e}));return l.next=e=>p.then(e),Promise.all(a(c,l)).then((()=>(u(),l.stopped||++i>=r.length?l:p.then((()=>o(e,t,n,r,i))))))}function a(e,t){const{type:n,stage:i}=t;function o(e){r.Rm.error("Events handler of",n,"stage",i,"throws",e)}r.Rm.trace("Events handling",n,"stage",i,"with data",t.data);const a=[];for(const n of e)try{const e=n(t);e?.then&&a.push(Promise.resolve(e).catch(o))}catch(e){o(e)}return a}function s(e,t,n,r){let i=!1;return{get type(){return t},get state(){return e},get data(){return n},stop(){i=!0},get stopped(){return i},get stage(){return r}}}function d(e,t){const{state:n}=e;n.events=e,n.core={slots:new Map},e.emit("init",t)}function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.name||="",t.id||=`${t.name||"slot"}-${Math.random().toString(36).slice(2,6)}`,e.core.slots.set(t.id,t),e.events.emit("slot.define",{slot:t},{sync:!0}),t.core={},t.id}function l(e,t){const n=e.core.slots.get(t);n&&(e.core.slots.delete(t),f(e,n))}function u(e){const t=[...e.core.slots.values()];e.core.slots.clear(),t.forEach((t=>{f(e,t)}))}function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=[];for(const n of t){const t=e.core.slots.get(n);t&&("loading"===t.core.state?r.Rm.warn("Slot",n,"is already loading ads"):(t.core.state="loading",i.push(t)))}i.length&&(n.slots=i,e.events.emit("ad.init",n))}function g(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=r.map((t=>e.core.slots.get(t))).filter((e=>e));o.length&&(i.slots=o,e.events.emit(t,i,{firstStage:n}))}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.core.slots.get(t);r&&"loading"===r.core.state&&(r.core.state="rendered",n.slot=r,e.events.emit("ad.rendered",n))}function f(e,t){t.destroyed=!0,delete t.core.state,e.events.emit("slot.destroy",{slot:t},{sync:!0})}},633:(e,t,n)=>{n.d(t,{Rm:()=>r,zs:()=>i});const r=new class{trace(){}info(){}warn=(()=>i("warn"))();error=(()=>i("error"))()};function i(e){return console[e].bind(console,"%cHTL","display:inline-block;color:#fff;background:#333;padding:1px 4px;border-radius:3px")}},648:(e,t,n)=>{n.d(t,{setup:()=>c});var r=n(194),i=n(633);const o=/(\s|^)slot$/i;function a(e,t){const n=(0,i.zs)(t);return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(let e=1;e<r.length;++e){const t=r[e-1];"string"==typeof t&&o.test(t)&&(r[e]=String(r[e]))}n((e=>{e=e/1e3%3600;const t=Math.floor(e/60),n=(e-60*t+100).toFixed(3).slice(1);return`[${String(t+100).slice(1)}:${n}]`})(Date.now()-e),...r)}}var s=n(416);const d=110;function c(e,t,n){const{state:o}=t;((e,t)=>{let{ts:n}=e;i.Rm.info=a(n,"log"),i.Rm.warn=a(n,"warn"),i.Rm.error=a(n,"error"),t&&(i.Rm.trace=a(n,"debug"))})(o,"verbose"===n),e.state=o,o.wnd.htlbid||=e,o.debug={},function(e){e.on("init",(e=>{(async e=>{let{state:t}=e;const{prebid:n}=t;if(!n)return;const i=await n.ready;i.onEvent("adRenderSucceeded",(e=>{let{bid:n}=e;for(const e of t.core.slots.values())if(e.ad?.prebid?.adUnit.code===n.adUnitCode)return void r.Rm.info("Slot",e.id,"rendered by prebid bidder",n.bidder)})),i.onEvent("adRenderFailed",(e=>{r.Rm.error("Prebid.js fails to render:",e)}))})(e)}),s.bk)}(t),t.on("init",l,d).on("slot.define",(e=>{let{data:t}=e;r.Rm.info("Slot",t.slot.id,"is defined with",t.slot)}),d).on("slot.destroy",(e=>{let{data:t}=e;r.Rm.info("Slot",t.slot.id,"is destroyed")}),d).on("ad.fetch",u,d).on("ad.rendered",p,0)}function l(e){let{state:t}=e;const{timing:n}=t;null!=n.load&&r.Rm.info("Timing load",n.load.toFixed()),r.Rm.info("Timing init",n.init.toFixed())}function u(e){let{state:t,data:n}=e;t.debug.loggedAdFetchTiming||(t.debug.loggedAdFetchTiming=!0,r.Rm.info("Timing 1st ad fetch",t.timing.adFetch.toFixed()));for(const e of n.slots)e.ad&&r.Rm.info("Slot",e.id,"fetching ads with targeting",e.ad.targeting)}function p(e){let{data:t}=e;const{slot:n,...i}=t;r.Rm.info("Slot",n.id,"is rendered with",i)}},731:(e,t,n)=>{n.d(t,{P:()=>s,T:()=>a});const r="htl-load",i="htl-init",o="htl-adFetch";function a(e){let{state:t}=e;const{performance:n}=t.wnd,o=n.mark(i),a=t.timing={};a.init=n.measure(i,{start:r,end:o.startTime}).duration,n.clearMeasures(i);const[s]=n.getEntriesByType("navigation");s&&(a.load=n.measure(r,{start:s.domInteractive,end:r}).duration,n.clearMeasures(r)),n.clearMarks(r)}function s(e){let{state:t}=e;if(!t.timing.adFetch){const{performance:e}=t.wnd;t.timing.adFetch=e.measure(o,i).duration,e.clearMarks(i),e.clearMeasures(o)}}},416:(e,t,n)=>{n.d(t,{Cm:()=>l,HZ:()=>o,LL:()=>g,PF:()=>b,Ry:()=>r,Uh:()=>c,_5:()=>u,_d:()=>m,bk:()=>s,eo:()=>f,iD:()=>a,lD:()=>p,n8:()=>v,ny:()=>d,rN:()=>y,sW:()=>i,yO:()=>h});const r=0,i=9,o=11,a=49,s=50,d=s+1,c=d+1,l=r+1,u=r+1,p=u+1,g=p+1,m=g+1,f=m+1,h=o,b=o+1,y=b+1,v=y+1},82:(e,t,n)=>{function r(e,t,n){const{document:r}=e,i=r.createElement("script");return i.src=t,i.async=!0,Object.assign(i,n),r.head.appendChild(i)}function i(e){const{documentElement:t}=e.document;return[t.clientWidth,t.clientHeight]}function o(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function a(e,t){let n=setTimeout((()=>{n=null,e()}),t);return()=>null!=n&&(clearTimeout(n),n=null,!0)}function s(e,t){let n;function r(){n=null,e()}function i(){n??=setTimeout(r,t)}return i.cancel=()=>{null!=n&&(clearTimeout(n),n=null)},i}function d(e,t){let n,r;function i(){n=null==n?0:n+t-Date.now(),n>0?(setTimeout(i,n),n=null):(r=!1,e())}return()=>{r?n=Date.now():(r=!0,n=null,setTimeout(i,t))}}function c(){let e,t;return[new Promise(((n,r)=>{e=n,t=r})),e,t]}function l(e){const[t,n,r]=c(),i=a(n,e);return[t,function(){i(),n(...arguments)},function(){i(),r(...arguments)}]}n.d(t,{BU:()=>h,Fs:()=>b,Hr:()=>i,Sf:()=>l,T:()=>g,Z3:()=>p,dW:()=>o,k0:()=>r,nF:()=>s,uN:()=>a,uf:()=>y,v6:()=>c,vA:()=>d,vD:()=>f});class u extends Error{name="TimeoutError"}function p(e,t){let n;const r=new Promise(((e,r)=>{const i=a((()=>r(new u)),t);n=()=>{i(),e()}}));return e.finally(n),Promise.race([e,r])}function g(e,t){const n=[];return null!=t&&t>=0&&n.push({...e[t],hp:1}),{ver:"1.0",complete:1,nodes:n}}function m(e){return null==e?e:String(e)}function f(e){return Array.isArray(e)?e.map(m):m(e)}function h(e,t){let n,r=[];e.waitFor=e=>{e&&(r.push(e),n=null)},Object.defineProperty(e,"allReady",{get:()=>(n||(r.length?(r.length>1&&(r=[Promise.allSettled(r)]),n=Promise.allSettled([t,r[0]])):n=t),n)})}function b(e){return Array.isArray(e)&&2===e.length&&e.every((e=>Number.isInteger(e)&&e>0))}function y(e,t){let{wnd:n,urlParams:r}=t;e=`htlbid_${e}`;let i=r.get(e);try{i?n.sessionStorage.setItem(e,i):i=n.sessionStorage.getItem(e)||n.localStorage.getItem(e)}catch{}return i}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(194);if(((()=>{const e=document.cookie.split("; ");for(const t of e){const[e,n]=t.split("=");if("htl_dev"===e)return decodeURIComponent(n)}return null})()||(()=>{const e=window.location.search.match("[?&]htl_dev(?:&|$|=([^&]*))");return e?e[1]?decodeURIComponent(e[1]):"":null})()||(()=>{const e=window.location.hash.match("[#&]htl_dev(?:&|$|=([^&]*))");return e?e[1]?decodeURIComponent(e[1]):"":null})())&&!new URL(document.currentScript.src).searchParams.has("testing")){const e="https://localhost:8888/htlbid.js?testing=true",t=document.createElement("script");t.src=e,t.async=!1,document.currentScript.after(t);const n="htlbid.js -- bailing to load script from another environment";throw console.log(n),new Error(n)}var t=n(416),r=n(412);function i(t){(0,e.L1)(t),t.events.emit("pageview",{},{sync:!0})}function o(e,t,n){e.events.on(t,(e=>{let{type:t,data:r}=e;return n({type:t,data:s(r)})}))}async function a(e,t,n){if(!t)return;let r;r=Array.isArray(n?.userIds)?new Set(n.userIds):{has:()=>!0},await e.events.emit("user.data",{data:t,targets:r})}function s(e){const t=e.safeData||={};return e.slot&&!t.slot?t.slot=e.slot.safeData:e.slots&&!t.slots&&Object.defineProperty(t,"slots",{enumerable:!0,get:()=>e.slots.map((e=>e.safeData))}),t}var d=n(82),c=n(731);function l(e){let{state:t,data:n}=e;t.events.emit("pageview",{initial:!0,safeData:{initial:!0}},{sync:!0});const{htlbid:r}=n,{cmd:i}=r;r.cmd={push:u},(i||[]).forEach(u)}function u(t){try{t()}catch(t){e.Rm.error("Error processing command",t)}}const p=window,g=p.htlbid||={};if(g.cmd||=[],!g.loaded){const s=new URLSearchParams(p.location.search);if(!((t,n)=>{const r=(0,d.uf)("local",{wnd:t,urlParams:n});if(r&&"false"!==r){const n=t.document.currentScript.src;try{const i=new URL(n);let o;if("true"===r)o="localhost:8080";else if("stage"===r)i.pathname.startsWith("/stage/")||(i.pathname=`/stage${i.pathname}`);else if(/^[1-9]\d*$/.test(r)){const[,e,t]=/(.*)(\/[^/]*)$/.exec(i.pathname);e.endsWith(`/${r}`)||(i.pathname=`${e}/${r}${t}`)}else o=r;o&&(i.protocol="http:",i.host=o,[i.pathname]=/\/[^/]*$/.exec(i.pathname));const a=String(i);if(a!==n)return e.Rm.warn("Loading",a,"instead"),(0,d.k0)(t,a,{onerror(){e.Rm.error("Failed to load",a)}}),!0}catch{}}return!1})(p,s)&&(e=>{const t=`.${e.location.hostname}`;return["localhost","htlbid.com","htlbid-staging.com","giphy.com","www.dev.giphy.tech","local.giphy.com","cdn-qa.giphy.com","media.giphy.com","staging.media.giphy.com","web-1.beta.giphy.com","web-2.beta.giphy.com","web-3.beta.giphy.com","web-4.beta.giphy.com","web-demo-ads-spin-web.dev.giphy.tech","web-mvp-ads-spin-web.dev.giphy.tech"].some((e=>t.endsWith(`.${e}`)))})(p)){Object.assign(g,{siteId:1683,revision:90,codeRevision:"5761bf",clientVersion:"3.1.17",countryCode:"KR",regionCode:"28",deviceType:"desktop",loaded:!0}),p.performance.mark("htl-load");const u={accountId:239,buildId:49220,pixelId:"4e1d4d29862b",htlPrefix:"htl",modules:{amazon:{pubId:"30787d05-7895-471e-9cdf-d931d7b5ea5d",schain:0},gpt:{networkCode:"21678428316"},hb:{timeout:2e3},prebid:{config:{minBidCacheTTL:0,eventHistoryTTL:30,enableTIDs:!0,useBidCache:!0,priceGranularity:{buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:10,increment:.5},{max:50,increment:1}]},v3Settings:{gdpr:{timeout:8e3,defaultGdprScope:!0},gpp:{cmpApi:!0,timeout:8e3}},floors:{data:{schema:{fields:["device"]},values:{mobile:.02,desktop:.05}}}},bidderSettings:{standard:{storageAllowed:!0}},pbjsGlobal:"pbjs",bids:[["seedtag",{publisherId:"7897-3865-01",adUnitId:"32694646",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694637",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694638",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694639",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694642",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694643",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694644",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694645",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694647",placement:"inBanner"},{publisherId:"7897-3865-01",adUnitId:"32694649",placement:"inBanner"}],["ogury",{assetKey:"OGY-1F8582BC53C4",adUnitId:"wm-hb-head-giphy-hasht-lplfcpi04ovup"}],["cpmstar",{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171},{placementId:90171}],["smilewanted",{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"},{zoneId:"giphy.com_hb_display"}],["appnexus",{placementId:"32700517"},{placementId:"32258041"},{placementId:"32258151"},{placementId:"32700518"},{placementId:"32258171"}],["medianet",{cid:"8CU1U1TH4",crid:"119619687"},{cid:"8CU1U1TH4",crid:"119619687"},{cid:"8CU1U1TH4",crid:"134342484"},{cid:"8CU1U1TH4",crid:"134342484"}],["gumgum",{zone:"bs8wa5ml",slot:1107705},{zone:"bs8wa5ml",slot:1094104},{zone:"bs8wa5ml",slot:1094105},{zone:"bs8wa5ml",slot:1107705},{zone:"bs8wa5ml",slot:1094107}],["amx",{tagId:"aGFzaHRhZ2xhYnMtcm9uLmNvbQ"},{tagId:"aGFzaHRhZ2xhYnMtcm9uLmNvbQ"},{tagId:"aGFzaHRhZ2xhYnMtcm9uLmNvbQ"},{tagId:"aGFzaHRhZ2xhYnMtcm9uLmNvbQ"}],["pubmatic",{publisherId:"5941941"},{publisherId:"159885",adSlot:"5786958"},{publisherId:"159885",adSlot:"5786960"},{publisherId:"5941947"},{publisherId:"159885",adSlot:"5786965"}],["sharethrough",{pkey:"RSfy7jnxHhRlJIOz7c491mKV"},{pkey:"flCN8D5JvxO901DIGLE08Lho"},{pkey:"Ti7lJH0N0PNC4mvuZjmyVe70"},{pkey:"aIHJQMwDYhvoSZtlI37xsW2C"},{pkey:"ISyBhaE1mpFFbWJUdSBcPntk"}],["rise",{org:"65563aa12dc581000158f53a"},{org:"65563aa12dc581000158f53a"},{org:"65563aa12dc581000158f53a"},{org:"65563aa12dc581000158f53a"},{org:"65563aa12dc581000158f53a"}],["ix",{siteId:"1095659"},{siteId:"1095660"},{siteId:"1095661"},{siteId:"1095662"},{siteId:"1095663"},{siteId:"1095664"},{siteId:"1095665"}],["33across",{siteId:"cU7utqarar8ikKrkHcnnVW",productId:"siab"},{siteId:"cU7utqarar8ikKrkHcnnVW",productId:"siab"},{siteId:"cU7utqarar8ikKrkHcnnVW",productId:"siab"}]],groups:[[0,0,1,0],[2,0],[2,1],[2,2],[2,3],[0,1,3,0],[2,4],[2,5],[4,0,5,0,6,0,7,0,8,0,9,0,10,0],[0,2,3,1,11,0],[2,6],[8,1,4,1,6,1,9,1],[0,3,3,2,10,1,2,7],[8,2,4,2,6,2,9,2,7,1,5,1,10,2,11,1,2,8,12,0],[2,9],[0,4,3,3,11,2,2,10],[2,11],[0,5,3,4,2,12],[0,6,3,5,11,3,2,13],[2,14],[2,15],[2,16],[2,17],[2,18],[0,7,3,6,2,19],[4,3,5,2,6,3,7,2,8,3,9,3,10,3,12,1],[8,4,4,4,6,4,9,4,7,3,5,3,10,4,11,4,2,20,12,2],[2,21],[0,8,3,7,11,5,2,22],[2,23],[3,8,2,24],[0,9,3,9,11,6,2,25]],bidderThrottling:{failsToPause:4,unpauseSeconds:180},blockAdvertisers:["adobe.com","stock.adobe.com"],userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}},userIds:[{name:"criteo"},{name:"sharedId",storage:{type:"cookie",name:"_sharedID",expires:365}}]},schain:{global:0,bidders:[[-1,"cpmstar"]]}},refreshCounter:{key:"htl_refresh"},schain:[{asi:"hashtag-labs.com",sid:"76"}],lazyFetch:{},lazyLoad:{},refresh:{}},slots:{desktop_bottom_leaderboard_search:{tiles:[[[1024,0],{sizes:[[728,90],[970,90],[970,66],[468,60]],amazon:{},prebid:{groups:[13,0]}}],[[0,0],{}]],gpt:{adUnit:"desktop_bottom_leaderboard_search"},refresh:{interval:25,max:1e3},sticky:{closeable:!0,closeHours:1}},desktop_in_grid:{tiles:[[[1024,0],{sizes:[[250,250]]}],[[0,0],{}]],gpt:{adUnit:"desktop_in_grid"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:20,max:1e3}},desktop_in_grid_detail:{tiles:[[[1024,0],{sizes:[[250,250]]}],[[0,0],{}]],gpt:{adUnit:"desktop_in_grid_detail"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:20,max:1e3}},desktop_in_grid_search:{tiles:[[[1024,0],{sizes:[[250,250]]}],[[0,0],{}]],gpt:{adUnit:"desktop_in_grid_search"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:20,max:1e3}},desktop_medium_rectangle_channel:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[9,8,4]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_medium_rectangle_channel"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},desktop_medium_rectangle_detail:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[5,8,6]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_medium_rectangle_detail"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},desktop_medium_rectangle_home:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[9,8,7]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_medium_rectangle_home"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},desktop_medium_rectangle_search:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[9,8,10]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_medium_rectangle_search"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},desktop_skyscraper_media:{tiles:[[[1024,0],{sizes:[[160,600]],amazon:{},prebid:{groups:[12,11]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_skyscraper_media"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},desktop_top_leaderboard:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[13]}}],[[0,0],{}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard"},refresh:{interval:30,max:500}},desktop_top_leaderboard_channel:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[13,18,14]}}],[[0,0],{}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard_channel"},refresh:{interval:30,max:500}},desktop_top_leaderboard_detail:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[13,15]}}],[[0,0],{}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard_detail"},refresh:{interval:30,max:500}},desktop_top_leaderboard_home:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[13,18,16]}}],[[0,0],{}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard_home"},refresh:{interval:30,max:500}},desktop_top_leaderboard_media:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[17,13]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard_media"},refresh:{interval:30,max:500}},desktop_top_leaderboard_search:{tiles:[[[1024,0],{sizes:[[728,90]],amazon:{},prebid:{groups:[13,18]}}],[[0,0],{}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"desktop_top_leaderboard_search"},refresh:{interval:30,max:500}},mobile_in_grid:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[250,250]]}]],gpt:{adUnit:"mobile_in_grid"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:25,max:1e3}},mobile_in_grid_detail:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[250,250]]}]],gpt:{adUnit:"mobile_in_grid_detail"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:25,max:1e3}},mobile_in_grid_search:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[250,250]]}]],gpt:{adUnit:"mobile_in_grid_search"},lazyLoad:{enabled:!0,pixels:800},refresh:{interval:25,max:1e3}},mobile_medium_rectangle_channel:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[9,8,22]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_medium_rectangle_channel"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},mobile_medium_rectangle_home:{tiles:[[[1700,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[9,8,23]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_medium_rectangle_home"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},mobile_medium_rectangle_media:{tiles:[[[0,0],{sizes:[[300,250]],amazon:{},prebid:{groups:[24,25]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_medium_rectangle_media"},lazyLoad:{enabled:!0,pixels:350},refresh:{interval:30,max:500}},mobile_top_leaderboard:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[26]}}]],gpt:{adUnit:"mobile_top_leaderboard"},refresh:{interval:30,max:500}},mobile_top_leaderboard_channel:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[26,31,27]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_top_leaderboard_channel"},refresh:{interval:30,max:500}},mobile_top_leaderboard_detail:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[26,28]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_top_leaderboard_detail"},refresh:{interval:30,max:500}},mobile_top_leaderboard_home:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[26,31,29]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_top_leaderboard_home"},refresh:{interval:30,max:500}},mobile_top_leaderboard_media:{tiles:[[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[30,26]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_top_leaderboard_media"},refresh:{interval:30,max:500}},mobile_top_leaderboard_search:{tiles:[[[1024,0],{}],[[0,0],{sizes:[[320,50]],amazon:{},prebid:{groups:[26,31]}}]],gpt:{targeting:{htl_refresh:["0"]},adUnit:"mobile_top_leaderboard_search"},refresh:{interval:30,max:500}}}};g.config?.(u);const m=new e.sV;Object.assign(m.state,{wnd:p,urlParams:s}),(e=>{try{e.pbjs=e.pbjs||{},e.pbjs.cmd=e.pbjs.cmd||[],e.pbjs.cmd.push((()=>{const t=["320x50","300x250","728x90","250x250","468x60","970x90","970x66"];e.pbjs.onEvent("beforeRequestBids",(e=>{e.forEach((e=>{const{sizes:n}=e.mediaTypes.banner,r=n.filter((e=>{const n=e.join("x");return t.includes(n)}));e.mediaTypes.banner.sizes=r}))}))})),(t=document.createElement("script")).src="https://raven-edge.aditude.io/raven/giphy-main-aMrms/library.js",t.async=!0,document.head.appendChild(t),t.onload=()=>{e.Raven=e.Raven||{cmd:[]},e.Raven.cmd.push((e=>{let{config:t}=e;t.setCustom({param1:"htl"})}))},t.onerror=()=>{console.warn("Failed to load raven library.")}}catch(e){console.error("Custom JS error:",e)}var t})(window),g.disabled||(async(s,u,p)=>{const{state:g}=u;g.config=p,g.ts=Date.now();const m=(e=>{const t=(0,d.uf)("debug",e);return["true","verbose"].includes(t)&&t})(g)||p.debug;m&&(await Promise.resolve().then(n.bind(n,648))).setup(s,u,m),(await Promise.resolve().then(n.bind(n,288))).register(u),(t=>{t.on("init",(t=>{let{state:n,data:s}=t;const{htlbid:d}=s;(0,r.a)(n,d,{newPage:i,on:o,setUserData:a}),Object.assign(d,{enableDebug(){e.Rm.warn("API enableDebug should only be called for development"),d.state=n}})}))})(u),u.on("init",l,t.iD).on("init",c.T,t.ny),(0,e.Ts)(u,{htlbid:s})})(g,m,u)}}})()})();